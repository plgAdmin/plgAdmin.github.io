/*
Product Name: dhtmlxEditor 
Version: 5.1.0 
Edition: Standard 
License: content of this file is covered by DHTMLX Commercial or enterpri. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx)=="undefined"){window.dhx=window.dhx4={version:"5.1.0",skin:null,skinDetect:function(a){var b=Math.floor(dhx4.readFromCss(a+"_skin_detect")/10)*10;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[b]||null},readFromCss:function(c,d,e){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}if(typeof(e)=="string"){b.innerHTML=e}var a=b[d||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var i=b.clientLeft||h.clientLeft||0;var j=g.top+a-f;var c=g.left+e-i;return{top:Math.round(j),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(d){if(this._isObj(d)){var c={};for(var b in d){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}else{var c=[];for(var b=0;b<d.length;b++){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(d,g,b){d=(typeof(d)=="string"?document.getElementById(d):d);var a=d.value.length;g=Math.max(Math.min(g,a),0);b=Math.min(b,a);if(d.setSelectionRange){try{d.setSelectionRange(g,b)}catch(f){}}else{if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);try{c.select()}catch(f){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var g=arguments[1];var f=window.dhx4.trim(arguments[3]);var h=null;var e=[c[g]];if(f.length>0){f=f.split(":");var d=[];for(var i=0;i<f.length;i++){if(i>0&&d[d.length-1].match(/\\$/)!=null){d[d.length-1]=d[d.length-1].replace(/\\$/,"")+":"+f[i]}else{d.push(f[i])}}h=d[0];for(var i=1;i<d.length;i++){e.push(d[i])}}if(typeof(h)=="string"&&typeof(window.dhx4.template[h])=="function"){return window.dhx4.template[h].apply(window.dhx4.template,e)}if(g.length>0&&typeof(c[g])!="undefined"){if(a==true){return window.dhx4.trim(c[g])}return String(c[g])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(d,e,c,a){var b=window.dhx4.template._parseFmt(e,c,a);if(b==false){return d}return window.dhx4.template._getFmtValue(d,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(h,c,a){var d=h.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(d==null||d.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(d[1])=="string"?d[1]:""),s_aft:(typeof(d[3])=="string"?d[3]:"")};var g=d[2].split(".");if(g[1]!=null){b.d_len=g[1].length}var e=g[0].split(",");if(e.length>1){b.i_len=e[e.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(f,d,a){if(d==null||typeof(d)=="undefined"){d=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefined"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(f instanceof Date){var e=function(g){return(String(g).length==1?"0"+String(g):g)};var b=function(i){switch(i){case"%d":return e(f.getDate());case"%j":return f.getDate();case"%D":return a.dayShortName[f.getDay()];case"%l":return a.dayFullName[f.getDay()];case"%m":return e(f.getMonth()+1);case"%n":return f.getMonth()+1;case"%M":return a.monthShortName[f.getMonth()];case"%F":return a.monthFullName[f.getMonth()];case"%y":return e(f.getYear()%100);case"%Y":return f.getFullYear();case"%g":return(f.getHours()+11)%12+1;case"%h":return e((f.getHours()+11)%12+1);case"%G":return f.getHours();case"%H":return e(f.getHours());case"%i":return e(f.getMinutes());case"%s":return e(f.getSeconds());case"%a":return(f.getHours()>11?"pm":"am");case"%A":return(f.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return f.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var k=f.getTimezoneOffset();var j=Math.abs(Math.floor(k/60));var g=Math.abs(k)-j*60;return(k>0?"-":"+")+e(j)+":"+e(g);default:return i}};var c=String(d||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(f))};window.dhx4.str2date=function(g,s,x){if(s==null||typeof(s)=="undefined"){s=window.dhx4.dateFormat[window.dhx4.dateLang]}if(x==null||typeof(x)=="undefined"){x=window.dhx4.dateStrings[window.dhx4.dateLang]}s=s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var u=[];var j=[];s=s.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":j.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":j.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":j.push(e);return"(\\d{1,2})";case"%Y":j.push(e);return"(\\d{4})";case"%a":j.push(e);return"([a|p]m)";case"%A":j.push(e);return"([A|P]M)";case"%u":j.push(e);return"(\\d{1,6})";case"%P":j.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var y=new RegExp(s,"i");var l=g.match(y);if(l==null||l.length-1!=j.length){return"Invalid Date"}for(var b=1;b<l.length;b++){u.push(l[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var m={};var i={};for(var b=0;b<j.length;b++){if(typeof(c[j[b]])!="undefined"){var d=c[j[b]];if(!m[d]){m[d]=[];i[d]=[]}m[d].push(u[b]);i[d].push(j[b])}}u=[];j=[];for(var b=1;b<=7;b++){if(m[b]!=null){for(var o=0;o<m[b].length;o++){u.push(m[b][o]);j.push(i[b][o])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var n=function(k,e){for(var f=0;f<e.length;f++){if(e[f].toLowerCase()==k){return f}}return -1};for(var b=0;b<u.length;b++){switch(j[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(u[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[j[b]]](Number(u[b])+(j[b]=="%m"||j[b]=="%n"?-1:0))}break;case"%M":case"%F":var h=n(u[b].toLowerCase(),x[{"%M":"monthShortName","%F":"monthFullName"}[j[b]]]);if(h>=0){a.setMonth(h)}break;case"%y":if(!isNaN(u[b])){var t=Number(u[b]);a.setFullYear(t+(t>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(u[b])){var t=Number(u[b]);if(t<=12&&t>=0){a.setHours(t+(n("pm",u)>=0?(t==12?0:12):(t==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=u[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,d,c){if(typeof d.status=="undefined"||d.status<400){xml=(!d.responseXML)?dhx4.ajax.parse(d.responseText||d):(d.responseXML||d);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(f){return[]}}else{var d=[];var g;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(g=b.iterateNext()){d.push(g)}return d}},query:function(a){return dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(b,c,d,h,j,n,f){if(typeof d==="object"){var g=[];for(var k in d){g.push(k+"="+encodeURIComponent(d[k]))}d=g.join("&")}var e=dhx.promise.defer();var m=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var i=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(h==true){m.onreadystatechange=function(){if((m.readyState==4)||(i==true&&m.readyState==3)){if(m.status!=200||m.responseText==""){e.reject(m);if(!dhx4.callEvent("onAjaxError",[{xmlDoc:m,filePath:c,async:h}])){return}}window.setTimeout(function(){if(typeof(j)=="function"){try{j.apply(window,[{xmlDoc:m,filePath:c,async:h}])}catch(a){e.reject(a)}e.resolve(m.responseText)}if(n!=null){if(typeof(n.postData)!="undefined"){dhx4.ajax.postLong(n.url,n.postData,j)}else{dhx4.ajax.getLong(n.url,j)}}j=null;m=null},1)}}}if(b=="GET"){c+=this._dhxr(c)}m.open(b,c,h);if(f!=null){for(var l in f){m.setRequestHeader(l,f[l])}}else{if(b=="POST"||b=="PUT"||b=="DELETE"){m.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(b=="GET"){d=null}}}m.setRequestHeader("X-Requested-With","XMLHttpRequest");m.send(d);if(h!=true){if((m.readyState==4)||(i==true&&m.readyState==3)){if(m.status!=200||m.responseText==""){dhx4.callEvent("onAjaxError",[{xmlDoc:m,filePath:c,async:h}])}}}e.xmlDoc=m;e.filePath=c;e.async=h;return e},_dhxr:function(a,b){if(this.cache!=true){if(a.match(/^[\?\&]$/)==null){a=(a.indexOf("?")>=0?"&":"?")}if(typeof(b)=="undefined"){b=true}return a+"dhxr"+new Date().getTime()+(b==true?"=1":"")}return""}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(g,c,f,e,h){if(h=="clear"){for(var b in g._dhxdataload){g._dhxdataload[b]=null;delete g._dhxdataload[b]}g._loadData=null;g._dhxdataload=null;g.load=null;g.loadStruct=null;g=null;return}g._dhxdataload={initObj:c,xmlToJson:f,xmlRootTag:e,onBeforeXLS:null};g._loadData=function(n,o,p){if(arguments.length==2){p=o;o=null}var m=null;if(arguments.length==3){p=arguments[2]}this.callEvent("onXLS",[]);if(typeof(n)=="string"){var l=n.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var s=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(s.test(l.replace(/^<\?xml[^\?]*\?>\s*/,""))){m=dhx4.ajax.parse(n);if(m!=null){m=this[this._dhxdataload.xmlToJson].apply(this,[m])}}if(m==null&&(l.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||l.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){m=dhx4.s2j(l)}if(m==null){var j=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var l=this._dhxdataload.onBeforeXLS.apply(this,[n]);if(l!=null&&typeof(l)=="object"){if(l.url!=null){n=l.url}if(l.params!=null){for(var q in l.params){j.push(q+"="+encodeURIComponent(l.params[q]))}}}}var r=this;var i=function(a){var k=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){k=r[r._dhxdataload.xmlToJson].apply(r,[a.xmlDoc.responseXML])}else{k=dhx4.s2j(a.xmlDoc.responseText)}if(k!=null){r[r._dhxdataload.initObj].apply(r,[k,n])}r.callEvent("onXLE",[]);if(p!=null){if(typeof(p)=="function"){p.apply(r,[])}else{if(typeof(window[p])=="function"){window[p].apply(r,[])}}}i=p=null;k=a=r=null};j=j.join("&")+(typeof(o)=="string"?"&"+o:"");if(dhx4.ajax.method=="post"){return dhx4.ajax.post(n,j,i)}else{if(dhx4.ajax.method=="get"){return dhx4.ajax.get(n+(j.length>0?(n.indexOf("?")>0?"&":"?")+j:""),i)}}return}}else{if(typeof(n.documentElement)=="object"||(typeof(n.tagName)!="undefined"&&typeof(n.getElementsByTagName)!="undefined"&&n.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){m=this[this._dhxdataload.xmlToJson].apply(this,[n])}else{m=window.dhx4._copyObj(n)}}if(m!=null){this[this._dhxdataload.initObj].apply(this,[m])}this.callEvent("onXLE",[]);if(p!=null){if(typeof(p)=="function"){p.apply(this,[])}else{if(typeof(window[p])=="function"){window[p].apply(this,[])}}p=null}};if(h!=null){var d={struct:"loadStruct",data:"load"};for(var b in h){if(h[b]==true){g[d[b]]=function(){return this._loadData.apply(this,arguments)}}}}g=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,e){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var d=window.dhx4.newId();this.dhxevs.data[c][d]=e;return d};a.detachEvent=function(f){for(var d in this.dhxevs.data){var e=0;for(var c in this.dhxevs.data[d]){if(c==f){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}else{e++}}if(e==0){this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(d,f){d=String(d).toLowerCase();if(this.dhxevs.data[d]==null){return true}var e=true;for(var c in this.dhxevs.data[d]){e=this.dhxevs.data[d][c].apply(this,f)&&e}return e};a.detachAllEvents=function(){for(var d in this.dhxevs.data){for(var c in this.dhxevs.data[d]){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(d,c){for(var e in c){if(!d[e]){d[e]=c[e]}}return d},extend_api:function(a,d,c){var b=window[a];if(!b){return}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e])}}for(var e in g){if(d[e]){this[d[e]](g[e])}else{if(e.indexOf("on")===0){this.attachEvent(e,g[e])}}}}else{var f=b.apply(this,arguments)}if(d._patch){d._patch(this)}return f||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target}else{d=c.srcElement}dragger.checkLanding(d,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(e){return d+"_"+b}else{this.fx=d}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var d;var e;var b,a;dhtmlxEvent(document.body,"touchstart",function(f){e=f.touches[0].target;b=f.touches[0].clientX;a=f.touches[0].clientY;d=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(e){var f=document.createEvent("HTMLEvents");f.initEvent("dblclick",true,true);e.dispatchEvent(f);d=e=null}}dhtmlxEvent(document.body,"touchmove",function(f){if(d){if(Math.abs(f.touches[0].clientX-b)>50||Math.abs(f.touches[0].clientY-a)>50){window.clearTimeout(d);d=e=false}}});dhtmlxEvent(document.body,"touchend",function(f){if(d){window.clearTimeout(d);d=e=false}});dhtmlxEvent.initTouch=function(){}}}(function(b){var c=typeof setImmediate!=="undefined"?setImmediate:function(e){setTimeout(e,0)};function d(f,g){var e=this;e.promise=e;e.state="pending";e.val=null;e.fn=f||null;e.er=g||null;e.next=[]}d.prototype.resolve=function(f){var e=this;if(e.state==="pending"){e.val=f;e.state="resolving";c(function(){e.fire()})}};d.prototype.reject=function(f){var e=this;if(e.state==="pending"){e.val=f;e.state="rejecting";c(function(){e.fire()})}};d.prototype.then=function(f,h){var e=this;var g=new d(f,h);e.next.push(g);if(e.state==="resolved"){g.resolve(e.val)}if(e.state==="rejected"){g.reject(e.val)}return g};d.prototype.fail=function(e){return this.then(null,e)};d.prototype.finish=function(g){var e=this;e.state=g;if(e.state==="resolved"){for(var f=0;f<e.next.length;f++){e.next[f].resolve(e.val)}}if(e.state==="rejected"){for(var f=0;f<e.next.length;f++){e.next[f].reject(e.val)}if(!e.next.length){throw (e.val)}}};d.prototype.thennable=function(j,f,h,m,l){var g=this;l=l||g.val;if(typeof l==="object"&&typeof j==="function"){try{var i=0;j.call(l,function(e){if(i++!==0){return}f(e)},function(e){if(i++!==0){return}h(e)})}catch(k){h(k)}}else{m(l)}};d.prototype.fire=function(){var f=this;var g;try{g=f.val&&f.val.then}catch(h){f.val=h;f.state="rejecting";return f.fire()}f.thennable(g,function(e){f.val=e;f.state="resolving";f.fire()},function(e){f.val=e;f.state="rejecting";f.fire()},function(i){f.val=i;if(f.state==="resolving"&&typeof f.fn==="function"){try{f.val=f.fn.call(undefined,f.val)}catch(j){f.val=j;return f.finish("rejected")}}if(f.state==="rejecting"&&typeof f.er==="function"){try{f.val=f.er.call(undefined,f.val);f.state="resolving"}catch(j){f.val=j;return f.finish("rejected")}}if(f.val===f){f.val=TypeError();return f.finish("rejected")}f.thennable(g,function(e){f.val=e;f.finish("resolved")},function(e){f.val=e;f.finish("rejected")},function(e){f.val=e;f.state==="resolving"?f.finish("resolved"):f.finish("rejected")})})};d.prototype.done=function(){if(this.state="rejected"&&!this.next){throw this.val}return null};d.prototype.nodeify=function(e){if(typeof e==="function"){return this.then(function(g){try{e(null,g)}catch(f){setImmediate(function(){throw f})}return g},function(g){try{e(g)}catch(f){setImmediate(function(){throw f})}return g})}return this};d.prototype.spread=function(e,f){return this.all().then(function(g){return typeof e==="function"&&e.apply(null,g)},f)};d.prototype.all=function(){var e=this;return this.then(function(q){var f=new d();if(!(q instanceof Array)){f.reject(TypeError);return f}var h=0;var o=q.length;function k(){if(++h===o){f.resolve(q)}}for(var m=0,j=q.length;m<j;m++){var r=q[m];var g;try{g=r&&r.then}catch(n){f.reject(n);break}(function(l){e.thennable(g,function(i){q[l]=i;k()},function(i){f.reject(i)},function(){k()},r)})(m)}return f})};var a={all:function(e){var f=new d(null,null);f.resolve(e);return f.all()},defer:function(){return new d(null,null)},fcall:function(){var h=new d();var f=Array.apply([],arguments);var g=f.shift();try{var j=g.apply(null,f);h.resolve(j)}catch(i){h.reject(i)}return h},nfcall:function(){var h=new d();var f=Array.apply([],arguments);var g=f.shift();try{f.push(function(e,j){if(e){return h.reject(e)}return h.resolve(j)});g.apply(null,f)}catch(i){h.reject(i)}return h}};b.promise=a})(dhx);function dhtmlXCellObject(c,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=c;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var b=document.createElement("DIV");b.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(b);b=null;this._updateIdx=function(){for(var d in this.conf.idx){this.conf.idx[d]=null;delete this.conf.idx[d]}for(var g=0;g<this.cell.childNodes.length;g++){var e=this.cell.childNodes[g].className;for(var d in this.conf.idx_data){var f=new RegExp(this.conf.idx_data[d]);if(e.match(f)!=null){this.conf.idx[d]=g}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var d in this.dataNodes){if(this.dataNodes[d]!=null&&typeof(this.dataNodes[d].setSizes)=="function"){this.dataNodes[d].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(m,k,n,g,i,j,e,f){if(this.conf.size==null){this.conf.size={}}if(f==null){f={}}var o={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=m;this.conf.size.y=k;this.conf.size.w=Math.max(n,0);this.conf.size.h=Math.max(g,0);for(var l in o){var d=(f[l]||l);this.cell.style[d]=this.conf.size[o[l]]+"px"}this.callEvent("_onSetSize",[]);if(j!==true){this._adjustCont(i,e)}else{this._adjustAttached(i)}this._adjustProgress()};this._adjustCont=function(i,g){var h=this.cell.childNodes[this.conf.idx.cont];if(typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.conf.collapsed==true){h.style.left=h.style.top="0px";h.style.width=h.style.height="200px";h=null;return}var f=0;for(var d in this.conf.ofs_nodes.t){var e=this.conf.ofs_nodes.t[d];f+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}var j=0;for(var d in this.conf.ofs_nodes.b){var e=this.conf.ofs_nodes.b[d];j+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}h.style.left="0px";h.style.top=f+"px";if(this.conf.cells_cont==null){this.conf.cells_cont={};h.style.width=this.cell.offsetWidth+"px";h.style.height=Math.max(this.cell.offsetHeight-f-j,0)+"px";this.conf.cells_cont.w=parseInt(h.style.width)-h.offsetWidth;this.conf.cells_cont.h=parseInt(h.style.height)-h.offsetHeight}h.style.left="0px";h.style.top=f+"px";h.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";h.style.height=Math.max(this.conf.size.h-f-j+this.conf.cells_cont.h,0)+"px";h=null;this._adjustAttached(i);if(g=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var e=["menu","toolbar","ribbon"];for(var g=0;g<e.length;g++){if(this.conf.idx[e[g]]!=null){var h=this.cell.childNodes[this.conf.idx[e[g]]];var f="dhx_cell_"+e[g]+"_no_borders";var d="dhx_cell_"+e[g]+"_def";h.className=h.className.replace(new RegExp(this.conf.borders?f:d),this.conf.borders?d:f);h=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(f){this.views[f]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var g=this.cell.childNodes[this.conf.idx.cont];while(g.childNodes.length>0){this.views[f].cellCont.push(g.firstChild);g.removeChild(g.firstChild)}g=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var e in this.dataNodes){for(var d in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[d][e])!="undefined"){this.views[f].ofs_nodes[d][e]=this.conf.ofs_nodes[d][e];this.conf.ofs_nodes[d][e]=null;delete this.conf.ofs_nodes[d][e]}}this.views[f].dataNodesCont[e]=this.cell.childNodes[this.conf.idx[e]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[e]]);this.views[f].dataNodes[e]=this.dataNodes[e];this.dataNodes[e]=null;delete this.dataNodes[e];this._updateIdx()}this.callEvent("_onViewSave",[f])};this._viewRestore=function(f){if(this.views[f]==null){return}this.dataObj=this.views[f].dataObj;this.dataType=this.views[f].dataType;this.conf.url_data=this.views[f].url_data;for(var g=0;g<this.views[f].cellCont.length;g++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[f].cellCont[g])}for(var e in this.views[f].dataNodes){this.dataNodes[e]=this.views[f].dataNodes[e];if(e=="menu"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(e=="toolbar"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="ribbon"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="sb"){this.cell.appendChild(this.views[f].dataNodesCont[e])}this._updateIdx()}for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.conf.ofs_nodes[e][d]=this.views[f].ofs_nodes[e][d]}}if(this.conf.borders!=this.views[f].borders){this[this.views[f].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[f]);this._viewDelete(f)};this._viewDelete=function(f){if(this.views[f]==null){return}this.views[f].borders=null;for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.views[f].ofs_nodes[e][d]=null}this.views[f].ofs_nodes[e]=null}this.views[f].dataType=null;this.views[f].dataObj=null;this.views[f].url_data=null;for(var g=0;g<this.views[f].cellCont.length;g++){this.views[f].cellCont[g]=null}this.views[f].cellCont=null;for(var e in this.views[f].dataNodes){this.views[f].dataNodes[e]=null;this.views[f].dataNodesCont[e]=null}this.views[f].dataNodes=this.views[f].dataNodesCont=null;this.views[f]=null;delete this.views[f]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var b=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return b};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(d){if(d==this.conf.view){var e=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=e;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[d]==null){return}var c=this.views[d];for(var b in c.dataNodes){if(typeof(c.dataNodes[b].unload)=="function"){c.dataNodes[b].unload()}c.dataNodes[b]=null;c.dataNodesCont[b]=null}if(c.dataType=="url"){if(c.cellCont!=null&&c.cellCont[0]!="null"){this._detachURLEvents(c.cellCont[0])}}else{if(c.dataObj!=null){if(typeof(c.dataObj.unload)=="function"){c.dataObj.unload()}else{if(typeof(c.dataObj.destructor)=="function"){c.dataObj.destructor()}}c.dataObj=null}}c=null;this._viewDelete(d);if(typeof(this.conf.views_loaded[d])!="undefined"){delete this.conf.views_loaded[d]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var b=document.createElement("DIV");b.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className=this.conf.idx_data.pr3;a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{a.className=this.conf.idx_data.pr2}if(this.conf.idx.cover!=null){this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(a)}this.cell.insertBefore(b,a);b=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}for(var b in {pr3:3,pr2:2,pr1:1}){var c=this.cell.childNodes[this.conf.idx[b]];if(c!=null){c.parentNode.removeChild(c)}c=null}this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var b=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];if(!this.conf.pr.ofs){a.style.width=b.offsetWidth+"px";a.style.height=b.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=b.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=b.offsetHeight-this.conf.pr.ofs.h+"px";b=a=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);a=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var b in this.views){this.unloadView(b)}this.conf=null;for(var b in this){this[b]=null}};dhtmlXCellObject.prototype.attachObject=function(d,c){if(window.dhx4.s2b(c)&&!(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell)){c=false}if(typeof(d)=="string"){d=document.getElementById(d)}if(d.parentNode==this.cell.childNodes[this.conf.idx.cont]){d=null;return}if(c){d.style.display="";var a=d.offsetWidth;var b=d.offsetHeight}this._attachObject(d);this.dataType="obj";d.style.display="";d=null;if(c){this._adjustByCont(a,b)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(b,a){this._detachObject(null,b,a)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){if(this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"){return this.cell.childNodes[this.conf.idx.cont].firstChild}else{return this.dataObj}};dhtmlXCellObject.prototype.attachURL=function(b,l,c){if(c==true){c={}}var d=(typeof(c)!="undefined"&&c!=false&&c!=null);if(this.conf.url_data==null){this.conf.url_data={}}this.conf.url_data.url=b;this.conf.url_data.ajax=(l==true);this.conf.url_data.post_data=(c==true?{}:(c||null));if(this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(h){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}if(l==true){var k=this;if(d){var f="";for(var j in c){f+="&"+encodeURIComponent(j)+"="+encodeURIComponent(c[j])}this.conf.url_data.xml_doc=dhx4.ajax.post(b,f,function(a){if(k.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){k.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(k._doOnFrameContentLoaded)=="function"){k._doOnFrameContentLoaded()}k.dataType="url-ajax"}k=a=null})}else{this.conf.url_data.xml_doc=dhx4.ajax.get(b,function(a){if(k.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){k.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(k._doOnFrameContentLoaded)=="function"){k._doOnFrameContentLoaded()}k.dataType="url-ajax"}k=a=null})}}else{if(this.dataType=="url"){var g=this.getFrame()}else{var g=document.createElement("IFRAME");g.frameBorder=0;g.border=0;g.style.width="100%";g.style.height="100%";g.style.position="relative";this._attachObject(g);this.dataType="url";this._attachURLEvents()}if(d){var i=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(i){this._attachURLEvents()}g.src="about:blank"}else{g.src=b+window.dhx4.ajax._dhxr(b)}g=null}g=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(a,g,b,d){d=d||window.scheduler;var e=false;if(b){var f=document.getElementById(b);if(f){e=true}}if(!e){var c=b||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var f=document.createElement("DIV");f.id="dhxSchedObj_"+new Date().getTime();f.style.width="100%";f.style.height="100%";f.style.position="relative";f.style.overflow="hidden";f.className="dhx_cal_container";f.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+c+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(f);this.dataType="scheduler";this.dataObj=d;this.dataObj.setSizes=function(){this.update_view()};d.init(f.id,a,g);f=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(g,d,f,a,e){if(typeof(e)!="undefined"){g=e}else{var b=d||{};var i=(typeof(b.text)=="string"&&b.text.length>0?b.text:"&nbsp;");var c=(typeof(b.height)=="number"?b.height:false);var g=document.createElement("DIV");g.className="dhx_cell_statusbar_def";g.innerHTML="<div class='"+(b.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+i+"</div>";if(c!=false){g.firstChild.style.height=g.firstChild.style.lineHeight=c+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(g)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return g};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(a!=null&&window.dhx4.s2b(a.paging)==true){a.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(b){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(b,a){if(!this.dataNodes[b]){return}this.cell.childNodes[this.conf.idx[b]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var c=this;var b=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(d){c.callEvent("_onContentMouseDown",[b,d||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",c._doOnFrameMouseDown,false)}}catch(d){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(d){}}}else{a.onreadystatechange=function(d){if(this.readyState=="complete"){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",c._doOnFrameMouseDown)}}catch(f){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(f){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var h=this.getFrame().contentWindow.document;var g=h.createElement("FORM");g.method="POST";g.action=this.conf.url_data.url;h.body.appendChild(g);var c={};if(window.dhx4.ajax.cache!=true){c["dhxr"+new Date().getTime()]="1"}for(var b in this.conf.url_data.post_data){c[b]=this.conf.url_data.post_data[b]}for(var b in c){var e=h.createElement("INPUT");e.type="hidden";e.name=b;e.value=c[b];g.appendChild(e);e=null}this.conf.url_data.post_ifr=false;g.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(!a){return}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null};dhtmlXCellObject.prototype._attachObject=function(e,b,d,a,c){if(typeof(e)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[e]==1){return this["_createNode_"+e].apply(this,arguments)}if(a!=true){this._detachObject(null,true,null)}if(typeof(d)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=d}else{this.cell.childNodes[this.conf.idx.cont].appendChild(e)}e=null};dhtmlXCellObject.prototype._detachObject=function(g,b,a){this.callEvent("_onBeforeContentDetach",[]);if(g=="menu"||g=="toolbar"||g=="ribbon"||g=="sb"){var f=this.cell.childNodes[this.conf.idx[g]];f.parentNode.removeChild(f);f=null;this.conf.ofs_nodes[g=="sb"?"b":"t"][g]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(b==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.conf.unloading==true&&String(this.dataType).match(/ajax/)!=null){if(this.conf.url_data!=null&&this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(d){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}}if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var f=this.cell.childNodes[this.conf.idx.cont];while(f.childNodes.length>0){if(a===false){f.removeChild(f.lastChild)}else{f.firstChild.style.display="none";a.appendChild(f.firstChild)}}if(this.conf.append_mode){f.style.overflow="";this.conf.append_mode=false}var c=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=f=null;if(this.conf.unloading!=true&&c){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(b){this.detachObject(true);var d="layout";if(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){d="window"}if(typeof(window.dhtmlXWindowsCell)=="function"&&b instanceof window.dhtmlXWindowsCell&&b.wins.w[b._idd].conf.parked==true){b.wins._winCellSetOpacity(b._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)=="function"&&b instanceof window.dhtmlXAccordionCell&&b.conf.opened==false){b._cellSetOpacity("open",false)}for(var c in b.dataNodes){this._attachObject(c,null,null,null,b.cell.childNodes[b.conf.idx[c]]);this.dataNodes[c]=b.dataNodes[c];b.dataNodes[c]=null;b.conf.ofs_nodes[c=="sb"?"b":"t"][c]=false;b._updateIdx()}this._mtbUpdBorder();if(b.dataType!=null&&b.dataObj!=null){this.dataType=b.dataType;this.dataObj=b.dataObj;while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}b.dataType=null;b.dataObj=null;if(this.dataType=="grid"){if(d=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}}this.conf.view=b.conf.view;b.conf.view="def";for(var c in b.views){this.views[c]=b.views[c];b.views[c]=null;delete b.views[c]}b._updateIdx();b._adjustCont();this._updateIdx();this._adjustCont();if(b.conf.progress==true){b.progressOff();this.progressOn()}else{this.progressOff()}if(d=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(d,b){if(arguments.length==0||typeof(d)=="undefined"){return}var a=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(d==document.body){this.conf.fs_mode=true;this.base=d;if(this.base==document.body){var c={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=(c[this.conf.skin]!=null?c[this.conf.skin]:c.dhx_skyblue)}}else{this.base=(typeof(d)=="string"?document.getElementById(d):d)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(b!=null){this.setOffsets(b,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(f){}}}this._adjustCont=function(){var h=this.conf.ofs.t;for(var g in this.conf.ofs_nodes.t){h+=(this.conf.ofs_nodes.t[g]==true?this.dataNodes[g].offsetHeight:0)}var e=this.conf.ofs.b;for(var g in this.conf.ofs_nodes.b){e+=(this.conf.ofs_nodes.b[g]==true?this.dataNodes[g].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=h+"px";this.cont.style.height=this.base.clientHeight-h-e+"px"};this._setBaseSkin=function(e){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+e)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm);a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)};this._doOnResizeEnd=function(){a.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var e=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(e,"");this.cont=this.base=null;a=null};d=null}dhtmlXCellTop.prototype.setOffsets=function(f,e){var d=false;for(var b in f){var c=b.charAt(0);if(typeof(this.conf.ofs[c])!="undefined"&&!isNaN(f[b])){this.conf.ofs[c]=parseInt(f[b]);d=true}}if(e!==false&&typeof(this.setSizes)=="function"&&d==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}if(this.conf.ofs_menu==null){this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)=="undefined"){a={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(a.text)=="string"&&a.text.length>0?a.text:"&nbsp;")+"</div>";if(typeof(a.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"}this.dataNodes.sbObj.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(b){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(b,a){if(this.dataNodes[b]==null){return}this.dataNodes[b].style.display=a;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(b,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var b=document.createElement("DIV");b.className="dhxcelltop_progress";this.base.appendChild(b);var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className="dhxcelltop_progress_svg";a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{var a=document.createElement("DIV");a.className="dhxcelltop_progress_img"}this.base.appendChild(a);b=a=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var d={dhxcelltop_progress:true,dhxcelltop_progress_img:true,dhxcelltop_progress_svg:true};for(var c=0;c<this.base.childNodes.length;c++){if(typeof(this.base.childNodes[c].className)!="undefined"&&d[this.base.childNodes[c].className]==true){d[this.base.childNodes[c].className]=this.base.childNodes[c]}}for(var b in d){if(d[b]!=true){this.base.removeChild(d[b])}d[b]=null}this.conf.progress=false;d=null};dhtmlXCellTop.prototype.attachHeader=function(b,a){if(this.dataNodes.haObj!=null){return}if(typeof(b)!="object"){b=document.getElementById(b)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(a||b.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(b);b.style.visibility="visible";b=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(c,a){if(this.dataNodes.faObj!=null){return}if(typeof(c)!="object"){c=document.getElementById(c)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(a||c.offsetHeight)+"px";var b=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==b){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,b.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(c);c.style.visibility="visible";b=c=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXToolbarObject(b,c){var a=this;this.conf={skin:(c||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"material"),align:"left",align_autostart:"left",icons_path:"",icons_css:false,iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null,cssShadow:(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_toolbar_shadow")};if(typeof(b)=="object"&&b!=null&&typeof(b.tagName)=="undefined"){if(b.icons_path!=null||b.icon_path!=null){this.conf.icons_path=(b.icons_path||b.icon_path)}if(b.icons_size!=null){this.conf.icons_size_autoload=b.icons_size}if(b.iconset!=null){this.conf.icons_css=(b.iconset=="awesome")}if(b.json!=null){this.conf.json_autoload=b.json}if(b.xml!=null){this.conf.xml_autoload=b.xml}if(b.onload!=null){this.conf.onload_autoload=b.onload}if(b.onclick!=null||b.onClick!=null){this.conf.auto_onclick=(b.onclick||b.onClick)}if(b.items!=null){this.conf.items_autoload=b.items}if(b.skin!=null){this.conf.skin=b.skin}if(b.align!=null){this.conf.align_autostart=b.align}b=b.parent}this.cont=(typeof(b)!="object")?document.getElementById(b):b;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}b=null;this.cont.dir="ltr";this.base=document.createElement("DIV");this.base.className="dhxtoolbar_float_left";this.cont.appendChild(this.base);this.cont.ontouchstart=function(d){d=d||event;if((String(d.target.tagName||"").toLowerCase()=="input")){return true}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}d.cancelBubble=true;return false};this.setSkin(this.conf.skin);this.objPull={};this.anyUsed=null;this._genStr=function(d){var e="dhxId_";var g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var f=0;f<d;f++){e+=g.charAt(Math.round(Math.random()*(g.length-1)))}return e};this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput");this.idPrefix=this._genStr(12);window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:true});window.dhx4._eventable(this);this._getObj=function(g,d){var e=null;for(var f=0;f<g.childNodes.length;f++){if(g.childNodes[f].tagName!=null){if(String(g.childNodes[f].tagName).toLowerCase()==String(d).toLowerCase()){e=g.childNodes[f]}}}return e};this._addImgObj=function(e){var d=document.createElement(this.conf.icons_css==true?"I":"IMG");if(e.childNodes.length>0){e.insertBefore(d,e.childNodes[0])}else{e.appendChild(d)}return d};this._setItemImage=function(g,e,d){if(d==true){g.imgEn=e}else{g.imgDis=e}if((!g.state&&d==true)||(g.state&&d==false)){return}if(this.conf.icons_css==true){var f=this._getObj(g.obj,"i");if(f==null){f=this._addImgObj(g.obj)}f.className=this.conf.icons_path+e}else{var f=this._getObj(g.obj,"img");if(f==null){f=this._addImgObj(g.obj)}f.src=this.conf.icons_path+e}};this._clearItemImage=function(f,d){if(d==true){f.imgEn=""}else{f.imgDis=""}if((!f.state&&d==true)||(f.state&&d==false)){return}var e=this._getObj(f.obj,(this.conf.icons_css?"i":"img"));if(e!=null){e.parentNode.removeChild(e)}};this._setItemText=function(d,f){var e=this._getObj(d.obj,"div");if(f==null||f.length==0){if(e!=null){e.parentNode.removeChild(e)}return}if(e==null){e=document.createElement("DIV");e.className="dhxtoolbar_text";d.obj.appendChild(e)}e.innerHTML=f};this._getItemText=function(d){var e=this._getObj(d.obj,"div");if(e!=null){return e.innerHTML}return""};this._enableItem=function(e){if(e.state){return}e.state=true;if(this.objPull[e.id]["type"]=="buttonTwoState"&&this.objPull[e.id]["obj"]["pressed"]==true){e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}else{e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";e.obj.renderAs=e.obj.className}if(e.arw){e.arw.className=String(e.obj.className).replace("btn","arw")}var d=this._getObj(e.obj,(this.conf.icons_css?"i":"img"));if(e.imgEn!=""){if(d==null){d=this._addImgObj(e.obj)}d[this.conf.icons_css?"className":"src"]=this.conf.icons_path+e.imgEn}else{if(d!=null){d.parentNode.removeChild(d)}}};this._disableItem=function(e){if(!e.state){return}e.state=false;e.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.objPull[e.id]["type"]=="buttonTwoState"&&e.obj.pressed?"pres_":"")+"dis";e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";if(e.arw){e.arw.className=String(e.obj.className).replace("btn","arw")}var d=this._getObj(e.obj,(this.conf.icons_css?"i":"img"));if(e.imgDis!=""){if(d==null){d=this._addImgObj(e.obj)}d[this.conf.icons_css?"className":"src"]=this.conf.icons_path+e.imgDis}else{if(d!=null){d.parentNode.removeChild(d)}}if(e.polygon!=null){if(e.polygon.style.display!="none"){window.dhx4.zim.clear(e.polygon._idd);e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none"}if(this.conf.skin=="dhx_terrace"){this._improveTerraceButtonSelect(e.id,true)}this.callEvent("onButtonSelectHide",[e.obj.idd])}}this.anyUsed=null};this.clearAll=function(){for(var d in this.objPull){this._removeItem(String(d).replace(this.idPrefix,""))}this._spacer=null};this._doOnClick=function(d){if(a&&a.forEachItem){a.forEachItem(function(f){if(a.objPull[a.idPrefix+f].type=="buttonSelect"){var e=a.objPull[a.idPrefix+f];if(e.arw._skip===true){e.arw._skip=false}else{if(e.polygon.style.display!="none"){e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";e.obj.className=e.obj.renderAs;e.arw.className=String(e.obj.renderAs).replace("btn","arw");a.anyUsed=null;a.conf.touch_id=null;window.dhx4.zim.clear(e.polygon._idd);e.polygon.style.display="none";if(e.polygon._ie6cover){e.polygon._ie6cover.style.display="none"}if(a.conf.skin=="dhx_terrace"){a._improveTerraceButtonSelect(e.id,true)}a.callEvent("onButtonSelectHide",[e.obj.idd])}}}})}};if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousedown",this._doOnClick,false);window.addEventListener("touchstart",this._doOnClick,false)}else{document.body.attachEvent("onmousedown",this._doOnClick)}if(this.conf.icons_size_autoload!=null){this.setIconSize(this.conf.icons_size_autoload);this.conf.icons_size_autoload=null}if(this.conf.items_autoload!=null){this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload);this.conf.items_autoload=null}else{if(this.conf.json_autoload!=null){this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload);this.conf.json_autoload=null}else{if(this.conf.xml_autoload!=null){this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload);this.conf.xml_autoload=null}}}if(this.conf.align_autostart!=this.conf.align){this.setAlign(this.conf.align_autostart);this.conf.align_autostart=null}if(typeof(this.conf.auto_onclick)=="function"){this.attachEvent("onClick",this.conf.auto_onclick)}else{if(typeof(this.conf.auto_onclick)=="string"&&typeof(window[this.conf.auto_onclick])=="function"){this.attachEvent("onClick",window[this.conf.auto_onclick])}}return this}dhtmlXToolbarObject.prototype.addSpacer=function(c){var b=this.idPrefix+c;if(this._spacer!=null){if(this._spacer.idd==c){return}if(this._spacer==this.objPull[b].obj.parentNode){var a=true;while(a){var g=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(g==c||this._spacer.childNodes.length==0){if(this.objPull[b].arw!=null){this.base.appendChild(this.objPull[b].arw)}a=false}}this._spacer.idd=c;this._fixSpacer();return}if(this.base==this.objPull[b].obj.parentNode){var a=true;var f=(this.objPull[b].arw!=null);while(a){var d=this.base.childNodes.length-1;if(f==true){if(this.base.childNodes[d]==this.objPull[b].arw){a=false}}if(this.base.childNodes[d].idd==c){a=false}if(a){if(this._spacer.childNodes.length>0){this._spacer.insertBefore(this.base.childNodes[d],this._spacer.childNodes[0])}else{this._spacer.appendChild(this.base.childNodes[d])}}}this._spacer.idd=c;this._fixSpacer();return}}else{var e=null;for(var d=0;d<this.base.childNodes.length;d++){if(this.base.childNodes[d]==this.objPull[this.idPrefix+c].obj){e=d;if(this.objPull[this.idPrefix+c].arw!=null){e=d+1}}}if(e!=null){this._spacer=document.createElement("DIV");this._spacer.className=(this.conf.align=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right");this._spacer.dir="ltr";this._spacer.idd=c;while(this.base.childNodes.length>e+1){this._spacer.appendChild(this.base.childNodes[e+1])}this.cont.appendChild(this._spacer);this._fixSpacer()}}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(!this._spacer){return}while(this._spacer.childNodes.length>0){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof(window.addEventListener)=="undefined"&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var a=this._spacer;window.setTimeout(function(){a.style.borderLeft="0px solid #a4bed4";a=null},1)}};dhtmlXToolbarObject.prototype.getType=function(c){var d=this.getParentId(c);if(d!=null){var b=null;var a=this.objPull[this.idPrefix+d]._listOptions[c];if(a!=null){if(a.sep!=null){b="buttonSelectSeparator"}else{b="buttonSelectButton"}}return b}else{if(this.objPull[this.idPrefix+c]==null){return null}return this.objPull[this.idPrefix+c]["type"]}};dhtmlXToolbarObject.prototype.getTypeExt=function(b){var a=this.getType(b);if(a=="buttonSelectButton"||a=="buttonSelectSeparator"){if(a=="buttonSelectButton"){a="button"}else{a="separator"}return a}return null};dhtmlXToolbarObject.prototype.inArray=function(c,b){for(var a=0;a<c.length;a++){if(c[a]==b){return true}}return false};dhtmlXToolbarObject.prototype.getParentId=function(e){var f=null;for(var d in this.objPull){if(this.objPull[d]._listOptions){for(var c in this.objPull[d]._listOptions){if(c==e){f=String(d).replace(this.idPrefix,"")}}}}return f};dhtmlXToolbarObject.prototype._addItem=function(a,b){if(typeof(a.text)=="string"){a.text=window.dhx4.trim(a.text);if(a.text.length==0){a.text=null}}this._addItemToStorage(a,b);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.addButton=function(e,d,b,a,c){this._addItem({id:e,type:"button",text:b,img:a,imgdis:c},d)};dhtmlXToolbarObject.prototype.addText=function(c,b,a){this._addItem({id:c,type:"text",text:a},b)};dhtmlXToolbarObject.prototype.addButtonSelect=function(d,h,k,a,b,i,g,m,e,f){var l=[];for(var c=0;c<a.length;c++){var j={};if(a[c] instanceof Array){j.id=a[c][0];j.type=(a[c][1]=="obj"?"button":"separator");j.text=(a[c][2]||null);j.img=(a[c][3]||null)}else{if(a[c] instanceof Object&&a[c]!=null&&typeof(a[c].id)!="undefined"&&typeof(a[c].type)!="undefined"){j.id=a[c].id;j.type=(a[c].type=="obj"?"button":"separator");j.text=a[c].text;j.img=a[c].img}}l.push(j)}this._addItem({id:d,type:"buttonSelect",text:k,img:b,imgdis:i,renderSelect:g,openAll:m,options:l,maxOpen:e,mode:f},h)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(e,d,b,a,c){this._addItem({id:e,type:"buttonTwoState",img:a,imgdis:c,text:b},d)};dhtmlXToolbarObject.prototype.addSeparator=function(b,a){this._addItem({id:b,type:"separator"},a)};dhtmlXToolbarObject.prototype.addSlider=function(b,g,e,d,i,c,f,a,h){this._addItem({id:b,type:"slider",length:e,valueMin:d,valueMax:i,valueNow:c,textMin:f,textMax:a,toolTip:h},g)};dhtmlXToolbarObject.prototype.addInput=function(d,c,b,a){this._addItem({id:d,type:"buttonInput",value:b,width:a},c)};dhtmlXToolbarObject.prototype.forEachItem=function(c){for(var b in this.objPull){if(this.inArray(this.rootTypes,this.objPull[b]["type"])){c(this.objPull[b]["id"].replace(this.idPrefix,""))}}};(function(){var f="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(",");var c=[false,"","",false,"","","","","","","","","",false,"","","",null,"",[null,null],"",[null,null],"",null];var b=function(g,h){return function(k,j,i){k=this.idPrefix+k;if(this.objPull[k][g]!=null){return this.objPull[k][g].call(this.objPull[k],j,i)}else{return h}}};for(var e=0;e<f.length;e++){var a=f[e];var d=c[e];dhtmlXToolbarObject.prototype[a]=b(a,d)}})();dhtmlXToolbarObject.prototype.showItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].showItem!=null){this.objPull[a].showItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.hideItem=function(a){a=this.idPrefix+a;if(this.objPull[a]!=null&&this.objPull[a].hideItem!=null){this.objPull[a].hideItem();if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}}};dhtmlXToolbarObject.prototype.getPosition=function(a){return this._getPosition(a)};dhtmlXToolbarObject.prototype._getPosition=function(e,c){if(this.objPull[this.idPrefix+e]==null){return null}var d=null;var a=0;for(var b=0;b<this.base.childNodes.length;b++){if(this.base.childNodes[b].idd!=null){if(this.base.childNodes[b].idd==e){d=a}a++}}if(!d&&this._spacer!=null){for(var b=0;b<this._spacer.childNodes.length;b++){if(this._spacer.childNodes[b].idd!=null){if(this._spacer.childNodes[b].idd==e){d=a}a++}}}return d};dhtmlXToolbarObject.prototype.setPosition=function(a,b){this._setPosition(a,b)};dhtmlXToolbarObject.prototype._setPosition=function(e,d){if(this.objPull[this.idPrefix+e]==null){return}var a=null;if(this._spacer){a=this._spacer.idd;this.removeSpacer()}if(isNaN(d)){d=this.base.childNodes.length}if(d<0){d=0}var c=this.objPull[this.idPrefix+e];this.base.removeChild(c.obj);if(c.arw){this.base.removeChild(c.arw)}var b=this._getIdByPosition(d,true);if(b[0]==null){this.base.appendChild(c.obj);if(c.arw){this.base.appendChild(c.arw)}}else{this.base.insertBefore(c.obj,this.base.childNodes[b[1]]);if(c.arw){this.base.insertBefore(c.arw,this.base.childNodes[b[1]+1])}}if(a!=null){this.addSpacer(a)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(f,b){var e=null;var a=0;var c=0;for(var d=0;d<this.base.childNodes.length;d++){if(this.base.childNodes[d]["idd"]!=null&&e==null){if((a++)==f){e=this.base.childNodes[d]["idd"]}}if(e==null){c++}}c=(e==null?null:c);return(b==true?new Array(e,c):e)};dhtmlXToolbarObject.prototype.removeItem=function(a){this._removeItem(a);if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._removeItem=function(e){var c=this.getType(e);e=this.idPrefix+e;var d=this.objPull[e];if({button:1,buttonTwoState:1}[c]==1){if(window.dhx4.isIE){d.obj.onselectstart=null}this._evs.clear.apply(d,[d.obj.evs,d.obj]);for(var b in d.obj){if(typeof(d.obj[b])=="function"){d.obj[b]=null}}d.obj.parentNode.removeChild(d.obj);d.obj=null;for(var b in d){d[b]=null}}if(c=="buttonSelect"){for(var b in d._listOptions){this.removeListOption(e,b)}d._listOptions=null;if(d.polygon._ie6cover){document.body.removeChild(d.polygon._ie6cover);d.polygon._ie6cover=null}d.p_tbl.removeChild(d.p_tbody);d.polygon.removeChild(d.p_tbl);d.polygon.onselectstart=null;document.body.removeChild(d.polygon);if(window.dhx4.isIE){d.obj.onselectstart=null;d.arw.onselectstart=null}this._evs.clear.apply(d,[d.obj.evs,d.obj]);this._evs.clear.apply(d,[d.arw.evs,d.arw]);for(var b in d.obj){if(typeof(d.obj[b])=="function"){d.obj[b]=null}}d.obj.parentNode.removeChild(d.obj);d.obj=null;for(var b in d.arw){if(typeof(d.arw[b])=="function"){d.arw[b]=null}}d.arw.parentNode.removeChild(d.arw);d.arw=null;for(var b in d){d[b]=null}}if(c=="buttonInput"){d.obj.childNodes[0].onkeydown=null;d.obj.removeChild(d.obj.childNodes[0]);d.obj.w=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setItemToolTip=null;d.getItemToolTip=null;d.setWidth=null;d.getWidth=null;d.setValue=null;d.getValue=null;d.setItemText=null;d.getItemText=null}if(c=="slider"){if(window.dhx4.isIPad){document.removeEventListener("touchmove",pen._doOnMouseMoveStart,false);document.removeEventListener("touchend",pen._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",d.pen._doOnMouseMoveStart,false);window.removeEventListener("mouseup",d.pen._doOnMouseMoveEnd,false)}else{document.body.detachEvent("onmousemove",d.pen._doOnMouseMoveStart);document.body.detachEvent("onmouseup",d.pen._doOnMouseMoveEnd)}}d.pen.allowMove=null;d.pen.initXY=null;d.pen.maxX=null;d.pen.minX=null;d.pen.nowX=null;d.pen.newNowX=null;d.pen.valueMax=null;d.pen.valueMin=null;d.pen.valueNow=null;d.pen._definePos=null;d.pen._detectLimits=null;d.pen._doOnMouseMoveStart=null;d.pen._doOnMouseMoveEnd=null;d.pen.onmousedown=null;d.obj.removeChild(d.pen);d.pen=null;d.label.tip=null;document.body.removeChild(d.label);d.label=null;d.obj.onselectstart=null;d.obj.idd=null;while(d.obj.childNodes.length>0){d.obj.removeChild(d.obj.childNodes[0])}d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.state=null;d.enableItem=null;d.disableItem=null;d.isEnabled=null;d.setItemToolTipTemplate=null;d.getItemToolTipTemplate=null;d.setMaxValue=null;d.setMinValue=null;d.getMaxValue=null;d.getMinValue=null;d.setValue=null;d.getValue=null;d.showItem=null;d.hideItem=null;d.isVisible=null}if(c=="separator"){d.obj.onselectstart=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.showItem=null;d.hideItem=null;d.isVisible=null}if(c=="text"){d.obj.onselectstart=null;d.obj.idd=null;d.obj.parentNode.removeChild(d.obj);d.obj=null;d.id=null;d.type=null;d.showItem=null;d.hideItem=null;d.isVisible=null;d.setWidth=null;d.setItemText=null;d.getItemText=null}c=null;d=null;this.objPull[e]=null;delete this.objPull[e]};(function(){var d="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(",");var b=function(e){return function(k,g,f,j,i,h){k=this.idPrefix+k;if(this.objPull[k]==null){return}if(this.objPull[k]["type"]!="buttonSelect"){return}return this.objPull[k][e].call(this.objPull[k],g,f,j,i,h)}};for(var c=0;c<d.length;c++){var a=d[c];dhtmlXToolbarObject.prototype[a]=b(a)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(b,a){return b+a};dhtmlXToolbarObject.prototype._separatorObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}};this.obj.ontouchstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}d.cancelBubble=true;return false};a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};return this};dhtmlXToolbarObject.prototype._textObject=function(a,c,b){this.id=a.idPrefix+c;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=(b.hidden!=null?"none":"");this.obj.idd=String(c);this.obj.title=(b.title||"");this.obj.onselectstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}};this.obj.ontouchstart=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}d.cancelBubble=true;return false};this.obj.innerHTML=(b.text||"");a.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(d){this.obj.innerHTML=d};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(d){this.obj.style.width=d+"px"};this.setItemToolTip=function(d){this.obj.title=d};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(c,e,d){this.id=c.idPrefix+e;this.state=(d.enabled!=null?false:true);this.imgEn=(d.img||"");this.imgDis=(d.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(d.hidden!=null?"none":"");this.obj.allowClick=false;this.obj.extAction=(d.action||null);this.obj.renderAs=this.obj.className;this.obj.idd=String(e);this.obj.title=(d.title||"");this.obj.pressed=false;var a=(c.conf.icons_css?"<i class='"+c.conf.icons_path+this.img+"'></i>":"<img src='"+c.conf.icons_path+this.img+"'>");this.obj.innerHTML=c._rtlParseBtn((this.img!=""?a:""),(d.text!=null?"<div class='dhxtoolbar_text'>"+d.text+"</div>":""));c.base.appendChild(this.obj);if(window.dhx4.isIE){this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}}var b=this;this._doOnMouseOver=function(f){f=f||event;if(b.state==false||b.obj.pressed==true||b.obj.over==true){return}if(b.obj.className.match(/dhxtoolbar_btn_over/gi)==null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"}b.obj.over=true};this._doOnMouseOut=function(f){f=f||event;if(b.state==false){return}if(b.obj.className.match(/dhxtoolbar_btn_over/gi)!=null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"}b.obj.over=b.obj.pressed=false};this._doOnMouseDown=function(f){f=f||event;if(f.type=="touchstart"){if(f.preventDefault){f.preventDefault()}f.cancelBubble=true;if(c.conf.touch_id!=null&&c.conf.touch_id!=b.id){return}c.conf.touch_id=b.id}if(b.state==false){return}if(b.obj.className.match(/dhxtoolbar_btn_pres/gi)==null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"}b.obj.pressed=true};this._doOnMouseUp=function(f){f=f||event;if(f.type=="touchend"){if(f.preventDefault){f.preventDefault()}f.cancelBubble=true;if(c.conf.touch_id==b.id){c.conf.touch_id=null}}if(b.state==false||b.obj.pressed==false){return}if(b.obj.className.match(/dhxtoolbar_btn_pres/gi)!=null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(b.obj.over?"over":"def")}b.obj.pressed=false;if(b.obj.extAction){window.setTimeout(function(){try{if(b&&b.obj){window[b.obj.extAction](b.id)}}catch(g){}},1)}c.callEvent("onClick",[b.obj.idd.replace(c.idPrefix,"")])};this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};c._evs.add.apply(this,[this.obj.evs,this.obj]);this.enableItem=function(){c._enableItem(this)};this.disableItem=function(){c._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(f){c._setItemText(this,f)};this.getItemText=function(){return c._getItemText(this)};this.setItemImage=function(f){c._setItemImage(this,f,true)};this.clearItemImage=function(){c._clearItemImage(this,true)};this.setItemImageDis=function(f){c._setItemImage(this,f,false)};this.clearItemImageDis=function(){c._clearItemImage(this,false)};this.setItemToolTip=function(f){this.obj.title=f};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(d,g,f){this.id=d.idPrefix+g;this.state=(f.enabled!=null?(f.enabled=="true"?true:false):true);this.imgEn=(f.img||"");this.imgDis=(f.imgdis||"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.mode=(f.mode||"button");if(this.mode=="select"){this.openAll=true;this.renderSelect=false;if(!f.text||f.text.length==0){f.text="&nbsp;"}}else{this.openAll=(window.dhx4.s2b(f.openAll)==true);this.renderSelect=(f.renderSelect==null?true:window.dhx4.s2b(f.renderSelect))}this.maxOpen=(!isNaN(f.maxOpen?f.maxOpen:"")?f.maxOpen:null);this._maxOpenTest=function(){if(!isNaN(this.maxOpen)){if(!d._sbw){var i=document.createElement("DIV");i.className="dhxtoolbar_maxopen_test";document.body.appendChild(i);var h=document.createElement("DIV");h.className="dhxtoolbar_maxopen_test2";i.appendChild(h);d._sbw=i.offsetWidth-h.offsetWidth;i.removeChild(h);h=null;document.body.removeChild(i);i=null}}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=false;this.obj.extAction=(f.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(f.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};this.obj.idd=String(g);this.obj.title=(f.title||"");this.obj.pressed=false;this.callEvent=false;var b=(d.conf.icons_css?"<i class='"+d.conf.icons_path+this.img+"'></i>":"<img src='"+d.conf.icons_path+this.img+"'>");this.obj.innerHTML=d._rtlParseBtn((this.img!=""?b:""),(f.text!=null?"<div class='dhxtoolbar_text'>"+f.text+"</div>":""));d.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};d.base.appendChild(this.arw);var a=this;if(window.dhx4.isIE){this.arw.onselectstart=this.obj.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false}}this._doOnMouseOver=function(h){h=h||event;if(a.state==false||a.obj.over==true||d.anyUsed==a.obj.idd){return}if(a.obj.className.match(/dhxtoolbar_btn_over/gi)==null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"}a.obj.over=true};this._doOnMouseOut=function(h){h=h||event;if(a.state==false||d.anyUsed==a.obj.idd||d.anyUsed==a.obj.idd){return}if(a.obj.className.match(/dhxtoolbar_btn_over/gi)!=null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"}a.obj.over=a.obj.pressed=false};this._doOnMouseDown=function(i){i=i||event;if(i.type=="touchstart"){if(i.preventDefault){i.preventDefault()}i.cancelBubble=true;if(d.conf.touch_id!=null&&d.conf.touch_id!=a.id){return}d.conf.touch_id=a.id}if(a.state==false){return}if(d.anyUsed==a.obj.idd){if(a.obj.over==true){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"}else{a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"}a._hidePoly(true);d.anyUsed=null}else{var h=(i.target||i.srcElement);if(a.openAll==true||h==a.arw||h.parentNode==a.arw){if(i.type=="touchstart"){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"}a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres";a.arw._skip=true;a._showPoly(true);d.anyUsed=a.obj.idd}else{if(a.obj.className.match(/dhxtoolbar_btn_pres/gi)==null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres"}a.obj.pressed=true}}};this._doOnMouseUp=function(i){i=i||event;if(i.type=="touchend"){if(a.polygon.style.display==""){return}if(i.preventDefault){i.preventDefault()}i.cancelBubble=true;if(d.conf.touch_id==a.id){d.conf.touch_id=null}}if(a.state==false||a.obj.pressed==false){return}if(a.obj.className.match(/dhxtoolbar_btn_pres/gi)!=null){a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(a.obj.over?"over":"def");a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(a.obj.over?"over":"def")}if(this.extAction){var h=this;window.setTimeout(function(){try{window[h.extAction](g)}catch(j){}h=null},1)}d.callEvent("onClick",[a.obj.idd.replace(d.idPrefix,"")])};this.arw.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown"};d._evs.add.apply(this,[this.arw.evs,this.arw]);this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};d._evs.add.apply(this,[this.obj.evs,this.obj]);this._showPoly=function(o){if(d.anyUsed!=null){if(d.objPull[d.idPrefix+d.anyUsed].type=="buttonSelect"){var n=d.objPull[d.idPrefix+d.anyUsed];if(n.polygon.style.display!="none"){n.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";n.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def";n.obj.over=false;window.dhx4.zim.clear(n.polygon._idd);n.polygon.style.display="none";if(n.polygon._ie6cover){n.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(n.id,true)}d.callEvent("onButtonSelectHide",[n.obj.idd])}}}this.polygon.style.top="0px";this.polygon.style.visibility="hidden";this.polygon.style.zIndex=window.dhx4.zim.reserve(this.polygon._idd);this.polygon.style.display="";if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(this.id,false)}this._fixMaxOpenHeight(this.maxOpen||null);d._autoDetectVisibleArea();var j=window.dhx4.absTop(this.obj)+this.obj.offsetHeight+d.conf.sel_ofs_y;var l=this.polygon.offsetHeight;if(j+l>d.tY2){var h=(this.maxOpen!=null?Math.floor((d.tY2-j)/22):0);if(h>=1){this._fixMaxOpenHeight(h)}else{j=window.dhx4.absTop(this.obj)-l-d.conf.sel_ofs_y;if(j<0){j=0}}}this.polygon.style.top=j+"px";if(d.rtl){this.polygon.style.left=window.dhx4.absLeft(this.obj)+this.obj.offsetWidth-this.polygon.offsetWidth+d.conf.sel_ofs_x+"px"}else{var k=document.body.scrollLeft;var i=k+(window.innerWidth||document.body.clientWidth);var m=window.dhx4.absLeft(this.obj)+d.conf.sel_ofs_x;if(m+this.polygon.offsetWidth>i){m=window.dhx4.absLeft(this.arw)+this.arw.offsetWidth-this.polygon.offsetWidth}this.polygon.style.left=Math.max(m,5)+"px"}this.polygon.style.visibility="visible";if(this.polygon._ie6cover){this.polygon._ie6cover.style.left=this.polygon.style.left;this.polygon._ie6cover.style.top=this.polygon.style.top;this.polygon._ie6cover.style.width=this.polygon.offsetWidth+"px";this.polygon._ie6cover.style.height=this.polygon.offsetHeight+"px";this.polygon._ie6cover.style.display=""}if(o){d.callEvent("onButtonSelectShow",[this.obj.idd])}};this._hidePoly=function(h){window.dhx4.zim.clear(this.polygon._idd);this.polygon.style.display="none";if(this.polygon._ie6cover){this.polygon._ie6cover.style.display="none"}if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(this.id,true)}if(h){d.callEvent("onButtonSelectHide",[this.obj.idd])}d.conf.touch_id=null};this.obj.iddPrefix=d.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(m){var l="auto";var k=false;if(m!==null){var j=0;for(var i in this._listOptions){j++}if(j>m){this._ph=22*m;l=this._ph+"px"}else{k=true}}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!k&&a.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+d._sbw+"px";this.polygon.style.height=l}};this._separatorButtonSelectObject=function(j,h,i){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(k){k=k||event;if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}return false};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(k){k=k||event;if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}return false};if(isNaN(i)){i=a.p_tbody.childNodes.length+1}else{if(i<1){i=1}}if(i>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[i-1])}this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(k){k=k||event;if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}return false};this.obj.td.appendChild(this.obj.sep);a._listOptions[j]=this.obj;return this};this._buttonButtonSelectObject=function(l,j,k){var i=true;if(typeof(j.enabled)!="undefined"){i=window.dhx4.s2b(j.enabled)}else{if(typeof(j.disabled)!="undefined"){i=window.dhx4.s2b(j.disabled)}}this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=i;this.obj.tr.extAction=(j.action||null);this.obj.tr._selected=(j.selected!=null);this.obj.tr.className="tr_btn"+(this.obj.tr.en?(this.obj.tr._selected&&a.renderSelect?" tr_btn_selected":""):" tr_btn_disabled");this.obj.tr.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};this.obj.tr.idd=String(l);if(isNaN(k)){k=a.p_tbody.childNodes.length+1}else{if(k<1){k=1}}if(k>a.p_tbody.childNodes.length){a.p_tbody.appendChild(this.obj.tr)}else{a.p_tbody.insertBefore(this.obj.tr,a.p_tbody.childNodes[k-1])}this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(m){m=m||event;if(m.preventDefault){m.preventDefault()}else{m.returnValue=false}return false};if(d.rtl){this.obj.tr.appendChild(this.obj.td_b);this.obj.tr.appendChild(this.obj.td_a)}else{this.obj.tr.appendChild(this.obj.td_a);this.obj.tr.appendChild(this.obj.td_b)}if(j.img!=null){if(d.conf.icons_css==true){this.obj.td_a.innerHTML="<i class='"+d.conf.icons_path+j.img+"'></i>"}else{this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+d.conf.icons_path+j.img+"' border='0'>"}this.obj.tr._img=j.img}else{this.obj.td_a.innerHTML="&nbsp;"}var h=(j.text!=null?j.text:(j.itemText||""));this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+h+"</div>";this.obj.tr.onmouseover=function(m){m=m||event;if(m.type.match(/touch/)!=null){return}if(!this.en||(this._selected&&a.renderSelect)){return}this.className="tr_btn tr_btn_over"};this.obj.tr.onmouseout=function(m){m=m||event;if(m.type.match(/touch/)!=null){return}if(!this.en){return}if(this._selected&&a.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected"}}else{this.className="tr_btn"}};this.obj.tr.ontouchstart=this.obj.tr.onmousedown=function(m){m=m||event;if(this._etype==null){this._etype=m.type}};this.obj.tr.onclick=function(n){n=n||event;n.cancelBubble=true;if(!this.en){return}a.setListOptionSelected(this.idd.replace(d.idPrefix,""));a.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";a.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def";a.obj.over=false;if(this._etype!=null&&this._etype.match(/touch/)==null){window.dhx4.zim.clear(a.polygon._idd);a.polygon.style.display="none";if(a.polygon._ie6cover){a.polygon._ie6cover.style.display="none"}}else{var m=a.polygon;window.setTimeout(function(){window.dhx4.zim.clear(m._idd);m.style.display="none";m=null},500)}this._etype=null;if(d.conf.skin=="dhx_terrace"){d._improveTerraceButtonSelect(a.id,true)}d.anyUsed=null;d.conf.touch_id=null;d.callEvent("onButtonSelectHide",[a.obj.idd]);var o=this.idd.replace(d.idPrefix,"");if(this.extAction){try{window[this.extAction](o)}catch(n){}}d.callEvent("onClick",[o])};a._listOptions[l]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.className="dhx_toolbar_poly_"+d.conf.skin+" dhxtoolbar_icons_"+d.conf.iconSize+d.conf.cssShadow;this.polygon.onselectstart=function(h){h=h||event;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}};this.polygon.onmousedown=function(h){h=h||event;h.cancelBubble=true};this.polygon.style.overflowY="auto";this.polygon._idd=window.dhx4.newId();this.polygon.ontouchstart=function(h){h=h||event;h.cancelBubble=true};this.polygon.ontouchend=function(h){h=h||event;h.cancelBubble=true};this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(f.options!=null){for(var e=0;e<f.options.length;e++){var c="_"+(f.options[e].type||"")+"ButtonSelectObject";if(f.options[e].id==null){f.options[e].id=d._genStr(24)}if(typeof(this[c])=="function"){new this[c](f.options[e].id,f.options[e])}}}document.body.appendChild(this.polygon);if(window.dhx4.isIE6){this.polygon._ie6cover=document.createElement("IFRAME");this.polygon._ie6cover.frameBorder=0;this.polygon._ie6cover.style.position="absolute";this.polygon._ie6cover.style.border="none";this.polygon._ie6cover.style.backgroundColor="#000000";this.polygon._ie6cover.style.filter="alpha(opacity=100)";this.polygon._ie6cover.style.display="none";this.polygon._ie6cover.setAttribute("src","javascript:false;");document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(h){this.obj.style.width=h-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){d._enableItem(this)};this.disableItem=function(){d._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(h){d._setItemText(this,h)};this.getItemText=function(){return d._getItemText(this)};this.setItemImage=function(h){d._setItemImage(this,h,true)};this.clearItemImage=function(){d._clearItemImage(this,true)};this.setItemImageDis=function(h){d._setItemImage(this,h,false)};this.clearItemImageDis=function(){d._clearItemImage(this,false)};this.setItemToolTip=function(h){this.obj.title=h;this.arw.title=h};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(m,l,j,k,h){if(!(j=="button"||j=="separator")){return}var i={id:m,type:j,text:k,img:h};new this["_"+j+"ButtonSelectObject"](m,i,l)};this.removeListOption=function(j){if(!this._isListButton(j,true)){return}var h=this._listOptions[j];if(h.td_a!=null&&h.td_b!=null){h.td_a.onselectstart=null;h.td_b.onselectstart=null;while(h.td_a.childNodes.length>0){h.td_a.removeChild(h.td_a.childNodes[0])}while(h.td_b.childNodes.length>0){h.td_b.removeChild(h.td_b.childNodes[0])}h.tr.onselectstart=null;h.tr.onmouseover=null;h.tr.onmouseout=null;h.tr.onclick=null;h.tr.ontouchstart=null;h.tr.onmousedown=null;while(h.tr.childNodes.length>0){h.tr.removeChild(h.tr.childNodes[0])}h.tr.parentNode.removeChild(h.tr);h.td_a=null;h.td_b=null;h.tr=null}else{h.sep.onselectstart=null;h.td.onselectstart=null;h.tr.onselectstart=null;while(h.td.childNodes.length>0){h.td.removeChild(h.td.childNodes[0])}while(h.tr.childNodes.length>0){h.tr.removeChild(h.tr.childNodes[0])}h.tr.parentNode.removeChild(h.tr);h.sep=null;h.td=null;h.tr=null}h=null;this._listOptions[j]=null;try{delete this._listOptions[j]}catch(i){}};this.showListOption=function(h){if(!this._isListButton(h,true)){return}this._listOptions[h].tr.style.display=""};this.hideListOption=function(h){if(!this._isListButton(h,true)){return}this._listOptions[h].tr.style.display="none"};this.isListOptionVisible=function(h){if(!this._isListButton(h,true)){return}return(this._listOptions[h].tr.style.display!="none")};this.enableListOption=function(h){if(!this._isListButton(h)){return}this._listOptions[h].tr.en=true;this._listOptions[h].tr.className="tr_btn"+(this._listOptions[h].tr._selected&&d.renderSelect?" tr_btn_selected":"")};this.disableListOption=function(h){if(!this._isListButton(h)){return}this._listOptions[h].tr.en=false;this._listOptions[h].tr.className="tr_btn tr_btn_disabled"};this.isListOptionEnabled=function(h){if(!this._isListButton(h)){return}return this._listOptions[h].tr.en};this.setListOptionPosition=function(j,i){if(!this._listOptions[j]||this.getListOptionPosition(j)==i||isNaN(i)){return}if(i<1){i=1}var h=this._listOptions[j].tr;this.p_tbody.removeChild(h);if(i>this.p_tbody.childNodes.length){this.p_tbody.appendChild(h)}else{this.p_tbody.insertBefore(h,this.p_tbody.childNodes[i-1])}h=null};this.getListOptionPosition=function(j){var i=-1;if(!this._listOptions[j]){return i}for(var h=0;h<this.p_tbody.childNodes.length;h++){if(this.p_tbody.childNodes[h]==this._listOptions[j].tr){i=h+1}}return i};this.setListOptionImage=function(j,h){if(!this._isListButton(j)){return}var i=this._listOptions[j].tr.childNodes[(d.rtl?1:0)];i.innerHTML=(d.conf.icons_css?"<i class='"+d.conf.icons_path+h+"'></i>":"<img src='"+d.conf.icons_path+h+"' class='btn_sel_img'>");i=null};this.getListOptionImage=function(j){if(!this._isListButton(j)){return}var i=this._listOptions[j].tr.childNodes[(d.rtl?1:0)];var h=null;if(i.childNodes.length>0){h=i.childNodes[0][(d.conf.icons_css?"className":"src")]}i=null;return h};this.clearListOptionImage=function(i){if(!this._isListButton(i)){return}var h=this._listOptions[i].tr.childNodes[(d.rtl?1:0)];while(h.childNodes.length>0){h.removeChild(h.childNodes[0])}h.innerHTML="&nbsp;";h=null};this.setListOptionText=function(i,h){if(!this._isListButton(i)){return}this._listOptions[i].tr.childNodes[(d.rtl?0:1)].childNodes[0].innerHTML=h};this.getListOptionText=function(h){if(!this._isListButton(h)){return}return this._listOptions[h].tr.childNodes[(d.rtl?0:1)].childNodes[0].innerHTML};this.setListOptionToolTip=function(i,h){if(!this._isListButton(i)){return}this._listOptions[i].tr.title=h};this.getListOptionToolTip=function(h){if(!this._isListButton(h)){return}return this._listOptions[h].tr.title};this.forEachListOption=function(i){for(var h in this._listOptions){i(h)}};this.getAllListOptions=function(){var i=new Array();for(var h in this._listOptions){i[i.length]=h}return i};this.setListOptionSelected=function(j){for(var h in this._listOptions){var i=this._listOptions[h];if(i.td_a!=null&&i.td_b!=null&&i.tr.en){if(h==j){i.tr._selected=true;i.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"");if(this.mode=="select"){if(i.tr._img){this.setItemImage(i.tr._img)}else{this.clearItemImage()}this.setItemText(this.getListOptionText(j))}}else{i.tr._selected=false;i.tr.className="tr_btn"}}i=null}};this.getListOptionSelected=function(){var i=null;for(var h in this._listOptions){if(this._listOptions[h].tr._selected==true){i=h}}return i};this._isListButton=function(i,h){if(this._listOptions[i]==null){return false}if(!h&&this._listOptions[i].tr.className=="tr_sep"){return false}return true};this.setMaxOpen=function(h){this._ph=null;if(typeof(h)=="number"){this.maxOpen=h;this._maxOpenTest();return}this.maxOpen=null};if(f.width){this.setWidth(f.width)}if(this.mode=="select"&&typeof(f.selected)!="undefined"){this.setListOptionSelected(f.selected)}return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(c,e,d){this.id=c.idPrefix+e;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=(d.hidden!=null?"none":"");this.obj.idd=String(e);this.obj.w=(d.width!=null?d.width:100);this.obj.title=(d.title!=null?d.title:"");this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(d.value!=null?" value='"+d.value+"'":"")+">";var b=c;var a=this;this.obj.childNodes[0].onkeydown=function(f){f=f||event;if(f.keyCode==13){b.callEvent("onEnter",[a.obj.idd,this.value])}};c.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=false};this.disableItem=function(){this.obj.childNodes[0].disabled=true};this.isEnabled=function(){return(!this.obj.childNodes[0].disabled)};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display!="none")};this.setValue=function(f){this.obj.childNodes[0].value=f};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(f){this.obj.w=f;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(f){this.obj.title=f};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};if(typeof(d.enabled)!="undefined"&&window.dhx4.s2b(d.enabled)==false){this.disableItem()}return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(c,e,d){this.id=c.idPrefix+e;this.state=(d.enabled!=null?false:true);this.imgEn=(d.img!=null?d.img:"");this.imgDis=(d.imgdis!=null?d.imgdis:"");this.img=(this.state?(this.imgEn!=""?this.imgEn:""):(this.imgDis!=""?this.imgDis:""));this.obj=document.createElement("DIV");this.obj.pressed=(d.selected!=null);this.obj.extAction=(d.action||null);this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):(this.state?"def":"dis"));this.obj.style.display=(d.hidden!=null?"none":"");this.obj.renderAs=this.obj.className;this.obj.idd=String(e);this.obj.title=(d.title||"");if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"}var a=(c.conf.icons_css?"<i class='"+c.conf.icons_path+this.img+"'></i>":"<img src='"+c.conf.icons_path+this.img+"'>");this.obj.innerHTML=c._rtlParseBtn((this.img!=""?a:""),(d.text!=null?"<div class='dhxtoolbar_text'>"+d.text+"</div>":""));c.base.appendChild(this.obj);if(window.dhx4.isIE){this.obj.onselectstart=function(f){f=f||event;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}}var b=this;this._doOnMouseOver=function(f){f=f||event;if(b.state==false||b.obj.over==true){return}if(b.obj.pressed!=true&&b.obj.className.match(/dhxtoolbar_btn_over/gi)==null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"}b.obj.over=true};this._doOnMouseOut=function(f){f=f||event;if(b.state==false){return}if(b.obj.pressed!=true&&b.obj.className.match(/dhxtoolbar_btn_over/gi)!=null){b.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"}b.obj.over=false};this._doOnMouseDown=function(f){f=f||event;if(f.type=="touchstart"){if(f.preventDefault){f.preventDefault()}f.cancelBubble=true;if(c.conf.touch_id!=null&&c.conf.touch_id!=b.id){return}c.conf.touch_id=b.id}if(b.state==false){return}if(c.callEvent("onBeforeStateChange",[b.obj.idd.replace(c.idPrefix,""),b.obj.pressed])!==true){return}b.obj.pressed=!b.obj.pressed;b.obj.className="dhx_toolbar_btn "+(b.obj.pressed==true?"dhxtoolbar_btn_pres":(b.obj.over==true?"dhxtoolbar_btn_over":"dhxtoolbar_btn_def"));var g=b.obj.idd.replace(c.idPrefix,"");if(b.obj.extAction){try{window[b.obj.extAction](idd,b.obj.pressed)}catch(f){}}c.callEvent("onStateChange",[g,b.obj.pressed])};this._doOnMouseUp=function(f){f=f||event;if(f.type=="touchend"){if(f.preventDefault){f.preventDefault()}f.cancelBubble=true;if(c.conf.touch_id==b.id){c.conf.touch_id=null}}};this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"};c._evs.add.apply(this,[this.obj.evs,this.obj]);this.setItemState=function(f,h){if(this.obj.pressed!=f){if(f==true){this.obj.pressed=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis")}else{this.obj.pressed=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis")}if(h==true){var i=this.obj.idd.replace(c.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](i,this.obj.pressed)}catch(g){}}c.callEvent("onStateChange",[i,this.obj.pressed])}}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){c._enableItem(this)};this.disableItem=function(){c._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setItemText=function(f){c._setItemText(this,f)};this.getItemText=function(){return c._getItemText(this)};this.setItemImage=function(f){c._setItemImage(this,f,true)};this.clearItemImage=function(){c._clearItemImage(this,true)};this.setItemImageDis=function(f){c._setItemImage(this,f,false)};this.clearItemImageDis=function(){c._clearItemImage(this,false)};this.setItemToolTip=function(f){this.obj.title=f};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(d,f,e){this.id=d.idPrefix+f;this.state=(e.enabled!=null?(e.enabled=="true"?true:false):true);this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis");this.obj.style.display=(e.hidden!=null?"none":"");this.obj.onselectstart=function(g){g=g||event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}};this.obj.idd=String(f);this.obj.len=(e.length!=null?Number(e.length):50);this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(e.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(e.textMax||"")+"</div>";d.base.appendChild(this.obj);var a=this;this.pen=document.createElement("DIV");this.pen.className="dhxtoolbar_sl_pen";this.obj.appendChild(this.pen);var c=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+d.conf.skin+(d.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=(e.toolTip||"%v");this.label._zi=window.dhx4.newId();document.body.appendChild(this.label);var b=this.label;this.pen.valueMin=(e.valueMin!=null?Number(e.valueMin):0);this.pen.valueMax=(e.valueMax!=null?Number(e.valueMax):100);if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=(e.valueNow!=null?Number(e.valueNow):this.pen.valueMax);if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=a.obj.childNodes[1].offsetLeft+2;this.maxX=a.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=false;this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(g){if(a.state==false){return}g=g||event;this.initXY=(window.dhx4.isIPad?g.touches[0].clientX:g.clientX);this.newValueNow=this.valueNow;this.allowMove=true;this.className="dhxtoolbar_sl_pen dhxtoolbar_over";if(b.tip!=""){b.style.visibility="hidden";b.style.display="";b.innerHTML=b.tip.replace("%v",this.valueNow);b.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=window.dhx4.absTop(this)-b.offsetHeight-3+"px";b.style.visibility="";b.style.zIndex=window.dhx4.zim.reserve(b._zi)}};this.pen._doOnMouseMoveStart=function(h){h=h||event;if(!c.allowMove){return}var g=(window.dhx4.isIPad?h.touches[0].clientX:h.clientX);var i=g-c.initXY;if(g<window.dhx4.absLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.minX){return}if(g>window.dhx4.absLeft(c)+Math.round(c.offsetWidth/2)&&c.nowX==c.maxX){return}c.newNowX=c.nowX+i;if(c.newNowX<c.minX){c.newNowX=c.minX}if(c.newNowX>c.maxX){c.newNowX=c.maxX}c.nowX=c.newNowX;c.style.left=c.nowX+"px";c.initXY=g;c.newValueNow=Math.round((c.valueMax-c.valueMin)*(c.newNowX-c.minX)/(c.maxX-c.minX)+c.valueMin);if(b.tip!=""){b.innerHTML=b.tip.replace(/%v/gi,c.newValueNow);b.style.left=Math.round(window.dhx4.absLeft(c)+c.offsetWidth/2-b.offsetWidth/2)+"px";b.style.top=window.dhx4.absTop(c)-b.offsetHeight-3+"px"}h.cancelBubble=true;if(h.preventDefault){h.preventDefault()}else{h.returnValue=false}return false};this.pen._doOnMouseMoveEnd=function(){if(!c.allowMove){return}c.className="dhxtoolbar_sl_pen";c.allowMove=false;c.nowX=c.newNowX;c.valueNow=c.newValueNow;if(b.tip!=""){b.style.display="none";window.dhx4.zim.clear(b._zi)}d.callEvent("onValueChange",[a.obj.idd.replace(d.idPrefix,""),c.valueNow])};if(window.dhx4.isIPad){document.addEventListener("touchmove",c._doOnMouseMoveStart,false);document.addEventListener("touchend",c._doOnMouseMoveEnd,false)}else{if(typeof(window.addEventListener)!="undefined"){window.addEventListener("mousemove",c._doOnMouseMoveStart,false);window.addEventListener("mouseup",c._doOnMouseMoveEnd,false)}else{document.body.attachEvent("onmousemove",c._doOnMouseMoveStart);document.body.attachEvent("onmouseup",c._doOnMouseMoveEnd)}}this.enableItem=function(){if(this.state){return}this.state=true;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"};this.disableItem=function(){if(!this.state){return}this.state=false;this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis"};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return(this.obj.style.display=="")};this.setValue=function(g,h){g=Number(g);if(g<this.pen.valueMin){g=this.pen.valueMin}if(g>this.pen.valueMax){g=this.pen.valueMax}this.pen.valueNow=g;this.pen._definePos();if(h==true){d.callEvent("onValueChange",[this.obj.idd.replace(d.idPrefix,""),this.pen.valueNow])}};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(h,g){h=Number(h);if(h>this.pen.valueMax){return}this.obj.childNodes[0].innerHTML=g;this.obj.childNodes[0].style.display=(g.length>0?"":"none");this.pen.valueMin=h;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()};this.setMaxValue=function(h,g){h=Number(h);if(h<this.pen.valueMin){return}this.obj.childNodes[4].innerHTML=g;this.obj.childNodes[4].style.display=(g.length>0?"":"none");this.pen.valueMax=h;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()};this.getMinValue=function(){var g=this.obj.childNodes[0].innerHTML;var h=this.pen.valueMin;return new Array(h,g)};this.getMaxValue=function(){var g=this.obj.childNodes[4].innerHTML;var h=this.pen.valueMax;return new Array(h,g)};this.setItemToolTipTemplate=function(g){this.label.tip=g};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousedown",this._doOnClick,false);window.removeEventListener("touchstart",this._doOnClick,false)}else{document.body.detachEvent("onmousedown",this._doOnClick)}this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor();this._xmlLoader=null}while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.cont.removeChild(this.base);this.base=null;while(this.cont.childNodes.length>0){this.cont.removeChild(this.cont.childNodes[0])}this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.conf=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var a=window.dhx4.screenDim();this.tX1=a.left;this.tX2=a.right;this.tY1=a.top;this.tY2=a.bottom};dhtmlXToolbarObject.prototype.setIconset=function(a){this.conf.icons_css=(a=="awesome")};dhtmlXToolbarObject.prototype._evs={add:function(c,d){for(var b in c){if(typeof(window.addEventListener)=="function"){d.addEventListener(b,this[c[b]],false)}else{if(b.match(/^touch/)==null){d.attachEvent("on"+b,this[c[b]])}}}d=c=null},clear:function(c,d){for(var b in c){if(typeof(window.addEventListener)=="function"){d.removeEventListener(b,this[c[b]],false)}else{if(b.match(/^touch/)==null){d.detachEvent("on"+b,this[c[b]])}}}d=c=null}};dhtmlXToolbarObject.prototype._initObj=function(b){for(var a=0;a<b.length;a++){this._addItemToStorage(b[a])}if(this.conf.skin=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._xmlToJson=function(l){var i=[];var o=l.getElementsByTagName("toolbar");if(o!=null&&o[0]!=null){o=o[0];var m=function(h){var e=null;for(var k=0;k<h.childNodes.length;k++){if(e==null&&h.childNodes[k].tagName=="itemText"){e=window.dhx4._xmlNodeValue(h.childNodes[k]);break}}return e};var x=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"];var c=["id","type","enabled","disabled","action","selected","img","text"];for(var b=0;b<o.childNodes.length;b++){if(o.childNodes[b].tagName=="item"){var g={};for(var s=0;s<x.length;s++){var d=o.childNodes[b].getAttribute(x[s]);if(d!=null){g[x[s]]=d}}for(var n=0;n<o.childNodes[b].childNodes.length;n++){if(o.childNodes[b].childNodes[n].tagName=="item"&&g.type=="buttonSelect"){var v={};for(var s=0;s<c.length;s++){var d=o.childNodes[b].childNodes[n].getAttribute(c[s]);if(d!=null){v[c[s]]=d}}var j=o.childNodes[b].childNodes[n].getElementsByTagName("userdata");for(var s=0;s<j.length;s++){if(!v.userdata){v.userdata={}}var a={};try{a.name=j[s].getAttribute("name")}catch(f){a.name=null}try{a.value=j[s].firstChild.nodeValue}catch(f){a.value=""}if(a.name!=null){v.userdata[a.name]=a.value}}v.text=m(o.childNodes[b].childNodes[n])||v.text;if(g.options==null){g.options=[]}g.options.push(v)}if(o.childNodes[b].childNodes[n].tagName=="userdata"){if(g.userdata==null){g.userdata={}}var v={};try{v.name=o.childNodes[b].childNodes[n].getAttribute("name")}catch(f){v.name=null}try{v.value=o.childNodes[b].childNodes[n].firstChild.nodeValue}catch(f){v.value=""}if(v.name!=null){g.userdata[v.name]=v.value}}}g.text=m(o.childNodes[b])||g.text;i.push(g)}}m=null}return i};dhtmlXToolbarObject.prototype._addItemToStorage=function(f,h){var g=(f.id||this._genStr(24));var d=(f.type||"");if(d=="spacer"){this.addSpacer(this._lastId)}else{this._lastId=g}if(d!=""&&this["_"+d+"Object"]!=null){if(d=="buttonSelect"){if(f.options!=null){for(var e=0;e<f.options.length;e++){if(f.options[e].type=="obj"){f.options[e].type="button"}if(f.options[e].type=="sep"){f.options[e].type="separator"}}}}if(d=="slider"){var c={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var b in c){if(f[c[b]]==null&&f[b]!=null){f[c[b]]=f[b]}}}if(d=="buttonInput"){if(f.value==null&&f.text!=null){f.value=f.text}}if(d=="buttonTwoState"){if(typeof(f.selected)=="undefined"&&typeof(f.pressed)!="undefined"&&window.dhx4.s2b(f.pressed)){f.selected=true}}if(typeof(f.enabled)=="undefined"&&typeof(f.disabled)!="undefined"&&window.dhx4.s2b(f.disabled)){f.enabled=false}if(f.imgDis==null&&f.img_disabled!=null){f.imgdis=f.img_disabled}if((typeof(f.openAll)=="undefined"||f.openAll==null)&&this.conf.skin=="dhx_terrace"){f.openAll=true}this.objPull[this.idPrefix+g]=new this["_"+d+"Object"](this,g,f);this.objPull[this.idPrefix+g]["type"]=d;this.setPosition(g,h)}if(f.userdata!=null){for(var b in f.userdata){this.setUserData(g,b,f.userdata[b])}}if(f.options!=null){for(var e=0;e<f.options.length;e++){if(f.options[e].userdata!=null){for(var b in f.options[e].userdata){this.setListOptionUserData(f.id,f.options[e].id,b,f.options[e].userdata[b])}}}}};dhtmlXToolbarObject.prototype.setSkin=function(e,c){if(c===true){this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize)}else{this.conf.skin=e;if(this.conf.skin=="dhx_skyblue"){this.conf.sel_ofs_y=1}if(this.conf.skin=="dhx_web"){this.conf.sel_ofs_y=1;this.conf.sel_ofs_x=1}if(this.conf.skin=="dhx_terrace"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}if(this.conf.skin=="material"){this.conf.sel_ofs_y=-1;this.conf.sel_ofs_x=0}this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow}for(var b in this.objPull){var d=this.objPull[b];if(d.type=="slider"){d.pen._detectLimits();d.pen._definePos();d.label.className="dhx_toolbar_slider_label_"+this.conf.skin}if(d.type=="buttonSelect"){d.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow}}if(e=="dhx_terrace"){this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype.setAlign=function(a){this.conf.align=(a=="right"?"right":"left");this.base.className=(a=="right"?"dhxtoolbar_float_right":"dhxtoolbar_float_left");if(this._spacer){this._spacer.className=(a=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right")}};dhtmlXToolbarObject.prototype.setIconSize=function(a){this.conf.iconSize=({18:true,24:true,32:true,48:true}[a]?a:18);this.setSkin(this.conf.skin,true);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(a){this.conf.icons_path=a};dhtmlXToolbarObject.prototype.setUserData=function(c,a,b){c=this.idPrefix+c;if(this.objPull[c]!=null){if(this.objPull[c].userData==null){this.objPull[c].userData={}}this.objPull[c].userData[a]=b}};dhtmlXToolbarObject.prototype.getUserData=function(b,a){b=this.idPrefix+b;if(this.objPull[b]!=null&&this.objPull[b].userData!=null){return this.objPull[b].userData[a]||null}return null};dhtmlXToolbarObject.prototype._isListOptionExists=function(a,c){if(this.objPull[this.idPrefix+a]==null){return false}var b=this.objPull[this.idPrefix+a];if(b.type!="buttonSelect"){return false}if(b._listOptions[c]==null){return false}return true};dhtmlXToolbarObject.prototype.setListOptionUserData=function(a,e,b,d){if(!this._isListOptionExists(a,e)){return}var c=this.objPull[this.idPrefix+a]._listOptions[e];if(c.userData==null){c.userData={}}c.userData[b]=d};dhtmlXToolbarObject.prototype.getListOptionUserData=function(a,d,b){if(!this._isListOptionExists(a,d)){return null}var c=this.objPull[this.idPrefix+a]._listOptions[d];if(!c.userData){return null}return(c.userData[b]?c.userData[b]:null)};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){if(this.conf.terrace_radius==null){this.conf.terrace_radius="3px"}var c=[];var d={separator:true,text:true};var g=[this.base];if(this._spacer!=null){g.push(this._spacer)}for(var i=0;i<g.length;i++){c[i]=[];for(var b=0;b<g[i].childNodes.length;b++){if(g[i].childNodes[b].idd!=null&&g[i].childNodes[b].style.display!="none"){var h=this.idPrefix+g[i].childNodes[b].idd;if(this.objPull[h]!=null&&this.objPull[h].obj==g[i].childNodes[b]){c[i].push({a:h,type:this.objPull[h].type,node:this.objPull[h][this.objPull[h].type=="buttonSelect"?"arw":"obj"]})}}}g[i]=null}for(var i=0;i<c.length;i++){for(var b=0;b<c[i].length;b++){var j=c[i][b];var k=false;var f=false;if(!d[j.type]){if(b==c[i].length-1||(c[i][b+1]!=null&&d[c[i][b+1].type])){k=true}if(b==0||(b-1>=0&&c[i][b-1]!=null&&d[c[i][b-1].type])){f=true}}j.node.style.borderRightWidth=(k?"1px":"0px");j.node.style.borderTopRightRadius=j.node.style.borderBottomRightRadius=(k?this.conf.terrace_radius:"0px");if(j.type=="buttonSelect"){j.node.previousSibling.style.borderTopLeftRadius=j.node.previousSibling.style.borderBottomLeftRadius=(f?this.conf.terrace_radius:"0px");j.node.previousSibling._br=k;j.node.previousSibling._bl=f}else{j.node.style.borderTopLeftRadius=j.node.style.borderBottomLeftRadius=(f?this.conf.terrace_radius:"0px")}j.node._br=k;j.node._bl=f}}for(var i=0;i<c.length;i++){for(var b=0;b<c[i].length;b++){for(var h in c[i][b]){c[i][b][h]=null}c[i][b]=null}c[i]=null}c=g=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(c,b){var a=this.objPull[c];if(b==true){a.obj.style.borderBottomLeftRadius=(a.obj._bl?this.conf.terrace_radius:"0px");a.arw.style.borderBottomRightRadius=(a.obj._br?this.conf.terrace_radius:"0px")}else{a.obj.style.borderBottomLeftRadius="0px";a.arw.style.borderBottomRightRadius="0px"}a=null};if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype._createNode_toolbar=function(e,b,d,a,c){if(typeof(c)!="undefined"){e=c}else{e=document.createElement("DIV");e.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders");e.appendChild(document.createElement("DIV"));e.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"}this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cont]);this.conf.ofs_nodes.t.toolbar=true;this._updateIdx();return e};dhtmlXCellObject.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.callEvent("_onBeforeContentAttach",["toolbar"]);if(typeof(a)=="undefined"){a={}}else{if(typeof(a)=="string"){a={skin:a}}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=this._attachObject("toolbar").firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this._adjustCont(this._idd);this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()});a.parent=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataNodes.toolbar};dhtmlXCellObject.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;if(typeof(this.dataNodes.toolbar.unload)=="function"){this.dataNodes.toolbar.unload()}this.dataNodes.toolbar=null;delete this.dataNodes.toolbar;this._detachObject("toolbar")};dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")};dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")};dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar}}function dhtmlXEditor(c,d){var b=this;this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:false,toolbar:false,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click","touchend"],iOSfix:(navigator.userAgent.match(/Mobile/gi)!=null&&navigator.userAgent.match(/iPad/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null),extra_css:"",font:{family:"Tahoma",size:"12px",color:"black"}};this._doOnFocusChanged=null;this._doOnAccess=null;if(typeof(c)=="object"&&c!=null&&c.tagName==null){d=c.skin;if(c.content!=null){this.conf.content=c.content}if(c.contentHTML!=null){this.conf.contentHTML=c.contentHTML}if(c.iconsPath!=null){this.conf.iconsPath=c.iconsPath}if(c.extraCss!=null){this.conf.extra_css=c.extraCss}if(c.toolbar!=null){this.conf.toolbar=window.dhx4.s2b(c.toolbar)}if(c.onFocusChanged!=null){this._doOnFocusChanged=c.onFocusChanged}if(c.onAccess!=null){this._doOnAccess=c.onAccess}c=c.parent}this.conf.skin=(d||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"material");if(typeof(c)=="string"){c=document.getElementById(c)}this.base=c;this.base.className+=" dhxeditor_"+this.conf.skin;while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}var e=(window.dhx4.isIE?this.base.currentStyle.position:(window.getComputedStyle!=null?window.getComputedStyle(this.base,null).getPropertyValue("position"):""));if(!(e=="relative"||e=="absolute")){this.base.style.position="relative"}this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this);this.base.appendChild(this.cell.cell);this.cBlock=document.createElement("DIV");this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe";this.editor.frameBorder=0;if(window.dhx4.isOpera){this.editor.scrolling="yes"}this.setSizes();var a=this.editor;if(typeof(window.addEventListener)!="undefined"){a.onload=function(){for(var f=0;f<b.conf.evs.length;f++){a.contentWindow.addEventListener(b.conf.evs[f],b._ev,false)}}}else{a.onreadystatechange=function(f){if(typeof(a.readyState)!="undefined"&&a.readyState=="complete"){try{for(var g=0;g<b.conf.evs.length;g++){a.contentWindow.document.body.attachEvent("on"+b.conf.evs[g],b._ev)}}catch(h){}}}}this._ev=function(g){g=g||event;var f=g.type;if(b.conf.iOSfix==true&&f=="touchend"){b.editor.contentWindow.focus();return}b.callEvent("onAccess",[f,g]);if(typeof(b._doOnAccess)=="function"){b._doOnAccess(f,g)}else{if(typeof(b._doOnAccess)=="string"&&typeof(window[b._doOnAccess])=="function"){window[b._doOnAccess](f,g)}}};this._focus=function(){if(window.dhx4.isIE){this.editor.contentWindow.document.body.focus()}else{this.editor.contentWindow.focus()}};this.cell.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(h,j){var g="";if(h===true&&this.getContent!=null){g=this.getContent()}var f=this.editor.contentWindow.document;f.open("text/html","replace");if(window.dhx4.isOpera){f.write("<html><head>"+this.conf.extra_css+"<style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isKHTML){f.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{if(window.dhx4.isIE){f.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; background-color: #ffffff; outline: none; "+this._fontConf()+"} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}else{f.write("<html><head>"+this.conf.extra_css+"<style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(j!==true?"contenteditable='true'":"")+" tabindex='0'></body></html>")}}}f.close();if(window.dhx4.isIE){f.contentEditable=(j!==true)}else{f.designMode=(j!==true?"On":"Off")}if(window.dhx4.isFF){try{f.execCommand("useCSS",false,true)}catch(i){}}if(h===true&&this.setContent!=null){this.setContent(g)}};this._prepareContent();this._doOnResize=function(){window.clearTimeout(b.conf.resizeTM);b.conf.resizeTM=window.setTimeout(function(){if(b.setSizes){b.setSizes()}},b.conf.resizeTMTime)};this._runCommand=function(h,j){if(this.conf.roMode===true){return}if(arguments.length<2){j=null}if(window.dhx4.isIE){this.edWin.focus()}try{var g=this.editor.contentWindow.document;g.execCommand(h,false,j)}catch(i){}if(window.dhx4.isIE){this.edWin.focus();var f=this;window.setTimeout(function(){f.edWin.focus();f=null},1)}};this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.clearFormatting=function(){this._runCommand("RemoveFormat");var f=this.getContent();f=f.replace(/<\/?h\d>/gi,"");this.setContent(f)};this._doOnClick=function(h){var g=h||window.event;var f=g.target||g.srcElement;b._showInfo(f)};this._doOnMouseDown=function(h){var g=h||window.event;var f=g.target||g.srcElement;b._showInfo(f)};this._doOnKeyUp=function(i){var h=i||window.event;var f=h.keyCode;var g=h.target||h.srcElement;if({37:1,38:1,39:1,40:1,13:1}[f]==1){b._showInfo(g)}};this._getParentByTag=function(f,h){h=h.toLowerCase();var g=f;do{if(h==""||g.nodeName.toLowerCase()==h){return g}}while(g=g.parentNode);return f};this._isStyleProperty=function(g,i,f,h){i=i.toLowerCase();var j=g;do{if((j.nodeName.toLowerCase()==i)&&(j.style[f]==h)){return true}}while(j=j.parentNode);return false};this._setStyleProperty=function(f,h){this.style[h]=false;var g=this._getParentByTag(f,h);if(g&&(g.tagName.toLowerCase()==h)){this.style[h]=true}if(h=="del"&&this._getParentByTag(f,"strike")&&this._getParentByTag(f,"strike").tagName.toLowerCase()=="strike"){this.style.del=true}};this._showInfo=function(g){var g=(this._getSelectionBounds().end)?this._getSelectionBounds().end:g;if(!g||!this._setStyleProperty){return}try{if(this.edWin.getComputedStyle){var f=this.edWin.getComputedStyle(g,null);var h=((f.getPropertyValue("font-weight")==401)?700:f.getPropertyValue("font-weight"));this.style={fontStyle:f.getPropertyValue("font-style"),fontSize:f.getPropertyValue("font-size"),textDecoration:f.getPropertyValue("text-decoration"),fontWeight:h,fontFamily:f.getPropertyValue("font-family"),textAlign:f.getPropertyValue("text-align")};if(window.dhx4.isKHTML){this.style.fontStyle=f.getPropertyValue("font-style");this.style.vAlign=f.getPropertyValue("vertical-align");this.style.del=this._isStyleProperty(g,"span","textDecoration","line-through");this.style.u=this._isStyleProperty(g,"span","textDecoration","underline")}}else{var f=g.currentStyle;this.style={fontStyle:f.fontStyle,fontSize:f.fontSize,textDecoration:f.textDecoration,fontWeight:f.fontWeight,fontFamily:f.fontFamily,textAlign:f.textAlign}}this._setStyleProperty(g,"h1");this._setStyleProperty(g,"h2");this._setStyleProperty(g,"h3");this._setStyleProperty(g,"h4");if(!window.dhx4.isKHTML){this._setStyleProperty(g,"del");this._setStyleProperty(g,"sub");this._setStyleProperty(g,"sup");this._setStyleProperty(g,"u")}this.callEvent("onFocusChanged",[this.style,f])}catch(i){return null}};this._getSelectionBounds=function(){var j,h,l,g;if(this.edWin.getSelection){var k=this.edWin.getSelection();if(window.dhx4.isEdge&&k.rangeCount==0){return{root:null,start:null,end:null}}j=k.getRangeAt(k.rangeCount-1);l=j.startContainer;g=j.endContainer;h=j.commonAncestorContainer;if(l.nodeName=="#text"){h=h.parentNode}if(l.nodeName=="#text"){l=l.parentNode}if(l.nodeName.toLowerCase()=="body"){l=l.firstChild}if(g.nodeName=="#text"){g=g.parentNode}if(g.nodeName.toLowerCase()=="body"){g=g.lastChild}if(l==g){h=l}return{root:h,start:l,end:g}}else{if(this.edWin.document.selection){j=this.edDoc.selection.createRange();if(!j.duplicate){return null}h=j.parentElement();var i=j.duplicate();var f=j.duplicate();i.collapse(true);f.moveToElementText(i.parentElement());f.setEndPoint("EndToStart",i);l=i.parentElement();i=j.duplicate();f=j.duplicate();f.collapse(false);i.moveToElementText(f.parentElement());i.setEndPoint("StartToEnd",f);g=f.parentElement();if(l.nodeName.toLowerCase()=="body"){l=l.firstChild}if(g.nodeName.toLowerCase()=="body"){g=g.lastChild}if(l==g){h=l}return{root:h,start:l,end:g}}}return null};this.getContent=function(){if(!this.edDoc.body){return""}else{if(window.dhx4.isFF||window.dhx4.isChrome){return this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,"")}if(window.dhx4.isIE&&this.edDoc.body.innerText.length==0){return""}return this.edDoc.body.innerHTML}};this.setContent=function(h){h=h||"";if(this.edDoc.body){var g=false;if(window.dhx4.isFF){var f=navigator.userAgent.match(/Firefox\/(\d*)/);g=(f!=null&&f[1]<28)}if(g){if(typeof(this.conf.ffTest)=="undefined"){this.editor.contentWindow.document.body.innerHTML="";this._runCommand("InsertHTML","test");this.conf.ffTest=(this.editor.contentWindow.document.body.innerHTML.length>0)}if(this.conf.ffTest){this.editor.contentWindow.document.body.innerHTML=h}else{this.editor.contentWindow.document.body.innerHTML="";if(h.length==0){h=" "}this._runCommand("InsertHTML",h)}}else{this.editor.contentWindow.document.body.innerHTML=h}this.callEvent("onContentSet",[])}else{if(!this.conf.firstLoadEv){this.conf.firstLoadEv=true;this.conf.firstLoadData=h;this._onFirstLoad=function(){b.setContent(b.conf.firstLoadData);if(typeof(window.addEventListener)=="function"){b.edWin.removeEventListener("load",b._onFirstLoad,false)}else{b.edWin.detachEvent("onload",b._onFirstLoad)}b.conf.firstLoadData=null;b.conf.firstLoadEv=false;b._onFirstLoad=null};if(typeof(window.addEventListener)=="function"){this.edWin.addEventListener("load",this._onFirstLoad,false)}else{this.edWin.attachEvent("onload",this._onFirstLoad)}}}};this.setContentHTML=function(f){window.dhx4.ajax.get(f,function(g){if(g.xmlDoc.responseText!=null){b.setContent(g.xmlDoc.responseText)}})};window.dhx4._eventable(this);this.attachEvent("onFocusChanged",function(f){if(typeof(this._doOnFocusChanged)=="function"){this._doOnFocusChanged(f)}else{if(typeof(this._doOnFocusChanged)=="string"&&typeof(window[this._doOnFocusChanged])=="function"){window[this._doOnFocusChanged](f)}}});if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResize,false);this.edDoc.addEventListener("click",this._doOnClick,false);this.edDoc.addEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.addEventListener("mousedown",this._doOnMouseDown,false)}}else{window.attachEvent("onresize",this._doOnResize);this.edDoc.attachEvent("onclick",this._doOnClick);this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)}this.unload=function(){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResize,false);this.edDoc.removeEventListener("click",this._doOnClick,false);this.edDoc.removeEventListener("keyup",this._doOnKeyUp,false);if(window.dhx4.isOpera){this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,false)}for(var f=0;f<b.conf.evs.length;f++){a.contentWindow.removeEventListener(b.conf.evs[f],b._ev,false)}if(this.tb!=null&&this.conf.iOSfix==true){this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,false);this._doOnIOSFix=null}}else{window.detachEvent("onresize",this._doOnResize,false);this.edDoc.detachEvent("onclick",this._doOnClick);this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var f=0;f<b.conf.evs.length;f++){a.contentWindow.document.body.detachEvent("on"+b.conf.evs[f],b._ev)}}this._doOnAccess=null;this._doOnFocusChanged=null;if(typeof(window.addEventListener)=="function"){this.editor.onload=null}else{this.editor.onreadystatechange=null}this.editor.parentNode.removeChild(this.editor);this.editor=null;this.edDoc=null;this.edWin=null;this.cell._unload();this.cell=null;this.tb=null;window.dhx4._eventable(this,"clear");this.cBlock.parentNode.removeChild(this.cBlock);this.cBlock=null;this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.setContentHTML=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;b=a=null};if(this.conf.toolbar==true&&typeof(this.attachToolbar)=="function"&&typeof(window.dhtmlXToolbarObject)=="function"){this.attachToolbar(this.conf.iconsPath);if(this.conf.iOSfix==true){this._doOnIOSFix=function(){b.editor.contentWindow.focus()};this.tb.cont.addEventListener("touchend",this._doOnIOSFix,false)}}this.setIconsPath=function(f){this.conf.iconsPath=f};if(this.conf.content.length>0){this.setContent(this.conf.content);this.conf.content=""}else{if(this.conf.contentHTML.length>0){this.setContentHTML(this.conf.contentHTML);this.conf.contentHTML=""}}return this}dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight);if(this.editor!=null){this.editor.style.left="5px";this.editor.style.width=this.base.clientWidth-5+"px"}};dhtmlXEditor.prototype.setReadonly=function(a){this.conf.roMode=(a===true);this._prepareContent(true,this.conf.roMode);this.cBlock.style.display=(this.conf.roMode?"":"none")};dhtmlXEditor.prototype.isReadonly=function(a){return(this.conf.roMode||false)};dhtmlXEditor.prototype.setSkin=function(a){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+a);this.conf.skin=this.cell.conf.skin=a;if(this.tb){this.cell.detachToolbar(a);this.tb=null;this.attachToolbar()}this.setSizes()};dhtmlXEditor.prototype._fontConf=function(){if(this.conf.skin==""){var a={family:this.conf.font.family,size:this.conf.font.size,color:this.conf.font.color}}else{var a={family:"Roboto, Arial, Helvetica",size:"14px",color:"#404040"}}return window.dhx4.template("font-size: #size#; font-family: #family#; color: #color#;",a)};window.dhtmlXEditorCell=function(c,a){dhtmlXCellObject.apply(this,[c,"_editor"]);var b=this;this.editor=a;this.conf.skin=this.editor.conf.skin;this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null;b=null});this._stbInit();return this};dhtmlXEditorCell.prototype=new dhtmlXCellObject();dhtmlXEditorCell.prototype._stbInit=function(){var g=this;var f=document.createElement("DIV");f.className="dhx_cell_stb"+(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_cell_stb_shadow");this.cell.insertBefore(f,this.cell.childNodes[this.conf.idx.cont]);f.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var e={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var c in e){var b=document.createElement("A");b.href="javascript:void(0);";b.tabIndex=-1;f.appendChild(b);b.onmousedown=b.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};var h=document.createElement("DIV");h.className="dhx_cell_stb_button btn_"+c;h._actv=c.charAt(0);h._cmd=e[c];b.appendChild(h);h.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};h.onmousedown=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}g.editor[this._cmd]();g.editor.callEvent("onToolbarClick",[this._actv])};h=b=null}f=null;this._stbUnload=function(){var a=this.cell.childNodes[this.conf.idx.stb];a.onselectstart=null;while(a.childNodes.length>0){a.lastChild.onmousedown=a.lastChild.onclick=null;a.lastChild.firstChild.onmousedown=a.lastChild.firstChild.onclick=null;a.lastChild.firstChild._actv=a.lastChild.firstChild._cmd=null;a.lastChild.removeChild(a.lastChild.firstChild);a.removeChild(a.lastChild)}a.parentNode.removeChild(a);a=g=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;delete this.conf.idx_data.stb;this._updateIdx()};this.conf.stb_visible=true;this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none";this.conf.stb_visible=false};dhtmlXEditorCell.prototype._getStbHeight=function(){if(this.conf.stb_visible==true&&this.conf.skin=="material"){if(this.conf.stb_height==null){this.conf.stb_height=window.dhx4.readFromCss("dhxeditor_material stb_height_detect","scrollHeight","<div class='dhx_cell_editor'><div class='dhx_cell_stb'></div></div>")}return this.conf.stb_height}return this.cell.childNodes[this.conf.idx.stb].offsetHeight};dhtmlXCellObject.prototype.attachEditor=function(a){this.callEvent("_onBeforeContentAttach",["editor"]);var c=document.createElement("DIV");c.style.width="100%";c.style.height="100%";c.style.position="relative";c.style.overflow="hidden";this._attachObject(c);if(!(typeof(a)=="object"&&a!=null)){a={}}a.parent=c;this.dataType="editor";this.dataObj=new dhtmlXEditor(a);c=null;a.parent=null;a=null;if(typeof(window.dhtmlXPortalCell)=="function"&&this instanceof window.dhtmlXPortalCell){if(this.portal.conf.editor_ev==null){var d=this.portal.attachEvent("onBeforeDrag",function(e){if(this.cdata[e].dataType=="editor"){this.cdata[e].conf.editor_cont=this.cdata[e].dataObj.getContent()}return true});var b=this.portal.attachEvent("onDrop",function(e){if(this.cdata[e].dataType=="editor"){this.cdata[e].dataObj.setContent(this.cdata[e].conf.editor_cont);this.cdata[e].dataObj._prepareContent(true);this.cdata[e].conf.editor_cont=null}});this.portal.conf.editor_ev=[d,b]}this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){this.detachEvent(this.conf.editor_ev);this.conf.editor_ev=null;if(this instanceof window.dhtmlXPortalCell){var f=false;for(var e in this.portal.cdata){if(this.portal.cdata[e]!=this&&this.portal.cdata[e].dataType=="editor"){f=true}}if(f==false){for(var g=0;g<this.portal.conf.editor_ev.length;g++){this.portal.detachEvent(this.portal.conf.editor_ev[g])}this.portal.conf.editor_ev=null}}})}this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXEditor.prototype.attachToolbar=function(b){if(this.tb!=null){return}if(b!=null){this.conf.iconsPath=b}this.cell._stbHide();this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin});this.setSizes();var e=(this.conf.skin=="material"?"png":"gif");this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana");this._initFont=this._availFonts[0];this._xmlFonts="";for(var g=0;g<this._availFonts.length;g++){var d=String(this._availFonts[g]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+d+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(d).toLowerCase()+"."+e+'" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={"1":"8pt","2":"10pt","3":"12pt","4":"14pt","5":"18pt","6":"24pt","7":"36pt"};this._xmlSizes="";for(var c in this._availSizes){this._xmlSizes+='<item type="button" id="applyFontSize:'+c+":"+this._availSizes[c]+'" text="'+this._availSizes[c]+'"/>'}this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.'+e+'" imgdis="h4_dis.'+e+'" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.'+e+'" imgdis="h4_dis.'+e+'" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.'+e+'" imgdis="h4_dis.'+e+'" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.'+e+'" imgdis="h4_dis.'+e+'" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.'+e+'" imgdis="bold_dis.'+e+'" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.'+e+'" imgdis="italic_dis.'+e+'" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.'+e+'" imgdis="underline_dis.'+e+'" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.'+e+'" imgdis="strike_dis.'+e+'" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.'+e+'" imgdis="align_left_dis.'+e+'" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.'+e+'" imgdis="align_center_dis.'+e+'" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.'+e+'" imgdis="align_right_dis.'+e+'" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.'+e+'" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.'+e+'" imgdis="script_sub.'+e+'" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.'+e+'" imgdis="script_super_dis.'+e+'" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.'+e+'" imgdis="list_number_dis.'+e+'" title="Number List"/><item id="createBulList" type="button" img="list_bullet.'+e+'" imgdis="list_bullet_dis.'+e+'" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.'+e+'" imgdis="indent_inc_dis.'+e+'" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.'+e+'" imgdis="indent_dec_dis.'+e+'" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.'+e+'" title="Clear Formatting"/></toolbar>';this.tb.loadStruct(this.tbXML);this._checkAlign=function(a){this.tb.setItemState("alignCenter",false);this.tb.setItemState("alignRight",false);this.tb.setItemState("alignJustify",false);this.tb.setItemState("alignLeft",false);if(a){this.tb.setItemState(a,true)}};this._checkH=function(a){this.tb.setItemState("applyH1",false);this.tb.setItemState("applyH2",false);this.tb.setItemState("applyH3",false);this.tb.setItemState("applyH4",false);if(a){this.tb.setItemState(a,true)}};this._doOnFocusChanged=function(i){if(!i.h1&&!i.h2&&!i.h3&&!i.h4){var a=(String(i.fontWeight).search(/bold/i)!=-1)||(Number(i.fontWeight)>=700);this.tb.setItemState("applyBold",a)}else{this.tb.setItemState("applyBold",false)}var h="alignLeft";if(String(i.textAlign).search(/center/)!=-1){h="alignCenter"}if(String(i.textAlign).search(/right/)!=-1){h="alignRight"}if(String(i.textAlign).search(/justify/)!=-1){h="alignJustify"}this.tb.setItemState(h,true);this._checkAlign(h);this.tb.setItemState("applyH1",i.h1);this.tb.setItemState("applyH2",i.h2);this.tb.setItemState("applyH3",i.h3);this.tb.setItemState("applyH4",i.h4);if(window._KHTMLrv){i.sub=(i.vAlign=="sub");i.sup=(i.vAlign=="super")}this.tb.setItemState("applyItalic",(i.fontStyle=="italic"));this.tb.setItemState("applyStrikethrough",i.del);this.tb.setItemState("applySub",i.sub);this.tb.setItemState("applySuper",i.sup);this.tb.setItemState("applyUnderscore",i.u)};this._doOnToolbarClick=function(h){var a=String(h).split(":");if(this[a[0]]!=null){if(typeof(this[a[0]])=="function"){this[a[0]](a[1]);this.callEvent("onToolbarClick",[h])}}};this._doOnStateChange=function(h,a){this[h]();switch(h){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(h);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(h);break}this.callEvent("onToolbarClick",[h])};this._doOnBeforeStateChange=function(h,a){if((h=="alignLeft"||h=="alignCenter"||h=="alignRight"||h=="alignJustify")&&a==true){return false}return true};var f=this;this.tb.attachEvent("onClick",function(a){f._doOnToolbarClick(a)});this.tb.attachEvent("onStateChange",function(h,a){f._doOnStateChange(h,a)});this.tb.attachEvent("onBeforeStateChange",function(h,a){return f._doOnBeforeStateChange(h,a)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",false);this.tb.setItemState("applyItalic",false);this.tb.setItemState("applyStrikethrough",false);this.tb.setItemState("applySub",false);this.tb.setItemState("applySuper",false);this.tb.setItemState("applyUnderscore",false);var a=this.getContent();a=a.replace(/<\/?h\d>/gi,"");this.setContent(a)}};