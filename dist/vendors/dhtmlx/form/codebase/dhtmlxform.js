/*
Product Name: dhtmlxForm 
Version: 5.1.0 
Edition: Standard 
License: content of this file is covered by DHTMLX Commercial or enterpri. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx)=="undefined"){window.dhx=window.dhx4={version:"5.1.0",skin:null,skinDetect:function(a){var b=Math.floor(dhx4.readFromCss(a+"_skin_detect")/10)*10;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[b]||null},readFromCss:function(c,d,e){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}if(typeof(e)=="string"){b.innerHTML=e}var a=b[d||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var i=b.clientLeft||h.clientLeft||0;var j=g.top+a-f;var c=g.left+e-i;return{top:Math.round(j),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(d){if(this._isObj(d)){var c={};for(var b in d){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}else{var c=[];for(var b=0;b<d.length;b++){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(d,g,b){d=(typeof(d)=="string"?document.getElementById(d):d);var a=d.value.length;g=Math.max(Math.min(g,a),0);b=Math.min(b,a);if(d.setSelectionRange){try{d.setSelectionRange(g,b)}catch(f){}}else{if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);try{c.select()}catch(f){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var g=arguments[1];var f=window.dhx4.trim(arguments[3]);var h=null;var e=[c[g]];if(f.length>0){f=f.split(":");var d=[];for(var i=0;i<f.length;i++){if(i>0&&d[d.length-1].match(/\\$/)!=null){d[d.length-1]=d[d.length-1].replace(/\\$/,"")+":"+f[i]}else{d.push(f[i])}}h=d[0];for(var i=1;i<d.length;i++){e.push(d[i])}}if(typeof(h)=="string"&&typeof(window.dhx4.template[h])=="function"){return window.dhx4.template[h].apply(window.dhx4.template,e)}if(g.length>0&&typeof(c[g])!="undefined"){if(a==true){return window.dhx4.trim(c[g])}return String(c[g])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(d,e,c,a){var b=window.dhx4.template._parseFmt(e,c,a);if(b==false){return d}return window.dhx4.template._getFmtValue(d,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(h,c,a){var d=h.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(d==null||d.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(d[1])=="string"?d[1]:""),s_aft:(typeof(d[3])=="string"?d[3]:"")};var g=d[2].split(".");if(g[1]!=null){b.d_len=g[1].length}var e=g[0].split(",");if(e.length>1){b.i_len=e[e.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(f,d,a){if(d==null||typeof(d)=="undefined"){d=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefined"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(f instanceof Date){var e=function(g){return(String(g).length==1?"0"+String(g):g)};var b=function(i){switch(i){case"%d":return e(f.getDate());case"%j":return f.getDate();case"%D":return a.dayShortName[f.getDay()];case"%l":return a.dayFullName[f.getDay()];case"%m":return e(f.getMonth()+1);case"%n":return f.getMonth()+1;case"%M":return a.monthShortName[f.getMonth()];case"%F":return a.monthFullName[f.getMonth()];case"%y":return e(f.getYear()%100);case"%Y":return f.getFullYear();case"%g":return(f.getHours()+11)%12+1;case"%h":return e((f.getHours()+11)%12+1);case"%G":return f.getHours();case"%H":return e(f.getHours());case"%i":return e(f.getMinutes());case"%s":return e(f.getSeconds());case"%a":return(f.getHours()>11?"pm":"am");case"%A":return(f.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return f.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var l=f.getTimezoneOffset();var j=Math.abs(Math.floor(l/60));var g=Math.abs(l)-j*60;return(l>0?"-":"+")+e(j)+":"+e(g);default:return i}};var c=String(d||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(f))};window.dhx4.str2date=function(g,s,x){if(s==null||typeof(s)=="undefined"){s=window.dhx4.dateFormat[window.dhx4.dateLang]}if(x==null||typeof(x)=="undefined"){x=window.dhx4.dateStrings[window.dhx4.dateLang]}s=s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var u=[];var j=[];s=s.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":j.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":j.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":j.push(e);return"(\\d{1,2})";case"%Y":j.push(e);return"(\\d{4})";case"%a":j.push(e);return"([a|p]m)";case"%A":j.push(e);return"([A|P]M)";case"%u":j.push(e);return"(\\d{1,6})";case"%P":j.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var y=new RegExp(s,"i");var l=g.match(y);if(l==null||l.length-1!=j.length){return"Invalid Date"}for(var b=1;b<l.length;b++){u.push(l[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var m={};var i={};for(var b=0;b<j.length;b++){if(typeof(c[j[b]])!="undefined"){var d=c[j[b]];if(!m[d]){m[d]=[];i[d]=[]}m[d].push(u[b]);i[d].push(j[b])}}u=[];j=[];for(var b=1;b<=7;b++){if(m[b]!=null){for(var o=0;o<m[b].length;o++){u.push(m[b][o]);j.push(i[b][o])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var n=function(p,e){for(var f=0;f<e.length;f++){if(e[f].toLowerCase()==p){return f}}return -1};for(var b=0;b<u.length;b++){switch(j[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(u[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[j[b]]](Number(u[b])+(j[b]=="%m"||j[b]=="%n"?-1:0))}break;case"%M":case"%F":var h=n(u[b].toLowerCase(),x[{"%M":"monthShortName","%F":"monthFullName"}[j[b]]]);if(h>=0){a.setMonth(h)}break;case"%y":if(!isNaN(u[b])){var t=Number(u[b]);a.setFullYear(t+(t>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(u[b])){var t=Number(u[b]);if(t<=12&&t>=0){a.setHours(t+(n("pm",u)>=0?(t==12?0:12):(t==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=u[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,d,c){if(typeof d.status=="undefined"||d.status<400){xml=(!d.responseXML)?dhx4.ajax.parse(d.responseText||d):(d.responseXML||d);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(f){return[]}}else{var d=[];var g;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(g=b.iterateNext()){d.push(g)}return d}},query:function(a){return dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(b,c,d,h,j,o,f){if(typeof d==="object"){var g=[];for(var l in d){g.push(l+"="+encodeURIComponent(d[l]))}d=g.join("&")}var e=dhx.promise.defer();var n=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var i=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(h==true){n.onreadystatechange=function(){if((n.readyState==4)||(i==true&&n.readyState==3)){if(n.status!=200||n.responseText==""){e.reject(n);if(!dhx4.callEvent("onAjaxError",[{xmlDoc:n,filePath:c,async:h}])){return}}window.setTimeout(function(){if(typeof(j)=="function"){try{j.apply(window,[{xmlDoc:n,filePath:c,async:h}])}catch(a){e.reject(a)}e.resolve(n.responseText)}if(o!=null){if(typeof(o.postData)!="undefined"){dhx4.ajax.postLong(o.url,o.postData,j)}else{dhx4.ajax.getLong(o.url,j)}}j=null;n=null},1)}}}if(b=="GET"){c+=this._dhxr(c)}n.open(b,c,h);if(f!=null){for(var m in f){n.setRequestHeader(m,f[m])}}else{if(b=="POST"||b=="PUT"||b=="DELETE"){n.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(b=="GET"){d=null}}}n.setRequestHeader("X-Requested-With","XMLHttpRequest");n.send(d);if(h!=true){if((n.readyState==4)||(i==true&&n.readyState==3)){if(n.status!=200||n.responseText==""){dhx4.callEvent("onAjaxError",[{xmlDoc:n,filePath:c,async:h}])}}}e.xmlDoc=n;e.filePath=c;e.async=h;return e},_dhxr:function(a,b){if(this.cache!=true){if(a.match(/^[\?\&]$/)==null){a=(a.indexOf("?")>=0?"&":"?")}if(typeof(b)=="undefined"){b=true}return a+"dhxr"+new Date().getTime()+(b==true?"=1":"")}return""}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(g,c,f,e,h){if(h=="clear"){for(var b in g._dhxdataload){g._dhxdataload[b]=null;delete g._dhxdataload[b]}g._loadData=null;g._dhxdataload=null;g.load=null;g.loadStruct=null;g=null;return}g._dhxdataload={initObj:c,xmlToJson:f,xmlRootTag:e,onBeforeXLS:null};g._loadData=function(n,o,p){if(arguments.length==2){p=o;o=null}var m=null;if(arguments.length==3){p=arguments[2]}this.callEvent("onXLS",[]);if(typeof(n)=="string"){var l=n.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var s=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(s.test(l.replace(/^<\?xml[^\?]*\?>\s*/,""))){m=dhx4.ajax.parse(n);if(m!=null){m=this[this._dhxdataload.xmlToJson].apply(this,[m])}}if(m==null&&(l.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||l.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){m=dhx4.s2j(l)}if(m==null){var j=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var l=this._dhxdataload.onBeforeXLS.apply(this,[n]);if(l!=null&&typeof(l)=="object"){if(l.url!=null){n=l.url}if(l.params!=null){for(var q in l.params){j.push(q+"="+encodeURIComponent(l.params[q]))}}}}var r=this;var i=function(a){var t=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){t=r[r._dhxdataload.xmlToJson].apply(r,[a.xmlDoc.responseXML])}else{t=dhx4.s2j(a.xmlDoc.responseText)}if(t!=null){r[r._dhxdataload.initObj].apply(r,[t,n])}r.callEvent("onXLE",[]);if(p!=null){if(typeof(p)=="function"){p.apply(r,[])}else{if(typeof(window[p])=="function"){window[p].apply(r,[])}}}i=p=null;t=a=r=null};j=j.join("&")+(typeof(o)=="string"?"&"+o:"");if(dhx4.ajax.method=="post"){return dhx4.ajax.post(n,j,i)}else{if(dhx4.ajax.method=="get"){return dhx4.ajax.get(n+(j.length>0?(n.indexOf("?")>0?"&":"?")+j:""),i)}}return}}else{if(typeof(n.documentElement)=="object"||(typeof(n.tagName)!="undefined"&&typeof(n.getElementsByTagName)!="undefined"&&n.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){m=this[this._dhxdataload.xmlToJson].apply(this,[n])}else{m=window.dhx4._copyObj(n)}}if(m!=null){this[this._dhxdataload.initObj].apply(this,[m])}this.callEvent("onXLE",[]);if(p!=null){if(typeof(p)=="function"){p.apply(this,[])}else{if(typeof(window[p])=="function"){window[p].apply(this,[])}}p=null}};if(h!=null){var d={struct:"loadStruct",data:"load"};for(var b in h){if(h[b]==true){g[d[b]]=function(){return this._loadData.apply(this,arguments)}}}}g=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,e){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var d=window.dhx4.newId();this.dhxevs.data[c][d]=e;return d};a.detachEvent=function(f){for(var d in this.dhxevs.data){var e=0;for(var c in this.dhxevs.data[d]){if(c==f){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}else{e++}}if(e==0){this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(d,f){d=String(d).toLowerCase();if(this.dhxevs.data[d]==null){return true}var e=true;for(var c in this.dhxevs.data[d]){e=this.dhxevs.data[d][c].apply(this,f)&&e}return e};a.detachAllEvents=function(){for(var d in this.dhxevs.data){for(var c in this.dhxevs.data[d]){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(d,c){for(var e in c){if(!d[e]){d[e]=c[e]}}return d},extend_api:function(a,d,c){var b=window[a];if(!b){return}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e])}}for(var e in g){if(d[e]){this[d[e]](g[e])}else{if(e.indexOf("on")===0){this.attachEvent(e,g[e])}}}}else{var f=b.apply(this,arguments)}if(d._patch){d._patch(this)}return f||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target}else{d=c.srcElement}dragger.checkLanding(d,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(e){return d+"_"+b}else{this.fx=d}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var d;var e;var b,a;dhtmlxEvent(document.body,"touchstart",function(f){e=f.touches[0].target;b=f.touches[0].clientX;a=f.touches[0].clientY;d=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(e){var f=document.createEvent("HTMLEvents");f.initEvent("dblclick",true,true);e.dispatchEvent(f);d=e=null}}dhtmlxEvent(document.body,"touchmove",function(f){if(d){if(Math.abs(f.touches[0].clientX-b)>50||Math.abs(f.touches[0].clientY-a)>50){window.clearTimeout(d);d=e=false}}});dhtmlxEvent(document.body,"touchend",function(f){if(d){window.clearTimeout(d);d=e=false}});dhtmlxEvent.initTouch=function(){}}}(function(b){var c=typeof setImmediate!=="undefined"?setImmediate:function(e){setTimeout(e,0)};function d(f,g){var e=this;e.promise=e;e.state="pending";e.val=null;e.fn=f||null;e.er=g||null;e.next=[]}d.prototype.resolve=function(f){var e=this;if(e.state==="pending"){e.val=f;e.state="resolving";c(function(){e.fire()})}};d.prototype.reject=function(f){var e=this;if(e.state==="pending"){e.val=f;e.state="rejecting";c(function(){e.fire()})}};d.prototype.then=function(f,h){var e=this;var g=new d(f,h);e.next.push(g);if(e.state==="resolved"){g.resolve(e.val)}if(e.state==="rejected"){g.reject(e.val)}return g};d.prototype.fail=function(e){return this.then(null,e)};d.prototype.finish=function(g){var e=this;e.state=g;if(e.state==="resolved"){for(var f=0;f<e.next.length;f++){e.next[f].resolve(e.val)}}if(e.state==="rejected"){for(var f=0;f<e.next.length;f++){e.next[f].reject(e.val)}if(!e.next.length){throw (e.val)}}};d.prototype.thennable=function(j,f,h,n,m){var g=this;m=m||g.val;if(typeof m==="object"&&typeof j==="function"){try{var i=0;j.call(m,function(e){if(i++!==0){return}f(e)},function(e){if(i++!==0){return}h(e)})}catch(l){h(l)}}else{n(m)}};d.prototype.fire=function(){var f=this;var g;try{g=f.val&&f.val.then}catch(h){f.val=h;f.state="rejecting";return f.fire()}f.thennable(g,function(e){f.val=e;f.state="resolving";f.fire()},function(e){f.val=e;f.state="rejecting";f.fire()},function(i){f.val=i;if(f.state==="resolving"&&typeof f.fn==="function"){try{f.val=f.fn.call(undefined,f.val)}catch(j){f.val=j;return f.finish("rejected")}}if(f.state==="rejecting"&&typeof f.er==="function"){try{f.val=f.er.call(undefined,f.val);f.state="resolving"}catch(j){f.val=j;return f.finish("rejected")}}if(f.val===f){f.val=TypeError();return f.finish("rejected")}f.thennable(g,function(e){f.val=e;f.finish("resolved")},function(e){f.val=e;f.finish("rejected")},function(e){f.val=e;f.state==="resolving"?f.finish("resolved"):f.finish("rejected")})})};d.prototype.done=function(){if(this.state="rejected"&&!this.next){throw this.val}return null};d.prototype.nodeify=function(e){if(typeof e==="function"){return this.then(function(g){try{e(null,g)}catch(f){setImmediate(function(){throw f})}return g},function(g){try{e(g)}catch(f){setImmediate(function(){throw f})}return g})}return this};d.prototype.spread=function(e,f){return this.all().then(function(g){return typeof e==="function"&&e.apply(null,g)},f)};d.prototype.all=function(){var e=this;return this.then(function(r){var f=new d();if(!(r instanceof Array)){f.reject(TypeError);return f}var h=0;var q=r.length;function m(){if(++h===q){f.resolve(r)}}for(var n=0,j=r.length;n<j;n++){var s=r[n];var g;try{g=s&&s.then}catch(o){f.reject(o);break}(function(l){e.thennable(g,function(i){r[l]=i;m()},function(i){f.reject(i)},function(){m()},s)})(n)}return f})};var a={all:function(e){var f=new d(null,null);f.resolve(e);return f.all()},defer:function(){return new d(null,null)},fcall:function(){var h=new d();var f=Array.apply([],arguments);var g=f.shift();try{var j=g.apply(null,f);h.resolve(j)}catch(i){h.reject(i)}return h},nfcall:function(){var h=new d();var f=Array.apply([],arguments);var g=f.shift();try{f.push(function(e,j){if(e){return h.reject(e)}return h.resolve(j)});g.apply(null,f)}catch(i){h.reject(i)}return h}};b.promise=a})(dhx);function dhtmlXCalendarObject(f,l){this.i={};var c=null;if(typeof(f)=="string"){var d=document.getElementById(f)}else{var d=f}if(d&&typeof(d)=="object"&&d.tagName&&String(d.tagName).toLowerCase()!="input"){c=d}d=null;if(typeof(f)!="object"||!f.length){f=[f]}for(var b=0;b<f.length;b++){if(typeof(f[b])=="string"){f[b]=(document.getElementById(f[b])||null)}if(f[b]!=null&&f[b].tagName&&String(f[b].tagName).toLowerCase()=="input"){this.i[window.dhx4.newId()]={input:f[b]}}else{if(!(f[b] instanceof Array)&&f[b] instanceof Object&&(f[b].input!=null||f[b].button!=null)){if(f[b].input!=null&&typeof(f[b].input)=="string"){f[b].input=document.getElementById(f[b].input)}if(f[b].button!=null&&typeof(f[b].button)=="string"){f[b].button=document.getElementById(f[b].button)}this.i[window.dhx4.newId()]=f[b]}}f[b]=null}this.conf={skin:(l||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material"),zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:true,today:false,ws_first:true};this.setSkin=function(m,a){if(this.conf.skin==m&&!a){return}this.conf.skin=m;this.base.className="dhtmlxcalendar_"+this.conf.skin;this._ifrSize()};this.base=document.createElement("DIV");this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));if(c!=null){this._hasParent=true;c.appendChild(this.base);c=null}else{document.body.appendChild(this.base)}this.setParent=function(a){if(this._hasParent){if(typeof(a)=="object"){a.appendChild(this.base)}else{if(typeof(a)=="string"){document.getElementById(a).appendChild(this.base)}}}};this.setSkin(this.conf.skin,true);this.base.onclick=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}a.cancelBubble=true};this.base.onmousedown=function(){return false};if(this.conf.touch){this.base.ontouchstart=this.base.onclick}this.loadUserLanguage=function(o){if(!this.langData[o]){return}this.lang=o;this.setWeekStartDay(this.langData[this.lang].weekstart);this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");if(this.msCont){var n=0;for(var m=0;m<this.msCont.childNodes.length;m++){for(var a=0;a<this.msCont.childNodes[m].childNodes.length;a++){this.msCont.childNodes[m].childNodes[a].innerHTML=this.langData[this.lang].monthesSNames[n++]}}}this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today;this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(a){a=a||event;a.cancelBubble=true;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false};this.base.firstChild.appendChild(this.contMonth);var g=document.createElement("UL");g.className="dhtmlxcalendar_line";this.contMonth.appendChild(g);var j=document.createElement("LI");j.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";j.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";g.appendChild(j);var e=this;j.onclick=function(o){o=o||event;if(o.type=="touchstart"&&o.preventDefault!=null){o.preventDefault()}var m=(o.target||o.srcElement);if(m.className&&m.className.indexOf("dhtmlxcalendar_month_arrow")===0){e._hideSelector();var n=(m.parentNode.firstChild==m?-1:1);var a=new Date(e._activeMonth);e._drawMonth(new Date(e._activeMonth.getFullYear(),e._activeMonth.getMonth()+n,1,0,0,0,0));e._evOnArrowClick([a,new Date(e._activeMonth)]);return}if(m.className&&m.className=="dhtmlxcalendar_month_label_month"){o.cancelBubble=true;e._showSelector("month",Math.round(m.offsetLeft+m.offsetWidth/2),m.offsetTop+m.offsetHeight+2,"selector_month",true);return}if(m.className&&m.className=="dhtmlxcalendar_month_label_year"){o.cancelBubble=true;e._showSelector("year",Math.round(m.offsetLeft+m.offsetWidth/2),m.offsetTop+m.offsetHeight+2,"selector_year",true);return}e._hideSelector()};if(this.conf.touch==true){j.ontouchstart=j.onclick}this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(a){if(a==0){a=7}this._wStart=Math.min(Math.max((isNaN(a)?1:a),1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(this.contDays.childNodes.length==0){var o=document.createElement("UL");o.className="dhtmlxcalendar_line";this.contDays.appendChild(o)}else{var o=this.contDays.firstChild}var m=this._wStart;var n=this.langData[this.lang].daysSNames;n.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var p=0;p<8;p++){if(o.childNodes[p]==null){var a=document.createElement("LI");o.appendChild(a)}else{var a=o.childNodes[p]}if(p==0){a.className="dhtmlxcalendar_cell_wn";a.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"}else{a.className="dhtmlxcalendar_cell"+(m>=6?" dhtmlxcalendar_day_weekday_cell":"")+(p==1?"_first":"");a.innerHTML=n[m];if(++m>7){m=1}}}if(this._activeMonth!=null){this._drawMonth(this._activeMonth)}};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}var m=(q.target||q.srcElement);if(m.parentNode!=null&&m.parentNode._date!=null){m=m.parentNode}if(m._date!=null&&!m._css_dis){var o=e._activeDate.getHours();var n=e._activeDate.getMinutes();var p=m._date;if(e.checkEvent("onBeforeChange")){if(!e.callEvent("onBeforeChange",[new Date(m._date.getFullYear(),m._date.getMonth(),m._date.getDate(),o,n)])){return}}if(e._activeDateCell!=null){e._activeDateCell._css_date=false;e._updateCellStyle(e._activeDateCell._q,e._activeDateCell._w)}var a=(e._activeDate.getFullYear()+"_"+e._activeDate.getMonth()!=p.getFullYear()+"_"+p.getMonth());e._nullDate=false;e._activeDate=new Date(p.getFullYear(),p.getMonth(),p.getDate(),o,n);e._activeDateCell=m;e._activeDateCell._css_date=true;e._activeDateCell._css_hover=false;e._updateCellStyle(e._activeDateCell._q,e._activeDateCell._w);if(a){e._drawMonth(e._activeDate)}e._updateInp();if(!e._hasParent){if(q.type=="touchstart"){window.setTimeout(function(){e._hide()},400)}else{e._hide()}}e._evOnClick([new Date(e._activeDate.getTime())]);e._doOnSelectorChange(true)}};if(this.conf.touch==true){this.contDates.ontouchstart=this.contDates.onclick}this.contDates.onmouseover=function(m){m=m||event;var a=(m.target||m.srcElement);if(a.parentNode!=null&&a.parentNode._date!=null){a=a.parentNode}if(a._date!=null){if(e._lastHover==a||a._css_hover){return}a._css_hover=true;e._updateCellStyle(a._q,a._w);e._lastHover=a;e._evOnMouseOver([new Date(a._date.getFullYear(),a._date.getMonth(),a._date.getDate(),0,0,0,0),m]);a=null}};this.contDates.onmouseout=function(a){e._clearDayHover(a||event)};this._lastHover=null;this._clearDayHover=function(a){if(!this._lastHover){return}this._lastHover._css_hover=false;this._updateCellStyle(this._lastHover._q,this._lastHover._w);if(a!=null){e._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),a])}this._lastHover=null};for(var b=0;b<6;b++){var g=document.createElement("UL");g.className="dhtmlxcalendar_line";this.contDates.appendChild(g);for(var i=0;i<=7;i++){var j=document.createElement("LI");if(i==0){j.className="dhtmlxcalendar_cell_wn"}else{j.className="dhtmlxcalendar_cell"}g.appendChild(j)}}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.contTime.style.display="none";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){if(this.conf.time!=true){this.conf.time=true;this._adjustTimeCont()}};this.hideTime=function(){if(this.conf.time==true){this.conf.time=false;this._adjustTimeCont()}};this.showToday=function(){if(this.conf.today!=true){this.conf.today=true;this._adjustTimeCont()}};this.hideToday=function(){if(this.conf.today==true){this.conf.today=false;this._adjustTimeCont()}};this._adjustTimeCont=function(){var a="";if(this.conf.time==true){a+="_time"}if(this.conf.today==true){a+="_today"}if(a==""){this.contTime.style.display="none"}else{this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+a;this.contTime.style.display=""}this._ifrSize()};this._adjustTimeCont();var g=document.createElement("UL");g.className="dhtmlxcalendar_line";this.contTime.appendChild(g);var j=document.createElement("LI");j.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";j.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span><span class='dhtmlxcalendar_label_clear'>"+this.langData[this.lang].clear+"</span><span class='dhtmlxcalendar_label_today'>"+this.langData[this.lang].today+"</span>";g.appendChild(j);j.onclick=function(n){n=n||event;if(n.type=="touchstart"&&n.preventDefault!=null){n.preventDefault()}var a=(n.target||n.srcElement);if(a.tagName!=null&&a.tagName.toLowerCase()=="span"&&a._par==true&&a.parentNode!=null){a=a.parentNode}if(a.className&&a.className=="dhtmlxcalendar_label_hours"){n.cancelBubble=true;var m=e.contMonth.offsetHeight+e.contDays.offsetHeight+e.contDates.offsetHeight+a.offsetTop;e._showSelector("hours",Math.round(a.offsetLeft+a.offsetWidth/2),m-2,"selector_hours",true);return}if(a.className&&a.className=="dhtmlxcalendar_label_minutes"){n.cancelBubble=true;if(e._minutesInterval==1){var o=e.getFormatedDate("%i");a.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+o.charAt(0)+"</span>"+o.charAt(1);a.firstChild._par=true;e._selectorMode=1}var m=e.contMonth.offsetHeight+e.contDays.offsetHeight+e.contDates.offsetHeight+a.offsetTop;e._showSelector("minutes",Math.round(a.offsetLeft+a.offsetWidth/2),m-2,"selector_minutes",true);return}e._hideSelector();if(a.className&&a.className=="dhtmlxcalendar_label_today"){var o=new Date();o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),e._activeDate.getHours(),e._activeDate.getMinutes(),e._activeDate.getSeconds(),e._activeDate.getMilliseconds());e.setDate(o);e._updateInp();e.callEvent("onButtonClick",[o])}if(a.className&&a.className=="dhtmlxcalendar_label_clear"){e._nullDate=true;e._drawMonth(new Date());e._updateInp();e.callEvent("onButtonClick",[null])}};if(this.conf.touch==true){j.ontouchstart=j.onclick}this._activeMonth=null;this._activeDate=new Date();this._activeDateCell=null;this.setDate=function(m){window.dhx4.temp_calendar={tz:null};this._nullDate=(typeof(m)=="undefined"||m===""||!m);if(!(m instanceof Date)){m=this._strToDate(String(m||""));if(m=="Invalid Date"){m=new Date()}else{this.conf.tz=window.dhx4.temp_calendar.tz}window.dhx4.temp_calendar=null}if(this.conf.tz==null){this.conf.tz=window.dhx4.date2str(m,"%P")}var a=m.getTime();if(this._isOutOfRange(a)){return}this._activeDate=new Date(a);this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleHours();this._updateVisibleMinutes()};this.getDate=function(n){if(this._nullDate){return null}var a=new Date(this._activeDate.getTime());if(n){window.dhx4.temp_calendar={tz:this.conf.tz};var m=this._dateToStr(a);window.dhx4.temp_calendar=null;return m}return a};this._drawMonth=function(v){if(!(v instanceof Date)){return}if(isNaN(v.getFullYear())){v=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)}this._activeMonth=new Date(v.getFullYear(),v.getMonth(),1,0,0,0,0);this._activeDateCell=null;var t=new Date(this._activeMonth.getTime());var n=t.getDay();var z=n-this._wStart;if(z<0){z=z+7}t.setDate(t.getDate()-z);var C=v.getMonth();var D=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime();var r=0;for(var m=0;m<6;m++){var u=this._wStart;for(var B=0;B<=7;B++){if(B==0){var A=this.getWeekNumber(new Date(t.getFullYear(),t.getMonth(),t.getDate()+r,0,0,0,0));if(A>=52&&this.conf.ws_first==true&&this._activeMonth.getMonth()==0){var p=this.getWeekNumber(new Date(t.getFullYear(),t.getMonth(),t.getDate()+r+7,0,0,0,0));if(p<A&&p>1){A=1}}else{if(A>52&&this._activeMonth.getMonth()==11){var p=this.getWeekNumber(new Date(t.getFullYear()+1,0,1));if(p==1){A=1}}}this.contDates.childNodes[m].childNodes[B].innerHTML="<div class='dhtmlxcalendar_label'>"+A+"</div>"}else{var a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+r,0,0,0,0);if(a.getHours()!=0){var s=(a.getHours()>12?24-a.getHours():a.getHours());a.setTime(a.getTime()+60*60*1000*s)}var y=a.getDay();var o=a.getTime();var x="dhtmlxcalendar_label";if(this._tipData[o]!=null){if(this._tipData[o].usePopup&&typeof(window.dhtmlXPopup)=="function"){this.contDates.childNodes[m].childNodes[B].removeAttribute("title");this._initTooltipPopup()}else{this.contDates.childNodes[m].childNodes[B].setAttribute("title",this._tipData[o].text)}if(this._tipData[o].showIcon){x+=" dhtmlxcalendar_label_title"}}else{this.contDates.childNodes[m].childNodes[B].removeAttribute("title")}this.contDates.childNodes[m].childNodes[B].innerHTML="<div class='"+x+"'>"+a.getDate()+"</div>";this.contDates.childNodes[m].childNodes[B]._date=new Date(o);this.contDates.childNodes[m].childNodes[B]._q=m;this.contDates.childNodes[m].childNodes[B]._w=B;this.contDates.childNodes[m].childNodes[B]._css_month=(a.getMonth()==C);this.contDates.childNodes[m].childNodes[B]._css_date=(!this._nullDate&&o==D);this.contDates.childNodes[m].childNodes[B]._css_weekend=(u>=6);this.contDates.childNodes[m].childNodes[B]._css_dis=this._isOutOfRange(o);this.contDates.childNodes[m].childNodes[B]._css_holiday=(this._holidays[o]==true);this._updateCellStyle(m,B);if(o==D){this._activeDateCell=this.contDates.childNodes[m].childNodes[B]}if(++u>7){u=1}r++}}}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(v)};this._updateCellStyle=function(o,a){var n=this.contDates.childNodes[o].childNodes[a];var m="dhtmlxcalendar_cell dhtmlxcalendar_cell";m+=(n._css_month?"_month":"");m+=(n._css_date?"_date":"");m+=(n._css_weekend?"_weekend":"");m+=(n._css_holiday?"_holiday":"");m+=(n._css_dis?"_dis":"");m+=(n._css_hover&&!n._css_dis?"_hover":"");n.className=m;n=null};this._minutesInterval=5;this._initSelector=function(t,o){if(!this._selCover){this._selCover=document.createElement("DIV");this._selCover.className="dhtmlxcalendar_selector_cover";this.base.firstChild.appendChild(this._selCover)}if(!this._sel){this._sel=document.createElement("DIV");this._sel.className="dhtmlxcalendar_selector_obj";this.base.firstChild.appendChild(this._sel);this._sel.appendChild(document.createElement("TABLE"));this._sel.firstChild.className="dhtmlxcalendar_selector_table";this._sel.firstChild.cellSpacing=0;this._sel.firstChild.cellPadding=0;this._sel.firstChild.border=0;this._sel.firstChild.appendChild(document.createElement("TBODY"));this._sel.firstChild.firstChild.appendChild(document.createElement("TR"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD"));this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left";this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle";this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right";this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;";this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"};this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"};this._sel.onmouseover=function(w){w=w||event;var q=(w.target||w.srcElement);if(q._cell===true){if(e._selHover!=q){e._clearSelHover()}if(String(q.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null){q.className+=" dhtmlxcalendar_selector_cell_hover";e._selHover=q}}};this._sel.onmouseout=function(){e._clearSelHover()};this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}q.cancelBubble=true;e._scrollYears(-1)};this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(q){q=q||event;if(q.type=="touchstart"&&q.preventDefault!=null){q.preventDefault()}q.cancelBubble=true;e._scrollYears(1)};if(this.conf.touch==true){this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick;this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick}this._sel._ta={};this._selHover=null;this._sel.appendChild(document.createElement("DIV"));this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"}if(this._sel._ta[t]==true){return}if(t=="month"){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+o;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);var m=0;for(var a=0;a<4;a++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(s);for(var u=0;u<3;u++){var v=document.createElement("LI");v.innerHTML=this.langData[this.lang].monthesSNames[m];v.className="dhtmlxcalendar_selector_cell";s.appendChild(v);v._month=m;v._cell=true;this._msCells[m++]=v}}this.msCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._month!=null){e._hideSelector();e._updateActiveMonth();e._drawMonth(new Date(e._activeMonth.getFullYear(),q._month,1,0,0,0,0));e._doOnSelectorChange()}};if(this.conf.touch==true){this.msCont.ontouchstart=this.msCont.onclick}}if(t=="year"){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+o;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var a=0;a<4;a++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line";this.ysCont.appendChild(s);for(var u=0;u<3;u++){var v=document.createElement("LI");v.className="dhtmlxcalendar_selector_cell";v._cell=true;s.appendChild(v)}}this.ysCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._year!=null){e._hideSelector();e._drawMonth(new Date(q._year,e._activeMonth.getMonth(),1,0,0,0,0));e._doOnSelectorChange()}};if(this.conf.touch==true){this.ysCont.ontouchstart=this.ysCont.onclick}}if(t=="hours"){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+o;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);var m=0;for(var a=0;a<4;a++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line";this.hsCont.appendChild(s);for(var u=0;u<6;u++){var v=document.createElement("LI");v.innerHTML=this._fixLength(m,2);v.className="dhtmlxcalendar_selector_cell";s.appendChild(v);v._hours=m;v._cell=true;this._hsCells[m++]=v}}this.hsCont.onclick=function(w){w=w||event;if(w.type=="touchstart"&&w.preventDefault!=null){w.preventDefault()}w.cancelBubble=true;var q=(w.target||w.srcElement);if(q._hours!=null){e._hideSelector();e._activeDate.setHours(q._hours);e._updateActiveHours();e._updateVisibleHours();e._doOnSelectorChange();e.callEvent("onTimeChange",[new Date(e._activeDate.getTime())])}};if(this.conf.touch==true){this.hsCont.ontouchstart=this.hsCont.onclick}}if(t=="minutes"){var r=4;var n=3;var p=2;if(this._minutesInterval==1){if(this._selectorMode==1){r=2;n=3;p=1}else{r=2;n=5;p=1;o+="5"}}if(this._minutesInterval==10){r=2}if(this._minutesInterval==15){r=1;n=4;o+="4"}this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+o;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);var m=0;for(var a=0;a<r;a++){var s=document.createElement("UL");s.className="dhtmlxcalendar_selector_line";this.rsCont.appendChild(s);for(var u=0;u<n;u++){var v=document.createElement("LI");v.innerHTML=(p>1?this._fixLength(m,p):m);v.className="dhtmlxcalendar_selector_cell";s.appendChild(v);v._minutes=m;v._cell=true;this._rsCells[m]=v;m+=this._minutesInterval}}this.rsCont.onclick=function(x){x=x||event;if(x.type=="touchstart"&&x.preventDefault!=null){x.preventDefault()}x.cancelBubble=true;var w=(x.target||x.srcElement);if(w._minutes!=null){if(e._minutesInterval==1){var q=e.getFormatedDate("%i");if(e._selectorMode==1){q=w._minutes.toString()+q.charAt(1)}else{q=q.charAt(0)+w._minutes.toString()}e._activeDate.setMinutes(Number(q));e.callEvent("onTimeChange",[new Date(e._activeDate.getTime())]);e._hideSelector();if(e._selectorMode==1){e._updateVisibleMinutes(true);e._selectorMode=2;e._showSelector("minutes",e._sel._x,e._sel._y,"selector_minutes",true);e._updateActiveMinutes();return}else{e._selectorMode=1}}else{e._hideSelector();e._activeDate.setMinutes(w._minutes);e._updateActiveMinutes();e.callEvent("onTimeChange",[new Date(e._activeDate.getTime())])}e._updateVisibleMinutes();e._doOnSelectorChange()}};if(this.conf.touch==true){this.rsCont.ontouchstart=this.rsCont.onclick}}this._sel._ta[t]=true};this._showSelector=function(p,m,q,o,a){if(a===true&&this._sel!=null&&this._isSelectorVisible()&&p==this._sel._t){this._hideSelector();return}if(this.conf.skin=="dhx_terrace"){m+=12}if(!this._sel||!this._sel._ta[p]){this._initSelector(p,o)}if(p!=this._sel._t&&this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")}this._sel._x=m;this._sel._y=q;this._sel.style.visibility="hidden";this._sel.style.display="";this._selCover.style.width=this.base.offsetWidth-2+"px";this._selCover.style.top=this.contMonth.offsetHeight+"px";this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px";this._selCover.style.display="";this._sel._t=p;this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+o+(p=="hours"&&this.conf.today==true?"2":"");this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=(p=="year"?"":"none");var n=Math.max(0,m-Math.round(this._sel.offsetWidth/2));if(n+this._sel.offsetWidth>this._sel.parentNode.offsetWidth){n=this._sel.parentNode.offsetWidth-this._sel.offsetWidth}this._sel.style.left=n+"px";if(p=="hours"||p=="minutes"){this._sel.style.top=q-this._sel.offsetHeight+"px"}else{this._sel.style.top=q+"px"}this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px";this._sel.style.visibility="visible";this._doOnSelectorShow(p)};this._doOnSelectorShow=function(a){if(a=="month"){this._updateActiveMonth()}if(a=="year"){this._updateYearsList(this._activeMonth)}if(a=="hours"){this._updateActiveHours()}if(a=="minutes"){this._updateActiveMinutes()}};this._hideSelector=function(a){if(!this._sel){return}this._sel.style.display="none";this._sel.style.visible="hidden";this._selCover.style.display="none";if(this._sel._t=="minutes"&&this._minutesInterval==1){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i");this._unloadSelector("minutes")}};this._isSelectorVisible=function(){if(!this._sel){return false}return(this._sel.style.display!="none")};this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),a===true])};this._clearSelHover=function(){if(!this._selHover){return}this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,""));this._selHover=null};this._unloadSelector=function(n){if(!this._sel){return}if(!this._sel._ta[n]){return}if(n=="month"){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(var m in this._msCells){this._msCells[m]._cell=null;this._msCells[m]._month=null;this._msCells[m].parentNode.removeChild(this._msCells[m]);this._msCells[m]=null}this._msCells=null;while(this.msCont.childNodes.length>0){this.msCont.removeChild(this.msCont.lastChild)}this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(n=="year"){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var m in this._ysCells){this._ysCells[m]._cell=null;this._ysCells[m]._year=null;this._ysCells[m].parentNode.removeChild(this._ysCells[m]);this._ysCells[m]=null}this._ysCells=null;while(this.ysCont.childNodes.length>0){this.ysCont.removeChild(this.ysCont.lastChild)}this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(n=="hours"){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(var m in this._hsCells){this._hsCells[m]._cell=null;this._hsCells[m]._hours=null;this._hsCells[m].parentNode.removeChild(this._hsCells[m]);this._hsCells[m]=null}this._hsCells=null;while(this.hsCont.childNodes.length>0){this.hsCont.removeChild(this.hsCont.lastChild)}this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(n=="minutes"){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(var m in this._rsCells){this._rsCells[m]._cell=null;this._rsCells[m]._minutes=null;this._rsCells[m].parentNode.removeChild(this._rsCells[m]);this._rsCells[m]=null}this._rsCells=null;while(this.rsCont.childNodes.length>0){this.rsCont.removeChild(this.rsCont.lastChild)}this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[n]=null};this.setMinutesInterval=function(a){if(!(a==1||a==5||a==10||a==15)){return}this._minutesInterval=a;this._unloadSelector("minutes")};this._updateActiveMonth=function(){if(typeof(this._msActive)!="undefined"&&typeof(this._msCells[this._msActive])!="undefined"){this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"}this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();if(this._ysCells[a]){this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateYearsList=function(r){for(var n in this._ysCells){this._ysCells[n]=null;delete this._ysCells[n]}var o=12*Math.floor(r.getFullYear()/12);for(var p=0;p<4;p++){for(var m=0;m<3;m++){this.ysCont.childNodes[p].childNodes[m].innerHTML=o;this.ysCont.childNodes[p].childNodes[m]._year=o;this.ysCont.childNodes[p].childNodes[m].className="dhtmlxcalendar_selector_cell";this._ysCells[o++]=this.ysCont.childNodes[p].childNodes[m]}}this._updateActiveYear()};this._scrollYears=function(a){var n=(a<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a;var m=new Date(n,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(m)};this._updateActiveHours=function(){if(typeof(this._hsActive)!="undefined"&&typeof(this._hsCells[this._hsActive])!="undefined"){this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"}this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){if(this._rsActive!=null&&typeof(this._rsActive)!="undefined"&&typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"}if(this._minutesInterval==1){this._rsActive=(this.getFormatedDate("%i").toString()).charAt(this._selectorMode==1?0:1)}else{this._rsActive=this._activeDate.getMinutes()}if(typeof(this._rsCells[this._rsActive])!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateVisibleMinutes=function(m){var a=this._fixLength(this._activeDate.getMinutes(),2).toString();if(m==true){a=a.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+a.charAt(1)+"</span>"}this.contTime.firstChild.firstChild.childNodes[3].innerHTML=a;if(m==true){this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=true}};this._fixLength=function(a,m){while(String(a).length<m){a="0"+String(a)}return a};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(p){var o={};if(this._strToDate!=null){for(var m in this.i){if(this.i[m].input!=null&&this.i[m].input.value.length>0){var q=this._strToDate(this.i[m].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");if(q instanceof Date){o[m]=q}}}}this._dateFormat=p;var n=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){var r=a.replace(/%/,"");switch(r){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+e.langData[e.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+e.langData[e.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return a});this._dateFormatRE=new RegExp(n,"i");for(var m in o){this.i[m].input.value=this._dateToStr(o[m])}o=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(m){if(!this._dateFormatRE||!m.match(this._dateFormatRE)){return}if(m==this.getFormatedDate()){return}var a=this._strToDate(m);if(!(a instanceof Date)){return}if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())])){this._updateInp();return}}this._nullDate=false;this._activeDate=a;this._drawMonth(this._nullDate?new Date():this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();if(this._sel&&this._isSelectorVisible()){this._doOnSelectorShow(this._sel._t)}this._doOnSelectorChange(true)};this.showMonth=function(a){if(typeof(a)=="string"){a=this._strToDate(a)}if(!(a instanceof Date)){return}this._drawMonth(a)};this.setFormatedDate=function(p,q,m,o){var n=this._strToDate(q,p);if(o){return n}this.setDate(n)};this.getFormatedDate=function(m,a){if(!(a&&a instanceof Date)){if(this._nullDate){return""}a=new Date(this._activeDate)}return this._dateToStr(a,m)};this.getWeekNumber=function(n){if(typeof(n)=="string"){n=this._strToDate(n)}if(!(n instanceof Date)){return"Invalid Date"}var m=n.getDay();if(m===0){m=7}var o=new Date(n.valueOf());o.setDate(n.getDate()+(4-m));var a=o.getFullYear();var p=Math.round((o.getTime()-new Date(a,0,1).getTime())/86400000);return 1+Math.floor(p/7)};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(o){if(!o&&this._hasParent){this._show();return}if(typeof(o)=="string"){var n=document.getElementById(o);if(n!=null&&typeof(n._dhtmlxcalendar_uid)!="undefined"&&this.i[n._dhtmlxcalendar_uid]!=null){this._show(n._dhtmlxcalendar_uid);return}}if(typeof(o)=="object"&&typeof(o._dhtmlxcalendar_uid)!="undefined"&&this.i[o._dhtmlxcalendar_uid]==o){this._show(o._dhtmlxcalendar_uid);return}if(typeof(o)=="undefined"){for(var m in this.i){if(!o){o=m}}}if(!o){return}this._show(o)};this.hide=function(){if(this._isVisible()){this._hide()}};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(a,m){this._px=null;this._py=null;if(a=="right"||a=="bottom"){this.pos=a}else{this.pos="int";if(typeof(a)!="undefined"&&!isNaN(a)){this.base.style.left=a+"px";this._px=a}if(typeof(m)!="undefined"&&!isNaN(m)){this.base.style.top=m+"px";this._py=m}this._ifrSize()}};this._show=function(r,m){if(m===true&&this._activeInp==r&&this._isVisible()){this._hide();return}this.base.style.visibility="hidden";this.base.style.display="";if(!r){if(this._px!=null&&this._py!=null){this.base.style.left=this._px+"px";this.base.style.top=this._py+"px"}else{this.base.style.left="0px";this.base.style.top="0px"}}else{if(this.base.className.indexOf("dhtmlxcalendar_in_input")==-1){this.base.className+=" dhtmlxcalendar_in_input"}var n=(this.i[r].input||this.i[r].button);var s=window.dhx4.screenDim();var q={top:window.dhx4.absTop(n),left:window.dhx4.absLeft(n)};if(this.pos=="right"){this.base.style.left=q.left+n.offsetWidth+"px";this.base.style.top=Math.min(q.top,s.bottom-this.base.offsetHeight)+"px"}else{if(this.pos=="bottom"){var p=q.top+n.offsetHeight+1;if(p+this.base.offsetHeight>s.bottom){var o=q.top-this.base.offsetHeight;if(o>=-20){p=o}}var a=q.left;if(a+this.base.offsetWidth>s.right){a=Math.max(0,q.left+n.offsetWidth-this.base.offsetWidth)}this.base.style.left=a+"px";this.base.style.top=p+"px"}else{this.base.style.left=(this._px||0)+"px";this.base.style.top=(this._py||0)+"px"}}this._activeInp=r;n=null}this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();if(this._ifr){this._ifr.style.display=""}this.callEvent("onShow",[])};this._hide=function(){if(this._lastHover!=null){this._clearDayHover()}this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);if(this.base.className.indexOf("dhtmlxcalendar_in_input")>=0){this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")}this._activeInp=null;if(this._ifr){this._ifr.style.display="none"}this.callEvent("onHide",[])};this._isVisible=function(){return(this.base.style.display!="none")};this._rangeActive=false;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(n){var a=this._extractDates(n);for(var m=0;m<a.length;m++){this._rangeSet[new Date(a[m].getFullYear(),a[m].getMonth(),a[m].getDate(),0,0,0,0).getTime()]=true}this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(m){if(m==null){this._clearHolidays()}else{if(m!=null){var a=this._extractDates(m);for(var n=0;n<a.length;n++){this._holidays[new Date(a[n].getFullYear(),a[n].getMonth(),a[n].getDate(),0,0,0,0).getTime()]=true}}}this._drawMonth(this._activeMonth)};this._extractDates=function(n){if(typeof(n)=="string"||n instanceof Date){n=[n]}var m=[];for(var o=0;o<n.length;o++){if(typeof(n[o])=="string"){var p=n[o].split(",");for(var a=0;a<p.length;a++){m.push(this._strToDate(p[a]))}}else{if(n[o] instanceof Date){m.push(n[o])}}}return m};this._clearRange=function(){this._rangeActive=false;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var m in this._rangeSet){this._rangeSet[m]=null;delete this._rangeSet[m]}};this._clearHolidays=function(){for(var m in this._holidays){this._holidays[m]=null;delete this._holidays[m]}};this._isOutOfRange=function(m){if(this._rangeSet[m]==true){return true}if(this._rangeActive){if(this._rangeType=="in"&&(m<this._rangeFrom||m>this._rangeTo)){return true}if(this._rangeType=="out"&&(m>=this._rangeFrom&&m<=this._rangeTo)){return true}if(this._rangeType=="from"&&m<this._rangeFrom){return true}if(this._rangeType=="to"&&m>this._rangeTo){return true}}var a=new Date(m);if(this._rangeWeek){if(this._rangeWeekData[a.getDay()]===true){return true}}if(this._rangeMonth){if(this._rangeMonthData[a.getDate()]===true){return true}}if(this._rangeYear){if(this._rangeYearData[a.getMonth()+"_"+a.getDate()]===true){return true}}return false};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(o,n,a){var m=false;if(o!=null&&n!=null){if(!(o instanceof Date)){o=this._strToDate(o)}if(!(n instanceof Date)){n=this._strToDate(n)}if(o.getTime()>n.getTime()){return}this._rangeFrom=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="in";m=true}if(!m&&o!=null&&n==null){if(!(o instanceof Date)){o=this._strToDate(o)}this._rangeFrom=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime();this._rangeTo=null;if(a===true){this._rangeFrom++}this._rangeActive=true;this._rangeType="from";m=true}if(!m&&o==null&&n!=null){if(!(n instanceof Date)){n=this._strToDate(n)}this._rangeFrom=null;this._rangeTo=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();if(a===true){this._rangeTo--}this._rangeActive=true;this._rangeType="to";m=true}if(m){this._drawMonth(this._activeMonth)}};this.setInsensitiveRange=function(m,a){if(m!=null&&a!=null){if(!(m instanceof Date)){m=this._strToDate(m)}if(!(a instanceof Date)){a=this._strToDate(a)}if(m.getTime()>a.getTime()){return}this._rangeFrom=new Date(m.getFullYear(),m.getMonth(),m.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime();this._rangeActive=true;this._rangeType="out";this._drawMonth(this._activeMonth);return}if(m!=null&&a==null){this.setSensitiveRange(null,m,true);return}if(m==null&&a!=null){this.setSensitiveRange(a,null,true);return}};this.disableDays=function(r,p){if(r=="week"){if(typeof(p)!="object"&&typeof(p.length)=="undefined"){p=[p]}if(!this._rangeWeekData){this._rangeWeekData={}}for(var m in this._rangeWeekData){this._rangeWeekData[m]=false;delete this._rangeWeekData[m]}for(var o=0;o<p.length;o++){this._rangeWeekData[p[o]]=true;if(p[o]==7){this._rangeWeekData[0]=true}}this._rangeWeek=true}if(r=="month"){if(typeof(p)!="object"&&typeof(p.length)=="undefined"){p=[p]}if(!this._rangeMonthData){this._rangeMonthData={}}for(var m in this._rangeMonthData){this._rangeMonthData[m]=false;delete this._rangeMonthData[m]}for(var o=0;o<p.length;o++){this._rangeMonthData[p[o]]=true}this._rangeMonth=true}if(r=="year"){var n=this._extractDates(p);if(!this._rangeYearData){this._rangeYearData={}}for(var m in this._rangeYearData){this._rangeYearData[m]=false;delete this._rangeYearData[m]}for(var o=0;o<n.length;o++){this._rangeYearData[n[o].getMonth()+"_"+n[o].getDate()]=true}this._rangeYear=true}this._drawMonth(this._activeMonth)};this.enableDays=function(a){if(a=="week"){this._rangeWeek=false}if(a=="month"){this._rangeMonth=false}if(a=="year"){this._rangeYear=false}this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=false;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(n,r,s,a){var o=this._extractDates(n);for(var p=0;p<o.length;p++){var m=new Date(o[p].getFullYear(),o[p].getMonth(),o[p].getDate(),0,0,0,0).getTime();this._tipData[m]={text:r,showIcon:s,usePopup:a}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(m){var n=this._extractDates(m);for(var o=0;o<n.length;o++){var a=new Date(n[o].getFullYear(),n[o].getMonth(),n[o].getDate(),0,0,0,0).getTime();this._tipData[a]=null;delete this._tipData[a]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){if(this._tipEvs){return}this.attachEvent("onMouseOver",function(m){var a=new Date(m.getFullYear(),m.getMonth(),m.getDate(),0,0,0,0).getTime();if(this._tipData[a]!=null){if(this._tipTM){window.clearTimeout(this._tipTM)}this._tipCellDate=m;this._tipCellDim=this.getCellDimension(m);this._tipText=this._tipData[a].text;this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime)}});this.attachEvent("onMouseOut",this._hideTooltipPopup);this._tipEvs=true};this._showTooltipPopup=function(o,a,p,m,n){if(!e._tipPopup){e._tipPopup=new dhtmlXPopup({mode:"top"})}e._tipPopup.attachHTML(e._tipText);e._tipPopup.show(e._tipCellDim.x,e._tipCellDim.y,e._tipCellDim.w,e._tipCellDim.h);e.callEvent("onPopupShow",[e._tipCellDate])};this._hideTooltipPopup=function(){if(this._tipTM){window.clearTimeout(this._tipTM)}if(this._tipPopup!=null&&this._tipPopup.isVisible()){this._tipPopup.hide();this.callEvent("onPopupHide",[this._tipCellDate])}};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(n){if(typeof(n)=="string"){n=this._strToDate(n)}if(!(n instanceof Date)){return null}var o=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();var m=null;for(var r=0;r<this.contDates.childNodes.length;r++){for(var a=0;a<this.contDates.childNodes[r].childNodes.length;a++){var s=this.contDates.childNodes[r].childNodes[a];if(s._date!=null&&s._date.getTime()==o){m={x:window.dhx4.absLeft(s),y:window.dhx4.absTop(s),w:s.offsetWidth,h:s.offsetHeight}}s=null}}return m};this._updateFromInput=function(a){if(this._nullInInput&&((a.value).replace(/\s/g,"")).length==0){if(this.checkEvent("onBeforeChange")){if(!this.callEvent("onBeforeChange",[null])){this._updateInp();return}}this.setDate(null)}else{this._updateDateStr(a.value)}a=null};this._doOnClick=function(m){m=m||event;var a=(m.target||m.srcElement);if(a._dhtmlxcalendar_uid&&a._dhtmlxcalendar_uid!=e._activeInp&&e._isVisible()&&e._activeInp){e._hide();return}if(!a._dhtmlxcalendar_uid||!e.i[a._dhtmlxcalendar_uid]){if(e._isSelectorVisible()){e._hideSelector()}else{if(!e._hasParent&&e._isVisible()){e._hide()}}}};this._doOnKeyDown=function(a){a=a||event;if(a.keyCode==27||a.keyCode==13){if(e._isSelectorVisible()){e._hideSelector()}else{if(e._isVisible()&&!e._hasParent){e._hide()}}}};this._doOnInpClick=function(m){m=m||event;if(m.type=="touchstart"&&m.preventDefault!=null){m.preventDefault()}var a=(m.target||m.srcElement);if(!a._dhtmlxcalendar_uid){return}if(!e._listenerEnabled){e._updateFromInput(a)}e._show(a._dhtmlxcalendar_uid,true)};this._doOnInpKeyUp=function(m){m=m||event;var a=(m.target||m.srcElement);if(m.keyCode==13||!a._dhtmlxcalendar_uid){return}if(!e._listenerEnabled){e._updateFromInput(a)}};this._doOnBtnClick=function(m){m=m||event;if(m.type=="touchstart"&&m.preventDefault!=null){m.preventDefault()}var a=(m.target||m.srcElement);if(!a._dhtmlxcalendar_uid){return}if(e.i[a._dhtmlxcalendar_uid].input!=null){e._updateFromInput(e.i[a._dhtmlxcalendar_uid].input)}e._show(a._dhtmlxcalendar_uid,true)};this._doOnUnload=function(){if(e&&e.unload){e.unload()}};if(typeof(window.addEventListener)=="function"){document.body.addEventListener("click",e._doOnClick,false);window.addEventListener("keydown",e._doOnKeyDown,false);window.addEventListener("unload",e._doOnUnload,false);if(this.conf.touch==true){document.body.addEventListener("touchstart",e._doOnClick,false)}}else{document.body.attachEvent("onclick",e._doOnClick);document.body.attachEvent("onkeydown",e._doOnKeyDown);window.attachEvent("onunload",e._doOnUnload)}this.attachObj=function(n){var m=window.dhx4.newId();if(typeof(n)=="string"){this.i[m]={input:document.getElementById(n)}}else{if(typeof(n.tagName)!="undefined"){this.i[m]={input:n}}else{if(typeof(n)=="object"&&(n.input!=null||n.button!=null)){this.i[m]={};if(n.input!=null){this.i[m].input=(typeof(n.input)=="string"?document.getElementById(n.input):n.input)}if(n.button!=null){this.i[m].button=(typeof(n.button)=="string"?document.getElementById(n.button):n.button)}}}}this._attachEventsToObject(m);return m};this.detachObj=function(o){var n=null;if(this.i[o]!=null){n=o}else{if(typeof(o)=="string"){o=document.getElementById(o);n=o._dhtmlxcalendar_uid}else{if(typeof(o.tagName)!="undefined"){n=o._dhtmlxcalendar_uid}else{if(typeof(o)=="object"&&(o.input!=null||o.button!=null)){if(n==null&&o.input!=null){n=(typeof(o.input)=="string"?document.getElementById(o.input):o.input)._dhtmlxcalendar_uid}if(n==null&&o.button!=null){n=(typeof(o.button)=="string"?document.getElementById(o.button):o.button)._dhtmlxcalendar_uid}}}}}if(n!=null&&this.i[n]!=null){this._detachEventsFromObject(n);for(var m in this.i[m]){this.i[n][m]._dhtmlxcalendar_uid=null;this.i[n][m]=null;delete this.i[n][m]}this.i[n]=null;delete this.i[n];return true}return false};this._attachEventsToObject=function(m){if(this.i[m].button!=null){this.i[m].button._dhtmlxcalendar_uid=m;if(typeof(window.addEventListener)=="function"){this.i[m].button.addEventListener("click",e._doOnBtnClick,false);if(this.conf.touch==true){this.i[m].button.addEventListener("touchstart",e._doOnBtnClick,false)}}else{this.i[m].button.attachEvent("onclick",e._doOnBtnClick)}}else{if(this.i[m].input!=null){this.i[m].input._dhtmlxcalendar_uid=m;if(typeof(window.addEventListener)=="function"){this.i[m].input.addEventListener("click",e._doOnInpClick,false);this.i[m].input.addEventListener("keyup",e._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[m].input.addEventListener("touchstart",e._doOnInpClick,false)}}else{this.i[m].input.attachEvent("onclick",e._doOnInpClick);this.i[m].input.attachEvent("onkeyup",e._doOnInpKeyUp)}}}};this._detachEventsFromObject=function(m){if(this.i[m].button!=null){if(typeof(window.addEventListener)=="function"){this.i[m].button.removeEventListener("click",e._doOnBtnClick,false);if(this.conf.touch==true){this.i[m].button.removeEventListener("touchstart",e._doOnBtnClick,false)}}else{this.i[m].button.detachEvent("onclick",e._doOnBtnClick)}}else{if(this.i[m].input!=null){if(typeof(window.addEventListener)=="function"){this.i[m].input.removeEventListener("click",e._doOnInpClick,false);this.i[m].input.removeEventListener("keyup",e._doOnInpKeyUp,false);if(this.conf.touch==true){this.i[m].input.removeEventListener("touchstart",e._doOnInpClick,false)}}else{this.i[m].input.detachEvent("onclick",e._doOnInpClick);this.i[m].input.detachEvent("onkeyup",e._doOnInpKeyUp)}}}};this._updateInp=function(){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}};this.enableListener=function(a){if(!a){return}if(typeof(window.addEventListener)=="function"){a.addEventListener("focus",e._listenerEvFocus,false);a.addEventListener("blur",e._listenerEvBlur,false)}else{a.attachEvent("onfocus",e._listenerEvFocus);a.attachEvent("onblur",e._listenerEvBlur)}a=null};this.disableListener=function(a){if(!a){return}a._f0=false;if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(window.addEventListener)=="function"){a.removeEventListener("focus",e._listenerEvFocus,false);a.removeEventListener("blur",e._listenerEvBlur,false)}else{a.detachEvent("onfocus",e._listenerEvFocus);a.detachEvent("onblur",e._listenerEvBlur)}a=null};this._startListener=function(a){if(this._tmListener){window.clearTimeout(this._tmListener)}if(typeof(a._v1)=="undefined"){a._v1=a.value}if(a._v1!=a.value){this._updateFromInput(a);a._v1=a.value}if(a._f0){this._tmListener=window.setTimeout(function(){e._startListener(a)},100)}};this._listenerEvFocus=function(m){m=m||event;var a=m.target||m.srcElement;a._f0=true;e._startListener(a);a=null};this._listenerEvBlur=function(m){m=m||event;var a=m.target||m.srcElement;a._f0=false;a=null};for(var h in this.i){this._attachEventsToObject(h)}window.dhx4._eventable(this);this._evOnArrowClick=function(a){return this.callEvent("onArrowClick",a)};this._evOnClick=function(a){return this.callEvent("onClick",a)};this._evOnMouseOut=function(a){return this.callEvent("onMouseOut",a)};this._evOnMouseOver=function(a){return this.callEvent("onMouseOver",a)};this.unload=function(){this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;if(this._tmListener){window.clearTimeout(this._tmListener)}this._tmListener=null;if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("click",e._doOnClick,false);window.removeEventListener("keydown",e._doOnKeyDown,false);window.removeEventListener("unload",e._doOnUnload,false);if(this.conf.touch==true){document.body.removeEventListener("touchstart",e._doOnClick,false)}}else{document.body.detachEvent("onclick",e._doOnClick);document.body.detachEvent("onkeydown",e._doOnKeyDown);window.detachEvent("onunload",e._doOnKeyDown)}this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(var m in this.i){this.i[m]._dhtmlxcalendar_uid=null;this._detachEventsFromObject(m);this.disableListener(this.i[m].input);this.i[m]=null;delete this.i[m]}this.i=null;this._doOnInpClick=null;this._doOnInpKeyUp=null;window.dhx4._eventable(this,"clear");this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.ontouchstart=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;while(this.contMonth.firstChild.firstChild.childNodes.length>0){this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild)}this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);this.contMonth=null;while(this.contDays.firstChild.childNodes.length>0){this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild)}this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.ontouchstart=null;this.contDates.onmouseover=null;this.contDates.onmouseout=null;while(this.contDates.childNodes.length>0){while(this.contDates.lastChild.childNodes.length>0){this.contDates.lastChild.lastChild._css_date=null;this.contDates.lastChild.lastChild._css_month=null;this.contDates.lastChild.lastChild._css_weekend=null;this.contDates.lastChild.lastChild._css_hover=null;this.contDates.lastChild.lastChild._date=null;this.contDates.lastChild.lastChild._q=null;this.contDates.lastChild.lastChild._w=null;this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild)}this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.ontouchstart=null;while(this.contTime.firstChild.firstChild.childNodes.length>0){this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild)}this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this.contTime=null;this._lastHover=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");if(this._selCover){this._selCover.parentNode.removeChild(this._selCover);this._selCover=null}if(this._sel){for(var m in this._sel._ta){this._sel._ta[m]=null}this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;this._sel.onmouseout=null;while(this._sel.firstChild.firstChild.firstChild.childNodes.length>0){this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null;this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null;this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild)}this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);while(this._sel.childNodes.length>0){this._sel.removeChild(this._sel.lastChild)}this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.setYearsRange=null;this.show=null;this.showTime=null;this.unload=null;if(this._tipPopup!=null){this._tipPopup.unload();this._tipPopup=null}for(var m in this){delete this[m]}m=e=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w",today:"Today",clear:"Clear"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(e){var b=this;var d=function(f){return(String(f).length==1?"0"+String(f):f)};var a=function(f,g){return"<span class='dhtmlxcalendar_month_label_"+f+"'>"+g+"</span>"};var c=String(this.langData[this.lang].hdrformat||("%F %Y")).replace(/%[a-z]/gi,function(f){switch(f){case"%m":return a("month",d(e.getMonth()+1));case"%n":return a("month",e.getMonth()+1);case"%M":return a("month",b.langData[b.lang].monthesSNames[e.getMonth()]);case"%F":return a("month",b.langData[b.lang].monthesFNames[e.getMonth()]);case"%y":return a("year",d(e.getYear()%100));case"%Y":return a("year",e.getFullYear());case"%%":return"%";default:return f}});b=d=a=null;return c};dhtmlXCalendarObject.prototype.enableIframe=function(a){if(a==true){if(!this._ifr){this._ifr=document.createElement("IFRAME");this._ifr.frameBorder=0;this._ifr.border=0;this._ifr.setAttribute("src","javascript:false;");this._ifr.className="dhtmlxcalendar_ifr";this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")};this.base.parentNode.insertBefore(this._ifr,this.base);this._ifrSize()}}else{if(this._ifr){this._ifr.parentNode.removeChild(this._ifr);this._ifr=null}}};dhtmlXCalendarObject.prototype._ifrSize=function(){if(this._ifr){this._ifr.style.left=this.base.style.left;this._ifr.style.top=this.base.style.top;this._ifr.style.width=this.base.offsetWidth+"px";this._ifr.style.height=this.base.offsetHeight+"px"}};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var a=this.langData[this.lang];return{monthFullName:a.monthesFNames,monthShortName:a.monthesSNames,dayFullName:a.daysFNames,dayShortName:a.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(b,a){return window.dhx4.str2date(b,a||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(b,a){return window.dhx4.date2str(b,a||this._dateFormat,this._dateStrings())};window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(b){var a=this;this.leftCalendar=new dhtmlXCalendarObject(b);this.leftCalendar.hideTime();this.rightCalendar=new dhtmlXCalendarObject(b);this.rightCalendar.hideTime();this.leftCalendar.attachEvent("onClick",function(c){a._updateRange("rightCalendar",c,null);a._evOnClick(["left",c])});this.rightCalendar.attachEvent("onClick",function(c){a._updateRange("leftCalendar",null,c);a._evOnClick(["right",c])});this.leftCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["left",c])});this.rightCalendar.attachEvent("onBeforeChange",function(c){return a._evOnBeforeChange(["right",c])});this.show=function(){this.leftCalendar.show();this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px";this.rightCalendar.show()};this.hide=function(){this.leftCalendar.hide();this.rightCalendar.hide()};this.setDateFormat=function(c){this.leftCalendar.setDateFormat(c);this.rightCalendar.setDateFormat(c)};this.setDates=function(d,c){if(d!=null){this.leftCalendar.setDate(d)}if(c!=null){this.rightCalendar.setDate(c)}this._updateRange()};this._updateRange=function(c,e,d){if(arguments.length==3){(c=="leftCalendar"?this.leftCalendar:this.rightCalendar).setSensitiveRange(e,d)}else{this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate());this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null)}};this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)};this.unload=function(){window.dhx4._eventable(this,"clear");this.leftCalendar.unload();this.rightCalendar.unload();this.leftCalendar=this.rightCalendar=null;this._updateRange=null;this._evOnClick=null;this._evOnBeforeChange=null;this.show=null;this.hide=null;this.setDateFormat=null;this.setDates=null;this.getFormatedDate=null;this.unload=null;a=null};this._evOnClick=function(c){return this.callEvent("onClick",c)};this._evOnBeforeChange=function(c){return this.callEvent("onBeforeChange",c)};window.dhx4._eventable(this);return this};function dhtmlXCombo(f,j,c,h,e){var g=this;var d=null;var l=null;if(typeof(f)=="object"&&!f.tagName){d=f;f=d.parent;c=d.width;j=d.name;h=d.mode;l=d.skin}this.cont=(typeof(f)=="string"?document.getElementById(f):f);this.conf={skin:null,form_name:j||"dhxcombo",combo_width:(parseInt(c)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:false,combo_focus:false,opts_type:(typeof(h)=="string"&&typeof(this.modes[h])!="undefined"?h:"option"),opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:true,allow_empty_value:true,free_text_empty:false,enabled:true,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0),ro_mode:false,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:true,template:{header:true,input:"#text#",option:"#text#"},f_func:null,f_mode:false,f_url:false,f_cache:false,f_cache_data:{},f_dyn:false,f_dyn_end:false,f_mask:"",f_ac:true,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:false,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:false,clear_blur:false,clear_bsp:false,clear_key:false,i_ofs:23,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1},material:{list_ofs:0,hdr_ofs:1,scr_ofs:1}},col_w:null};this.conf.combo_image=(this.modes[this.conf.opts_type].image==true);this.t={};this.base=document.createElement("DIV");this.base.style.width=this.conf.combo_width+"px";this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px;"+(this.conf.combo_image?"margin-left:"+this.conf.i_ofs+"px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":"");this.cont.appendChild(this.base);this.list=document.createElement("DIV");this.list._listId=window.dhx4.newId();this.list.style.display="none";document.body.insertBefore(this.list,document.body.firstChild);this._doOnListScroll=function(){if(g.conf.s_tm!=null){window.clearTimeout(g.conf.s_tm)}g.conf.s_tm=window.setTimeout(g._doOnListScrollAction,g.conf.s_time)};this._doOnListScrollAction=function(){g.conf.s_tm=null;if(g.conf.s_mode=="scroll"&&g.list.scrollHeight-g.list.scrollTop-10<g.list.clientHeight){g._subloadRequest()}};if(typeof(window.addEventListener)=="function"){this.list.addEventListener("scroll",this._doOnListScroll,false)}else{this.list.attachEvent("onscroll",this._doOnListScroll)}this.setSkin(l||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"material");this._updateTopImage=function(a){if(!this.conf.combo_image){return}if(a!=null){this.base.lastChild.innerHTML=this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled)}else{this.base.lastChild.innerHTML=this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)}};this._filterOpts=function(u){if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}var o=String(this.base.firstChild.value).replace(new RegExp(this._fixRE(this.conf.f_ac_text)+"$","i"),"");if(this.conf.f_server_last==o.toLowerCase()){this._checkForMatch();return}if(this.conf.f_url!=null&&this.checkEvent("onDynXLS")){this.conf.f_server_last=o.toLowerCase();this.callEvent("onDynXLS",[o]);return}if(this.conf.f_url!=null){if(o.length==0){this.conf.f_server_last=o.toLowerCase();this.clearAll();return}if(this.conf.f_cache==true&&this.conf.f_cache_data[o]!=null){this.clearAll();this.conf.f_server_last=o.toLowerCase();for(var n=0;n<this.conf.f_cache_data[o].data.length;n++){this.load(this.conf.f_cache_data[o].data[n])}if(this.conf.f_dyn){this.conf.f_dyn_end=this.conf.f_cache_data[o].dyn_end;this.conf.f_mask=this.conf.f_cache_data[o].mask}if(u!==true){this._showList(true);this._checkForMatch()}}else{this.conf.f_server_tm=window.setTimeout(function(){g.conf.f_server_last=o.toLowerCase();g.conf.f_mask=o;var q="mask="+encodeURIComponent(o);if(g.conf.f_dyn){q+="&pos=0";g.conf.f_dyn_end=false}var a=function(z){if(g.conf.f_cache){if(!g.conf.f_cache_data[o]){g.conf.f_cache_data[o]={data:[],dyn_end:false,mask:o}}g.conf.f_cache_data[o].data.push(z.xmlDoc.responseXML)}g.clearAll();g.load(z.xmlDoc.responseText);var y=(g.base.offsetWidth>0&&g.base.offsetHeight>0);if(y==true&&g.conf.enabled==true&&g.conf.combo_focus==true&&u!==true){if(g.conf.f_ac&&g.conf.f_mode=="start"&&g.conf.clear_bsp==false&&g.list.firstChild!=null){var t=g.list.firstChild._optId;var A=String(g.t[t].obj.getText(g.list.firstChild,true));if(o==g.base.firstChild.value&&String(A).toLowerCase().indexOf(String(o).toLowerCase())===0){g.base.firstChild.value=A;g.conf.f_ac_text=A.substr(o.length);g._selectRange(o.length,A.length)}}g._showList(true);g._checkForMatch()}a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(g.conf.f_url,q,a)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(g.conf.f_url+(String(g.conf.f_url).indexOf("?")>=0?"&":"?")+q,a)}}},200)}}else{this.conf.f_server_last=o.toLowerCase();var m=(o.length==0?true:new RegExp((this.conf.f_mode=="start"?"^":"")+this._fixRE(o),"i"));var p=null;for(var v in this.t){var x=false;if(m!==true){if(this.conf.f_func!=null){var s=this._getOption(this.t[v].item._optId,n);x=(this.conf.f_func.apply(window,[o,s])==true)}else{var w=this.t[v].obj.getText(this.t[v].item,true);x=(m.test(w)==true)}}if(m===true||x==true){this.t[v].item.style.display="";if(p==null&&o.length>0){p=String(this.t[v].obj.getText(this.t[v].item,true))}}else{this.t[v].item.style.display="none"}}if(this.conf.f_ac&&this.conf.f_mode=="start"&&this.conf.clear_bsp==false&&p!=null){this.conf.f_ac_text=p.replace(new RegExp("^"+o,"i"),"");this.base.firstChild.value=p;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}if(this.conf.f_mode=="between"&&this.conf.clear_bsp==true){this._checkForMatch(true)}if(u!==true){this._showList(true);this._checkForMatch()}}};this._searchRO=function(m){if(this.conf.ro_tm){window.clearTimeout(this.conf.ro_tm)}this.conf.ro_text+=m;this._showList();for(var n=0;n<this.list.childNodes.length;n++){var a=this.list.childNodes[n]._optId;var o=String(this.t[a].obj.getText(this.list.childNodes[n],true)).toLowerCase();if(o.indexOf(this.conf.ro_text)===0){this._setSelected(a,true,true);this._confirmSelect("script",false);break}}this.conf.ro_tm=window.setTimeout(function(){g.conf.ro_text=""},this.conf.ro_tm_time)};this._fixRE=function(a){return String(a).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&")};this._initObj=function(a){if(typeof(a.template)!="undefined"){this.setTemplate(a.template)}if(a.add!=true&&this.conf.f_loading!=true){this.clearAll(false)}this.addOption(a.options)};this._xmlToObj=function(H,p,o){var u={add:false,options:[]};var B=(p==true?H:H.getElementsByTagName("complete"));if(B.length>0){if(window.dhx4.s2b(B[0].getAttribute("add"))==true){u.add=true}var A=B[0].childNodes;for(var y=0;y<A.length;y++){if(typeof(A[y].tagName)!="undefined"){if(String(A[y].tagName).toLowerCase()=="template"){var G={};for(var s=0;s<A[y].childNodes.length;s++){var z=A[y].childNodes[s];if(z.tagName!=null){var C=z.tagName;if(typeof(this.conf.template[C])!="undefined"){G[C]=window.dhx4._xmlNodeValue(z)}if(C=="columns"){for(var E=0;E<z.childNodes.length;E++){var r=z.childNodes[E];if(r.tagName!=null&&r.tagName=="column"){var x={};for(var F in {width:1,css:1,header:1,option:1}){if(r.getAttribute(F)!=null){x[F]=r.getAttribute(F)}}for(var F in {header:1,option:1}){var D=r.getElementsByTagName(F);if(D[0]!=null&&D[0].firstChild!=null){x[F]=window.dhx4._xmlNodeValue(D[0])}}if(G.columns==null){G.columns=[]}G.columns.push(x)}r=null}}}z=null}this.setTemplate(G)}if(String(A[y].tagName).toLowerCase()=="option"){var v=false;if(p==true){v=(u.options.length==o)}else{v=window.dhx4.s2b(A[y].getAttribute("selected"))}var m={value:A[y].getAttribute("value"),text:window.dhx4._xmlNodeValue(A[y]),selected:v,checked:window.dhx4.s2b(A[y].getAttribute("checked"))};for(var F in {img:1,img_dis:1,img_src:1,img_src_dis:1,css:1}){if(A[y].getAttribute(F)!=null){m[F]=A[y].getAttribute(F)}}for(var s=0;s<A[y].childNodes.length;s++){if(A[y].childNodes[s].tagName!=null&&String(A[y].childNodes[s].tagName).toLowerCase()=="text"){m.text={};var z=A[y].childNodes[s];for(var E=0;E<z.childNodes.length;E++){if(z.childNodes[E].tagName!=null){m.text[z.childNodes[E].tagName]=window.dhx4._xmlNodeValue(z.childNodes[E])}}}}u.options.push(m)}}}B=A=null}return u};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:true});window.dhx4._eventable(this);this._getNearItem=function(n,m){var a=null;while(n!=null){n=n[m<0?"previousSibling":"nextSibling"];if(a==null&&n!=null&&n.style.display==""&&n._optId!=null){a=n;n=null}}return a};this.setName(this.conf.form_name);this._doOnListMouseMove=function(m){m=m||event;var a=m.target||m.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){if(g.conf.tm_hover){window.clearTimeout(g.conf.tm_hover)}g._setSelected(a._optId,false,false,true)}a=a.parentNode}a=null};this._doOnListMouseDown=function(a){a=a||event;a.cancelBubble=true;g.conf.clear_click=true;window.setTimeout(function(){g.base.firstChild.focus()},1)};this._doOnListMouseUp=function(n){n=n||event;if(n.button!=g.conf.btn_left){return}var a=n.target||n.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){var m=true;if(typeof(g.t[a._optId].obj.optionClick)=="function"&&g.t[a._optId].obj.optionClick(a,n,g)!==true){m=false}if(m){g._setSelected(a._optId,null,true);g._confirmSelect("click")}}a=a.parentNode}a=null};this._doOnListMouseOut=function(a){if(g.conf.tm_hover){window.clearTimeout(g.conf.tm_hover)}g.conf.tm_hover=window.setTimeout(function(){var m=g.conf.last_match||g.conf.last_selected;if(g.conf.last_match==null&&g.t[m]!=null){if(g.base.firstChild.value!=g.t[m].obj.getText(g.t[m].item,true)){m=null}}g._setSelected(m,null,true,true)},1)};this._doOnBaseMouseDown=function(q){if(!g.conf.enabled){return}g.conf.clear_click=true;q=q||event;if(q.button!=g.conf.btn_left){return}var m=q.target||q.srcElement;if(m!=this.firstChild){window.setTimeout(function(){g.base.firstChild.focus()},1);var o=m;while(o!=this&&o!=null){if(o==this.lastChild){if(typeof(g.modes[g.conf.opts_type].topImageClick)=="function"){var n=(g.conf.last_hover||g.conf.last_selected);var a=(n!=null?g.t[n].item:null);if(g.modes[g.conf.opts_type].topImageClick(a,g)!==true){n=a=null;return}}o=null}else{o=o.parentNode}}}if(g._isListVisible()){g._hideList()}else{if(m!=this.firstChild){g.conf.clear_blur=true}g._showList();g._setSelected(g.conf.last_selected,true,true)}m=null};this._doOnBodyMouseDown=function(){if(g.conf.clear_click){g.conf.clear_click=false;return}g._confirmSelect("blur")};this._doOnInputFocus=function(){g.conf.clear_blur=false;if(g.conf.tm_confirm_blur){window.clearTimeout(g.conf.tm_confirm_blur)}if(g.conf.combo_focus==false){g.conf.combo_focus=true;if(g.conf.skin=="material"&&g.base.className.match(/dhxcombo_actv/)==null){g.base.className+=" dhxcombo_actv"}g.callEvent("onFocus",[])}};this._doOnInputBlur=function(){if(g.conf.clear_blur==true){g.conf.clear_blur=false;return}if(g.conf.tm_confirm_blur){window.clearTimeout(g.conf.tm_confirm_blur)}g.conf.tm_confirm_blur=window.setTimeout(function(){if(g.conf.clear_click==false){g._confirmSelect("blur");g.conf.combo_focus=false;if(g.conf.skin=="material"&&g.base.className.match(/dhxcombo_actv/)!=null){g.base.className=g.base.className.replace(/\s*dhxcombo_actv/gi,"")}g.callEvent("onBlur",[])}},20)};this._doOnInputKeyUp=function(a){a=a||event;if(g.conf.f_mode!=false){g.conf.clear_bsp=(a.keyCode==8||a.keyCode==46);g._filterOpts();return}else{g._checkForMatch()}};this._doOnInputKeyDown=function(a){a=a||event;if((a.keyCode==38||a.keyCode==40)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;g._keyOnUpDown(a.keyCode==38?-1:1)}if(a.keyCode==113){if(!g._isListVisible()){g._showList();if(g.base.firstChild.value==g.conf.last_text){g._setSelected(g.conf.last_selected,true,true);g.base.firstChild.value=g.conf.last_text;g.conf.f_server_last=g.base.firstChild.value.toLowerCase()}else{g.conf.f_server_last=g.base.firstChild.value.toLowerCase();if(g.conf.f_mode==false){g._checkForMatch()}}}else{}}if(a.keyCode==27){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;g._cancelSelect()}if(a.keyCode==13){if(a.preventDefault){a.preventDefault()}g._confirmSelect("kbd")}if(g.conf.ro_mode==true&&((a.keyCode>=48&&a.keyCode<=57)||(a.keyCode>=65&&a.keyCode<=90))){g._searchRO(String.fromCharCode(a.keyCode).toLowerCase());a.cancelBubble=true}g.conf.clear_key=true;g.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._doOnInputKeyPress=function(a){if(g.conf.clear_key){g.conf.clear_key=false;return}a=a||event;g.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._keyOnUpDown=function(a){var m=null;if(this.conf.last_hover){m=this.t[this.conf.last_hover].item}else{if(this.conf.last_selected){m=this.t[this.conf.last_selected].item}}if(!m&&this._getListVisibleCount()==0){return}if(m!=null&&m.style.display!=""){m=null}this._showList();if(m!=null){if(this.t[m._optId].obj.isSelected(m)){m=this._getNearItem(m,a)}}else{m=this.list.firstChild;if(m.style.display!=""){m=this._getNearItem(m,1)}}if(m==null){return}this._setSelected(m._optId,true,true);if(this.conf.f_mode==false){this.base.firstChild.value=this.t[m._optId].obj.getText(m,true)}else{var n=String(this.t[m._optId].obj.getText(m,true));if(this.conf.f_mode=="start"&&this.conf.f_ac==true){if(n.toLowerCase().indexOf(this.conf.f_server_last)===0){this.conf.f_ac_text=n.substring(this.conf.f_server_last.length,n.length);this.base.firstChild.value=n;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}else{this.base.firstChild.value=n;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this._selectRange(0,this.base.firstChild.value.length)}}else{this.base.firstChild.value=n;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}}m=null};this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var b=0;b<this.conf.evs_nodes.length;b++){for(var i in this.conf.evs_nodes[b].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[b].node.addEventListener(i,this[this.conf.evs_nodes[b].evs[i]],false)}else{this.conf.evs_nodes[b].node.attachEvent("on"+i,this[this.conf.evs_nodes[b].evs[i]])}}}this.unload=function(){this.clearAll();this.t=null;for(var n=0;n<this.conf.evs_nodes.length;n++){for(var m in this.conf.evs_nodes[n].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[n].node.removeEventListener(m,this[this.conf.evs_nodes[n].evs[m]],false)}else{this.conf.evs_nodes[n].node.detachEvent("on"+m,this[this.conf.evs_nodes[n].evs[m]])}this.conf.evs_nodes[n].evs[m]=null;delete this.conf.evs_nodes[n].evs[m]}this.conf.evs_nodes[n].node=null;this.conf.evs_nodes[n].evs=null;delete this.conf.evs_nodes[n].node;delete this.conf.evs_nodes[n].evs;this.conf.evs_nodes[n]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(var m in this.conf){this.conf[m]=null;delete this.conf[m]}this.conf=null;if(typeof(window.addEventListener)=="function"){this.list.removeEventListener("scroll",this._doOnListScroll,false)}else{this.list.detachEvent("onscroll",this._doOnListScroll)}this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.base=this.list=this.cont=null;this.modes=null;for(var m in this){if(typeof(this[m])=="function"){this[m]=null}}g=null};this.DOMelem_input=this.base.firstChild;this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)];this.DOMlist=this.list;this.DOMelem=this.base;this.DOMParent=f;f=null;if(d!=null){if(d.filter!=null){if(typeof(d.filter)=="string"){this.enableFilteringMode(true,d.filter,window.dhx4.s2b(d.filter_cache),window.dhx4.s2b(d.filter_sub_load))}else{this.enableFilteringMode(true)}}if(d.image_path!=null){this.setImagePath(d.image_path)}if(d.default_image!=null||d.default_image_dis!=null){this.setDefaultImage(d.default_image,d.default_image_dis)}if(d.items||d.options){this.addOption(d.items||d.options)}if(d.xml||d.json){this.load(d.xml||d.json)}if(typeof(d.readonly)!="undefined"){this.readonly(d.readonly)}d=null}return this}function dhtmlXComboFromSelect(c){if(typeof(c)=="string"){c=document.getElementById(c)}var b=c.offsetWidth;var j=c.getAttribute("name")||null;var d=document.createElement("SPAN");c.parentNode.insertBefore(d,c);var f=c.getAttribute("mode")||c.getAttribute("opt_type")||"option";var e=new dhtmlXCombo(d,j,b,f);d=null;var h=c.getAttribute("imagePath");if(h){e.setImagePath(h)}var i=c.getAttribute("defaultImage");var g=c.getAttribute("defaultImageDis");if(window.dhx4.s2b(g)==true){g=true}if(i!=null||g!=null){e.setDefaultImage(i,g)}var a=e._xmlToObj([c],true,c.selectedIndex);if(a.options.length>0){e.addOption(a.options)}a=null;c.parentNode.removeChild(c);c=null;return e}dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a;this.base.childNodes[1].name=a;this.base.childNodes[2].name=a.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(a){if(window.dhx4.s2b(a)){this.base.firstChild.setAttribute("readOnly","true");this.conf.ro_mode=true}else{this.base.firstChild.removeAttribute("readOnly");this.conf.ro_mode=false}};dhtmlXCombo.prototype.setPlaceholder=function(a){if(typeof(a)=="undefined"||a==null){a=""}this.base.firstChild.setAttribute("placeholder",String(a))};dhtmlXCombo.prototype.setTemplate=function(c){for(var b in c){if(typeof(this.conf.template[b])!="undefined"){if(b=="header"){this.conf.template[b]=window.dhx4.s2b(c[b])}else{this.conf.template[b]=String(c[b])}}}if(c.columns!=null){this._mcMakeTemplate(c.columns)}else{this._mcDetachHeader()}for(var b in this.t){this.t[b].obj.setText(this.t[b].item,this.t[b].item._conf.text)}this._confirmSelect("template")};dhtmlXCombo.prototype.setSkin=function(a){if(a==this.conf.skin){return}this.conf.skin=a;this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled");this.list.className="dhxcombolist_"+this.conf.skin+(this.hdr!=null?" dhxcombolist_multicolumn":"");if(this.hdr!=null){this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"}this.conf.i_ofs=(a=="material"?26:23);this._adjustBase()};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(a){for(var b=0;b<this.list.childNodes.length;b++){a.apply(window,[this._getOption(this.list.childNodes[b]._optId,b)])}};dhtmlXCombo.prototype.setFocus=function(){if(this.conf.enabled){this.base.firstChild.focus()}};dhtmlXCombo.prototype.setFontSize=function(a,b){if(a!=null){this.base.firstChild.style.fontSize=a}if(b!=null){this.list.style.fontSize=b}};dhtmlXCombo.prototype.getOption=function(e){var f=null;var c=null;for(var d=0;d<this.list.childNodes.length;d++){if(f==null){var b=this.list.childNodes[d]._optId;if(this.t[b].obj.getValue(this.t[b].item)==e){f=b;c=d}}}return(f==null?null:this._getOption(f,c))};dhtmlXCombo.prototype.getOptionByIndex=function(a){if(a<0){return null}if(this.list.childNodes[a]==null){return null}return this._getOption(this.list.childNodes[a]._optId,a)};dhtmlXCombo.prototype.getOptionByLabel=function(e){var f=null;var c=null;for(var d=0;d<this.list.childNodes.length;d++){if(f==null){var b=this.list.childNodes[d]._optId;if(this.t[b].obj.getText(this.t[b].item,true)==e){f=b;c=d}}}return(f==null?null:this._getOption(f,c))};dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.getIndexByValue=function(b){var a=this.getOption(b);return(a!=null?a.index:-1)};dhtmlXCombo.prototype.setComboText=function(a){if(this.conf.allow_free_text!=true){return}this.unSelectOption();this.conf.last_text=this.base.firstChild.value=a;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()};dhtmlXCombo.prototype.setComboValue=function(b){var a=this.getOption(b);if(a!=null){this.selectOption(a.index)}else{this.conf.last_value=b;this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="true"}};dhtmlXCombo.prototype.selectOption=function(b,c,a){if(b<0||b>=this.list.childNodes.length){return}var d=this.list.childNodes[b]._optId;this._setSelected(d,this._isListVisible(),true);this._confirmSelect("script")};dhtmlXCombo.prototype.unSelectOption=function(){if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null}this.base.firstChild.value="";if(this.conf.f_mode!=false){this._filterOpts(true)}this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};dhtmlXCombo.prototype.enable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));if(this.conf.enabled==a){return}this.conf.enabled=a;if(a){this.base.className="dhxcombo_"+this.conf.skin;this.base.firstChild.removeAttribute("disabled")}else{this._hideList();this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled";this.base.firstChild.setAttribute("disabled","true")}this._updateTopImage(this.conf.last_selected)};dhtmlXCombo.prototype.disable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));this.enable(!a)};dhtmlXCombo.prototype.isEnabled=function(){return(this.conf.enabled==true)};dhtmlXCombo.prototype.show=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.base.style.display=(a==true?"":"none")};dhtmlXCombo.prototype.hide=function(a){if(typeof(a)=="undefined"){a=true}this.show(!a)};dhtmlXCombo.prototype.isVisible=function(){return(this.base.style.display=="")};dhtmlXCombo.prototype.setFilterHandler=function(a){if(typeof(a)=="function"){this.conf.f_func=a;this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{if(typeof(a)=="string"&&typeof(window[a])=="function"){this.conf.f_func=window[a];this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{this.conf.f_func=null}}};dhtmlXCombo.prototype.enableFilteringMode=function(d,b,a,c){if(d==true||d=="between"){this.conf.f_mode=(d==true?"start":"between");if(b){this.conf.f_url=b;this.conf.f_cache=window.dhx4.s2b(a);this.conf.f_dyn=window.dhx4.s2b(c)}else{this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}}else{this.conf.f_mode=false;this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}};dhtmlXCombo.prototype.filter=function(c,a){for(var d=0;d<this.list.childNodes.length;d++){var b=c.apply(window,[this._getOption(this.list.childNodes[d]._optId,d)]);this.list.childNodes[d].style.display=(b===true?"":"none")}if(typeof(a)=="undefined"||a==true){this._showList(true)}};dhtmlXCombo.prototype.sort=function(c){var a=[];for(var b=0;b<this.list.childNodes.length;b++){var d=this.list.childNodes[b]._optId;a.push([d,this._getOption(d,b)])}if(c=="asc"||c=="desc"){k=true;a.sort(function(f,e){f=f[1].text_option.toLowerCase();e=e[1].text_option.toLowerCase();var g=(c=="asc"?1:-1);return(f>e?g:-1*g)})}else{if(typeof(c)=="function"||typeof(window[c])=="function"){if(typeof(window[c])=="function"){c=window[c]}a.sort(function(f,e){return c.apply(window,[f[1],e[1]])})}}while(this.list.childNodes.length>0){this.list.removeChild(this.list.lastChild)}for(var b=0;b<a.length;b++){this.list.appendChild(this.t[a[b][0]].item)}};dhtmlXCombo.prototype.enableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.conf.f_ac=a};dhtmlXCombo.prototype.disableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.enableAutocomplete(!a)};dhtmlXCombo.prototype.allowFreeText=function(b,a){this.conf.allow_free_text=(typeof(b)=="undefined"?true:window.dhx4.s2b(b));this.conf.free_text_empty=(typeof(a)=="undefined"?false:window.dhx4.s2b(a))};dhtmlXCombo.prototype._checkForMatch=function(d){var a=window.dhx4.trim(this.base.firstChild.value).toLowerCase();var e=null;var b=this.list.firstChild;while(b!=null){if(b.style.display==""&&b._optId!=null){var c=window.dhx4.trim(this.t[b._optId].obj.getText(b,true)).toLowerCase();if(a==c){e=b._optId;b=null}}if(b!=null){b=b.nextSibling}}if(this.conf.last_match==null){if(e!=null){this._setSelected(e,true,true);this.conf.last_match=e}else{if(this.conf.f_mode!="between"||d==true){this._setSelected(null,true,true);this.conf.last_match=null}}}else{if(e!=null){if(e!=this.conf.last_match){this._setSelected(e,true,true);this.conf.last_match=e}}else{this._setSelected(null,true,true);this.conf.last_match=null}}};dhtmlXCombo.prototype._selectRange=function(b,a){if(this.conf.combo_focus==true){window.dhx4.selectTextRange(this.base.firstChild,b,a)}};dhtmlXCombo.prototype.openSelect=function(){if(!this._isListVisible()){this._showList()}};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(a){if(this._getListVisibleCount()==0){if(a&&this._isListVisible()){this._hideList()}return}if(this._isListVisible()){this._checkListHeight();return}this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id);if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.zIndex=Number(this.list.style.zIndex)+1}this.list.style.visibility="hidden";this.list.style.display="";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.visibility=this.list.style.visibility;this.hdr.style.display=this.list.style.display}var b=(this.hdr!=null&&this.conf.template.header==true?this.hdr.offsetHeight:0);this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px";this.list.style.top=window.dhx4.absTop(this.base)+b+this.base.offsetHeight-1+"px";this.list.style.left=window.dhx4.absLeft(this.base)+"px";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.width=this.list.style.width;this.hdr.style.left=this.list.style.left;this.hdr.style.top=parseInt(this.list.style.top)-b+"px"}this._checkListHeight();this.list.style.visibility="visible";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.visibility="visible"}this.callEvent("onOpen",[])};dhtmlXCombo.prototype._hideList=function(){if(!this._isListVisible()){return}window.dhx4.zim.clear(this.conf.list_zi_id);this.list.style.display="none";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.display="none"}this.conf.clear_click=false;this.callEvent("onClose",[])};dhtmlXCombo.prototype._isListVisible=function(){return(this.list.style.display=="")};dhtmlXCombo.prototype._getListVisibleCount=function(){var a=0;for(var b=0;b<this.list.childNodes.length;b++){a+=(this.list.childNodes[b].style.display==""?1:0)}return a};dhtmlXCombo.prototype._checkListHeight=function(){if(!this._isListVisible()){return}if(this.conf.item_h==null){var j=this.list.firstChild;while(j!=null){if(j.style.display==""){this.conf.item_h=j.offsetHeight+(this.hdr!=null?-1:0);j=null}else{j=j.nextSibling}}j=null}var l=window.dhx4.screenDim();var f=window.dhx4.absTop(this.base);var b=this.base.offsetHeight;var a=(this.hdr!=null&&this.conf.template.header==true?this.hdr.offsetHeight:0);var c=Math.max(0,Math.floor((f-a-l.top)/this.conf.item_h));var i=Math.max(0,Math.floor((l.bottom-(f+b+a))/this.conf.item_h));var m=this._getListVisibleCount();if(i<Math.min(this.conf.opts_count_min,m)&&c>i){i=null}var g=Math.min((i==null?c:i),this.conf.opts_count,m);var d=(g<m?(g*this.conf.item_h)+"px":"");var e=this.conf.sp[this.conf.skin][this.hdr!=null&&this.conf.template.header==true?"hdr_ofs":"list_ofs"];this.list.style.height=d;this.list.style.top=(i==null?f-this.list.offsetHeight+e:f+b+a-e)+"px";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.top=(i==null?f-a-this.list.offsetHeight+e:f+b-e)+"px"}};dhtmlXCombo.prototype._scrollToItem=function(e){var d=this.t[e].item.offsetTop;var c=d+this.t[e].item.offsetHeight;var b=this.list.scrollTop;var a=b+this.list.clientHeight;if(d<b){this.list.scrollTop=d+(this.hdr!=null&&this.conf.template.header==true?1:0)}else{if(c>a){this.list.scrollTop=c-this.list.clientHeight+(this.hdr!=null&&this.conf.template.header==true?-this.conf.sp[this.conf.skin].scr_ofs:0)}}};dhtmlXCombo.prototype._setSelected=function(d,c,b,a){this.conf.temp_selected=null;if(b){this._updateTopImage(d)}if(d!=null&&this.conf.last_hover==d){if(c){this._scrollToItem(d)}return}if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null;if(d==null){this.callEvent("onSelectionChange",[])}}if(d!=null){this.t[d].obj.setSelected(this.t[d].item,true);this.conf.last_hover=d;if(a!=true){this.conf.temp_selected=d;this.callEvent("onSelectionChange",[])}if(this.conf.s_mode=="select"&&this.t[d].item==this.t[d].item.parentNode.lastChild){this._subloadRequest()}if(c){this._scrollToItem(d)}}};dhtmlXCombo.prototype._subloadRequest=function(){if(this.conf.f_url!=null&&this.conf.f_dyn==true&&this.conf.f_dyn_end==false){var c="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length;var a=this;var b=function(e){if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].data.push(e.xmlDoc.responseXML)}var d=a.list.childNodes.length;a.conf.f_loading=true;a.load(e.xmlDoc.responseXML);a.conf.f_loading=false;if(d==a.list.childNodes.length){a.conf.f_dyn_end=true;if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].dyn_end=true}}b=a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(this.conf.f_url,c,b)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+c,b)}}}};dhtmlXCombo.prototype.addOption=function(f,g,b,a,d){var c=null;if(!(f instanceof Array)){var h=this._renderOption({value:f,text:g,css:b,img:a});if(c==null&&window.dhx4.s2b(d)==true){c=h}}else{for(var e=0;e<f.length;e++){if(typeof(f[e])=="undefined"){continue}if(f[e] instanceof Array){h=this._renderOption({value:f[e][0],text:f[e][1],css:f[e][2],img:f[e][3]});if(c==null&&window.dhx4.s2b(f[e][4])==true){c=h}}else{var h=this._renderOption(f[e]);if(c==null&&window.dhx4.s2b(f[e].selected)==true){c=h}}}}if(c!=null){this._setSelected(c,this._isListVisible(),true);this._confirmSelect("onInit")}};dhtmlXCombo.prototype.updateOption=function(a,c,b,d){var e=this._getOptionId(a);if(e==null){return}this.t[e].obj.update(this.t[e].item,{value:c,text:b,css:d});if(this.conf.last_selected==e){this.conf.last_text=this.base.firstChild.value=this.t[e].obj.getText(this.t[e].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}};dhtmlXCombo.prototype.deleteOption=function(d){for(var b in this.t){var c=this.t[b].obj.getValue(this.t[b].item);if(c==d){this._removeOption(b)}}if(this._isListVisible()){this._showList(true)}};dhtmlXCombo.prototype.clearAll=function(b){b=(typeof(b)=="undefined"?true:window.dhx4.s2b(b));for(var c in this.t){this._removeOption(c)}if(this.conf.tm_hover){window.clearTimeout(this.conf.tm_hover)}this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;if(b==true){this._hideList()}};dhtmlXCombo.prototype._renderOption=function(d){var e=window.dhx4.newId();var c=document.createElement("DIV");c._optId=e;c._tpl=this.conf.template;if(typeof(d.img)=="undefined"&&typeof(d.img_src)!="undefined"){d.img=d.img_src;delete d.img_src}if(typeof(d.img_dis)=="undefined"&&typeof(d.img_src_dis)!="undefined"){d.img_dis=d.img_src_dis;delete d.img_src_dis}d.img_path=this.conf.img_path;d.img_def=this.conf.img_def;d.img_def_dis=this.conf.img_def_dis;this.list.appendChild(c);var b=(this._isListVisible()&&window.dhx4.isFF==true);if(b==true){var a=this.list.scrollTop;this.list.scrollTop-=1}if(this.hdr!=null){d.multicol=true}this.t[c._optId]={obj:this.modes[this.conf.opts_type].render(c,d),item:c,conf:{type:this.conf.opts_type}};c=null;if(b==true){this.list.scrollTop+=1}return e};dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item);this.t[a].obj=null;this.t[a].item.parentNode.removeChild(this.t[a].item);this.t[a].item=null;this.t[a].conf=null;this.t[a]=null;delete this.t[a];if(this.conf.last_hover==a){this.conf.last_hover=null}if(this.conf.last_selected==a){this.conf.last_selected=null;this._confirmSelect("onDelete")}};dhtmlXCombo.prototype._confirmSelect=function(c,a){var b=false;if(typeof(a)=="undefined"){a=true}if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}if(this.conf.last_hover!=null){b=b||(this.conf.last_value!=this._getOptionValue(this.conf.last_hover));this.conf.last_match=this.conf.last_selected=this.conf.last_hover;this.conf.last_value=this._getOptionValue(this.conf.last_selected);this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="false"}else{if(this.conf.allow_free_text||(this.base.firstChild.value==""&&this.conf.allow_empty_value)){b=b||(this.conf.last_text!=this.base.firstChild.value);this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.conf.last_text=this.base.firstChild.value;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_text;this.base.childNodes[2].value="true"}else{if(c!="template"){this._cancelSelect(true);this._updateTopImage(this.conf.last_selected);return}}}if(this.conf.f_ac&&this.conf.f_mode=="start"){this.conf.f_ac_text="";if(c!="blur"){this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)}}if(a){this._hideList()}if(b==true&&c!="onInit"&&c!="onDelete"){this.callEvent("onSelectionChange",[]);this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])}};dhtmlXCombo.prototype._cancelSelect=function(a){this._hideList();if(a==true&&this.conf.allow_free_text==false&&this.conf.free_text_empty==true){this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="";this.base.childNodes[2].value="false"}else{this.base.firstChild.value=this.conf.last_text}if(this.conf.f_mode!=false){this._filterOpts(true)}};dhtmlXCombo.prototype._getOption=function(g,d){if(!this.t[g]){return null}if(typeof(d)=="undefined"){d=-1}if(d<0){for(var f=0;f<this.list.childNodes.length;f++){if(d<0&&this.list.childNodes[f]._optId==g){d=f}}}var e={value:this.t[g].obj.getValue(this.t[g].item),text:this.t[g].obj.getText(this.t[g].item),text_input:this.t[g].obj.getText(this.t[g].item,true),text_option:this.t[g].obj.getText(this.t[g].item,null,true),css:this.t[g].obj.getCss(this.t[g].item),selected:(g==this.conf.last_selected),index:d};if(typeof(this.t[g].obj.getExtraData)=="function"){var c=this.t[g].obj.getExtraData(this.t[g].item);for(var b in c){if(typeof(e[b])=="undefined"){e[b]=c[b]}}}return e};dhtmlXCombo.prototype._getOptionProp=function(d,c,b){if(d!=null){var a=this._getOption(d);if(a!=null){return a[c]}}return b};dhtmlXCombo.prototype._getOptionId=function(b){var d=null;for(var a=0;a<this.list.childNodes.length;a++){if(d==null){var c=this.list.childNodes[a]._optId;if(b==this.t[c].obj.getValue(this.t[c].item)){d=c}}}return d};dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)};dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this._adjustBase();if(this._isListVisible()){this._hideList();this._showList()}};dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0)))+"px";this.base.firstChild.style.marginLeft=(this.conf.combo_image?this.conf.i_ofs+"px":"0px")};dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=(parseInt(a)||null)};dhtmlXCombo.prototype.setOptionIndex=function(c,a){if(isNaN(a)||a<0){return}var d=this.getOption(c);if(d==null){return}if(a==d.index){return}var b=this.list.childNodes[d.index];b.parentNode.removeChild(b);if(this.list.childNodes[a]!=null){this.list.insertBefore(b,this.list.childNodes[a])}else{this.list.appendChild(b)}b=null};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};dhtmlXCombo.prototype._mcMakeTemplate=function(i){var e="";var d="";this.conf.col_w=0;for(var f=0;f<i.length;f++){var a=Number(parseInt(i[f].width)||50);var c=(i[f].css||"");var g=(f==0&&window.dhx4.isIE6==true?"_first":"");d+="<div class='dhxcombo_cell"+g+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_cell_text'>"+(i[f].option||"&nbsp;")+"</div></div>";e+="<div class='dhxcombo_hdrcell"+g+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_hdrcell_text'>"+(i[f].header||"&nbsp;")+"</div></div>";this.conf.col_w+=a+1}var a=500;var b=document.createElement("DIV");b.style.position="absolute";b.style.top="10px";b.style.left=-a*2+"px";b.style.width=a+"px";b.style.height="50px";b.style.overflowY="scroll";b.innerHTML="<div>&nbsp;</div>";document.body.appendChild(b);this.conf.col_w+=a-b.firstChild.offsetWidth+10;b.parentNode.removeChild(b);b=null;this.conf.template.option=d;this._mcAttachHeader(e);this.list.className+=" dhxcombolist_multicolumn"};dhtmlXCombo.prototype._mcAttachHeader=function(a){if(this.hdr==null){this.hdr=document.createElement("DIV");this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr";this.hdr.style.display="none";this.list.parentNode.insertBefore(this.hdr,this.list);if(typeof(window.addEventListener)=="function"){this.hdr.addEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.attachEvent("onmousedown",this._doOnListMouseDown)}if(this.conf.opts_type=="checkbox"&&this.conf.combo_image==true){this.conf.combo_image=false;if(this.base.lastChild.className.match(/dhxcombo_top_image/)!=null){this.base.removeChild(this.base.lastChild)}this._adjustBase()}}this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+a+"</div>"};dhtmlXCombo.prototype._mcDetachHeader=function(){if(this.hdr!=null){if(typeof(window.addEventListener)=="function"){this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.detachEvent("onmousedown",this._doOnListMouseDown)}this.hdr.parentNode.removeChild(this.hdr);this.hdr=null}this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(a,g,e,c){var f=(a>=0&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null);if(f==null){return null}if(typeof(this.t[f].obj[g])!="function"){return null}var d=[this.t[f].item];for(var b=2;b<arguments.length;b++){d.push(arguments[b])}return this.t[f].obj[g].apply(this.t[f].obj,d)};function dhtmlXComboExtend(d,c){for(var b in dhtmlXCombo.prototype.modes[c]){if(typeof(dhtmlXCombo.prototype.modes[d][b])=="undefined"){dhtmlXCombo.prototype.modes[d][b]=dhtmlXCombo.prototype.modes[c][b]}}}dhtmlXCombo.prototype.modes.option={image:false,html:false,option_css:"dhxcombo_option_text",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText=b.css;a._conf.css=b.css}this.setText(a,b.text);return this},destruct:function(a){a._conf=null},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text)},setText:function(c,d,b){c._conf.text=d;var a=(typeof(d)=="object"?window.dhx4.template(c._tpl.option,this.replaceHtml(c._conf.text,b),true):window.dhx4.trim(this.replaceHtml(c._conf.text,b)||""));c.lastChild.innerHTML=(a.length==0?"&nbsp;":a)},getText:function(c,a,b){if(window.dhx4.s2b(a)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.input,c._conf.text,true)}if(window.dhx4.s2b(b)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.option,c._conf.text,true)}return c._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,b){a.className="dhxcombo_option"+(b?" dhxcombo_option_selected":"")},isSelected:function(a){return String(a.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(a){return{type:"option"}},replaceHtml:function(e,d){if(this.html==true){return e}if(typeof(d)=="undefined"||d==null){d={}}if(typeof(e)=="object"){var c={};for(var b in e){c[b]=(d[b]==true?e[b]:this.replaceHtml(e[b]))}}else{var c=(e||"").replace(/[\<\>\&\s]/g,function(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return a})}return c}};dhtmlXCombo.prototype.modes.checkbox={image:true,html:false,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(b,c){if(this.image_css_regexp==null){this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))}b._conf={value:c.value,css:"",checked:window.dhx4.s2b(c.checked)};b.className="dhxcombo_option";var a={};if(c.multicol==true){c.text.checkbox="<div class='"+String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"))+"'></div>&nbsp;";a.checkbox=true;b.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"}else{b.innerHTML="<div class='"+String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"))+"'></div><div class='"+this.option_css+"'>&nbsp;</div>"}if(c.css!=null){b.lastChild.style.cssText+=c.css;b._conf.css=c.css}this.setText(b,c.text,a);return this},setChecked:function(b,c){b._conf.checked=window.dhx4.s2b(c);var a=String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"));this._changeChbxCss(b.childNodes,a)},_changeChbxCss:function(a,b){for(var c=0;c<a.length;c++){if(a[c].tagName!=null&&a[c].className!=null&&a[c].className.match(this.image_css_regexp)!=null){a[c].className=b}else{if(a[c].childNodes.length>0){this._changeChbxCss(a[c].childNodes,b)}}}},isChecked:function(a){return(a._conf.checked==true)},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(e,d,f){var c=true;var b=(d.target||d.srcElement);while(c==true&&b!=null&&b!=e&&b.className!=null){if(b.className.match(this.image_css_regexp)!=null){var a=[e._conf.value,!e._conf.checked];if(f.callEvent("onBeforeCheck",a)===true){this.setChecked(e,!this.isChecked(e));f.callEvent("onCheck",a)}c=false;a=null}else{b=b.parentNode}}b=f=e=null;return c},getTopImage:function(b,a){return""},topImageClick:function(a,b){return true}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(a,b){this.doWithItem(a,"setChecked",b)};dhtmlXCombo.prototype.getChecked=function(a){var b=[];for(var c=0;c<this.list.childNodes.length;c++){if(this.isChecked(c)){b.push(this._getOptionProp(this.list.childNodes[c]._optId,"value",""))}}return b};dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")};dhtmlXCombo.prototype.modes.image={image:true,html:false,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText+=b.css;a._conf.css=b.css}this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis);return this},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis)},setImage:function(c,a,e,f,d,b){if(a!=null&&a.length>0){a=f+a}else{if(d!=null&&d.length>0){a=f+d}else{a=null}}if(e!=null&&e.length>0){e=f+e}else{if(b!=null&&b.length>0){e=f+b}else{if(b==true){e=a}else{e=null}}}c._conf.img=a;c._conf.img_dis=e;c.firstChild.style.backgroundImage=(a!=null?"url("+a+")":"none")},getExtraData:function(a){return{type:"image"}},getTopImage:function(d,c){var b=(c?"img":"img_dis");if(d!=null&&d._conf[b]!=null){return"<div class='"+this.image_css+"' style='background-image:url("+d._conf[b]+");'></div>"}return""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(a,b){if(a!=null){this.conf.img_def=a}if(b!=null){this.conf.img_def_dis=b}};dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a};function dhtmlXForm(e,d,f){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var c=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize=(a=="material"?"14px":(a=="dhx_terrace"?"13px":"12px"));this._updateBlocks();this.forEachItem(function(h){var g=c.getItemType(h);if(typeof(c.items[g])!="undefined"&&typeof(c.items[g].setSkin)=="function"){c.doWithItem(h,"setSkin",a)}})};this.skin=(f||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"material");this.separator=",";this.live_validate=false;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=(typeof(e)=="object"?e:document.getElementById(e));if(!e._isNestedForm){this._parentForm=true;this.cont.style.fontSize=(this.skin=="material"?"14px":(this.skin=="dhx_terrace"?"13px":"12px"));this.cont.className="dhxform_obj_"+this.skin;this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()};this.getForm=function(){return this};this.cont.onkeypress=function(g){g=(g||event);if(g.keyCode==13){var a=(g.target||g.srcElement);if(typeof(a.tagName)!="undefined"&&String(a.tagName).toLowerCase()=="textarea"&&!g.ctrlKey){return}c.callEvent("onEnter",[])}}}this.b_index=null;this.base=[];this._prepare=function(n,o){if(this.b_index==null){this.b_index=0}else{this.b_index++}var h=null;var g=null;if(o!=null){if(o<0){o=0}var l=0;for(var a=0;a<this.cont.childNodes.length;a++){for(var m=0;m<this.cont.childNodes[a].childNodes.length;m++){if(g==null&&this.cont.childNodes[a].childNodes[m]._isNestedForm!=true){if(l==o){h=this.cont.childNodes[a].nextSibling;g=this.cont.childNodes[a].childNodes[m]}l++}}}}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";if(typeof(n)!="undefined"){this.base[this.b_index].style.cssText+=" margin-left:"+n+"px!important;"}if(h!=null){this.cont.insertBefore(this.base[this.b_index],h);h=null}else{this.cont.appendChild(this.base[this.b_index])}if(g!=null){while(g!=null){var j=g;g=g.nextSibling;this.base[this.b_index].appendChild(j);j=null}}};this.setSizes=function(){};this._mergeSettings=function(m){var h=-1;var j={type:"settings"};for(var g in this.idef){j[g]=this.idef[g]}for(var l=0;l<m.length;l++){if(typeof(m[l])!="undefined"&&m[l].type=="settings"){for(var g in m[l]){j[g]=m[l][g]}h=l}}m[h>=0?h:m.length]=j;return m};this._genStr=function(a){var g="dhxId_";var i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<a;h++){g+=i.charAt(Math.floor(Math.random()*i.length))}return g};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=(this._parentForm?this._genStr(12)+"_":e._rId);this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(v,j,o,m,t,x,s){if(this.items[v]._index){this.getForm()._indexId.push(j);this.getForm()._idIndex[j]={ind:this.getForm()._indexId.length-1}}if(!v){v=this._type}if(v=="list"&&t!=null&&this.itemPull[this.idPrefix+t]!=null&&typeof(this.itemPull[this.idPrefix+t]._addSubListNode)=="function"){var u=this.itemPull[this.idPrefix+t]._addSubListNode()}else{if(v=="newcolumn"){var u={}}else{if(this.b_index==null){this._prepare()}var l=this.base[this.b_index];var g=null;if(typeof(x)!="undefined"&&!isNaN(x)&&v!="list"){x=Math.max(parseInt(x),0)+1;for(var z=0;z<this.cont.childNodes.length;z++){for(var h=0;h<this.cont.childNodes[z].childNodes.length;h++){if(g==null&&this.cont.childNodes[z].childNodes[h]._isNestedForm!=true){x--;if(x==0){g=this.cont.childNodes[z].childNodes[h];l=this.cont.childNodes[z]}}}}}else{if(v=="list"){for(var y in this.itemPull){if(y==this.idPrefix+j){g=this.itemPull[y].nextSibling;if(this.itemPull[y]._listBase!=null&&this.itemPull[y]._listBase.length>0){g=this.itemPull[y]._listBase[this.itemPull[y]._listBase.length-1]}}}}}var u=document.createElement("DIV");if(s==true&&g!=null){g=g.nextSibling}if(g!=null){l.insertBefore(u,g)}else{l.appendChild(u)}}}u._idd=j;u._rId=this._rId;if(typeof(u.style)!="undefined"){if(typeof(o.offsetLeft)=="undefined"&&this.idef.offsetLeft>0){o.offsetLeft=this.idef.offsetLeft}if(typeof(o.offsetTop)=="undefined"&&this.idef.offsetTop>0){o.offsetTop=this.idef.offsetTop}var n="";if(typeof(o.offsetLeft)!="undefined"){n=" padding-left:0px!important;"}if(typeof(o.offsetTop)!="undefined"){n+=" padding-top:"+o.offsetTop+"px!important;"}u.style.cssText+=n}if(v=="block"){if(isNaN(o.blockOffset)){o.blockOffset=this.idef.blockOffset}}if(v=="list"){if(typeof(u._ofsNested)=="undefined"){u._ofsNested=this.idef_const.offsetNested}if(m!=null){u._sId=m}var r=this.items[v].render(u,this.skin);if(!this.itemPull[this.idPrefix+j]._listObj){this.itemPull[this.idPrefix+j]._listObj=[]}if(!this.itemPull[this.idPrefix+j]._list){this.itemPull[this.idPrefix+j]._list=[]}if(!this.itemPull[this.idPrefix+j]._listBase){this.itemPull[this.idPrefix+j]._listBase=[]}(this.itemPull[this.idPrefix+j]._listObj).push(r[0]);(this.itemPull[this.idPrefix+j]._list).push(r[1]);(this.itemPull[this.idPrefix+j]._listBase).push(u);r[1].checkEvent=function(a){return c.checkEvent(a)};r[1].callEvent=function(a,p){return c.callEvent(a,p)};r[1].getForm=function(){return c.getForm()};r[1]._initObj(this._mergeSettings(o));if(u._inBlcok){u.className+=" in_block"}return r[1]}if(v=="newcolumn"){this._prepare(o.offset,x);return}if(v=="label"&&this._ic++==0){o._isTopmost=true}o.position=this.apos_css[(!o.position||!this.apos_css[o.position]?this.idef.position:o.position)];u.className=o.position+(typeof(o.className)=="string"?" "+o.className:"");if(!o.labelWidth){o.labelWidth=this.idef.labelWidth}if(!o.labelHeight){o.labelHeight=this.idef.labelHeight}if(typeof(o.wrap)!="undefined"){o.wrap=window.dhx4.s2b(o.wrap)}o.labelAlign=(this.align_css[o.labelAlign]?this.align_css[o.labelAlign]:this.align_css[this.idef.labelAlign]);o.inputWidth=(o.width?o.width:(o.inputWidth?o.inputWidth:this.idef.inputWidth));if(!o.inputHeight){o.inputHeight=this.idef.inputHeight}if(typeof(o.note)!="undefined"){if(o.note.length!=null&&o.note[0]!=null){o.note=o.note[0]}if(typeof(o.note.width)=="undefined"){o.note.width=this.idef.noteWidth}if(o.note.width=="auto"){o.note.width=o.inputWidth}}u.checkEvent=function(a){return c.checkEvent(a)};u.callEvent=function(a,p){return c.callEvent(a,p)};u.getForm=function(){return c.getForm()};u._autoCheck=function(a){c._autoCheck(a)};if(typeof(o.readonly)=="string"){o.readonly=window.dhx4.s2b(o.readonly)}if(typeof(o.autoStart)=="string"){o.autoStart=window.dhx4.s2b(o.autoStart)}if(typeof(o.autoRemove)=="string"){o.autoRemove=window.dhx4.s2b(o.autoRemove)}if(typeof(o.titleScreen)=="string"){o.titleScreen=window.dhx4.s2b(o.titleScreen)}if(typeof(o.info)=="string"){o.info=window.dhx4.s2b(o.info)}if(typeof(o.hidden)=="string"){o.hidden=window.dhx4.s2b(o.hidden)}if(typeof(o.checked)=="string"){o.checked=window.dhx4.s2b(o.checked)}if(typeof(o.userdata)!="undefined"){for(var y in o.userdata){this.getForm().setUserData(j,y,o.userdata[y])}}if(o.validate){if(typeof(o.validate!="undefined")&&(typeof(o.validate)=="function"||typeof(window[o.validate])=="function")){u._validate=[o.validate]}else{u._validate=String(o.validate).split(this.separator)}}if(typeof(o.required)!="undefined"){if(typeof(o.required)=="string"){o.required=window.dhx4.s2b(o.required)}u._required=(o.required==true)}if(u._required){if(!u._validate){u._validate=[]}var i=false;for(h=0;h<u._validate.length;h++){i=(i||(u._validate[h]=="NotEmpty"))}if(!i){u._validate.push("NotEmpty")}}u._ll=(o.position==this.apos_css["label-left"]||o.position==this.apos_css["label-top"]);this.objPull[this.idPrefix+j]=this.items[v].render(u,o);this.itemPull[this.idPrefix+j]=u};this._initObj=function(j,h){if(typeof(j.data)!="undefined"){var l=null;if(typeof(h)!="undefined"){l=h.match(/(\?|\&)id\=([a-z0-9_\-]*)/i);if(l!=null&&l[0]!=null){l=l[0].split("=")[1]}}if(this.callEvent("onBeforeDataLoad",[l,window.dhx4._copyObj(j.data)])===true){this.formId=l;this._last_load_data=j;this.setFormData(j.data);this.resetDataProcessor("updated")}return}this._prepare();for(var i=0;i<j.length;i++){if(typeof(j[i])!="undefined"&&j[i].type=="settings"){for(var g in j[i]){this.idef[g]=j[i][g]}}}for(var i=0;i<j.length;i++){this._prepareItem(j[i])}this._autoCheck()};this._prepareItem=function(j,n,i){var h=(j!=null&&j.type!=null?j.type:"");if(this.items[h]){if(!j.name){j.name=this._genStr(12)}var m=j.name;if(this.objPull[this.idPrefix+m]!=null||h=="radio"){m=this._genStr(12)}var l=j;l.label=l.label||"";l.value=l.value;l.checked=window.dhx4.s2b(l.checked);l.disabled=window.dhx4.s2b(l.disabled);l.name=l.name||this._genStr(12);l.options=l.options||[];l.rows=l.rows||"none";l.uid=this._genStr(12);this._addItem(h,m,l,null,null,n,i);n=null;if(this._parentEnabled===false){this._disableItem(m)}for(var g=0;g<l.options.length;g++){if(l.options[g].list!=null){if(!l.options[g].value){l.options[g].value=this._genStr()}var a=this._addItem("list",m,l.options[g].list,l.options[g].value,null);a._subSelect=true;a._subSelectId=l.options[g].value}}if(j.list!=null){if(!j.listParent){j.listParent=l.name}var a=this._addItem("list",m,j.list,null,j.listParent)}}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(s,g){if(typeof(g)=="undefined"){g=true}if(g){var u=s.getElementsByTagName("items");u=(u!=null&&u[0]!=null?u[0]:null);var h=s.getElementsByTagName("data");h=(h!=null&&h[0]!=null?h[0]:null)}else{u=s}var p=(g?[]:{});if(u!=null){for(var j=0;j<u.childNodes.length;j++){if(typeof(u.childNodes[j].tagName)!="undefined"){var l=u.childNodes[j].tagName;if(this._xmlSubItems[l]!=null){var m=this._xmlSubItems[l];if(typeof(p[m])=="undefined"){p[m]=[]}var r=u.childNodes[j];var o={};for(var z=0;z<r.attributes.length;z++){var v=r.attributes[z].name;var t=r.attributes[z].value;o[v]=t}if(m=="note"){o.text=r.firstChild.nodeValue}if(m=="_userdata"){o.value=(r.firstChild!=null&&r.firstChild.nodeValue!=null?r.firstChild.nodeValue:"")}var n=this._xmlToObject(r,false);for(var x in n){if(x=="_userdata"){if(!o.userdata){o.userdata={}}for(var z=0;z<n[x].length;z++){o.userdata[n[x][z].name]=n[x][z].value}}else{o[x]=n[x]}}r=null;if(g){p.push(o)}else{p[m].push(o)}}}}}if(h!=null){p={data:{}};for(var j=0;j<h.childNodes.length;j++){if(typeof(h.childNodes[j].tagName)!="undefined"){var i=h.childNodes[j].tagName;var y=(h.childNodes[j].firstChild!=null?h.childNodes[j].firstChild.nodeValue:"");p.data[i]=y}}}return p};this._autoCheck=function(l){if(this._locked===true){l=false}else{if(typeof(l)=="undefined"){l=true}}for(var i in this.itemPull){var m=(l&&(this.itemPull[i]._udis!==true));this[m?"_enableItem":"_disableItem"](this.itemPull[i]._idd);if(this.getForm()._idIndex[this.itemPull[i]._idd]!=null){this.getForm()._idIndex[this.itemPull[i]._idd].enabled=m}var h=(m&&(typeof(this.itemPull[i]._checked)=="boolean"?this.itemPull[i]._checked:true));if(this.itemPull[i]._list){for(var o=0;o<this.itemPull[i]._list.length;o++){var n=true;if(this.itemPull[i]._list[o]._subSelect==true){n=false;var j=this.getItemValue(this.itemPull[i]._idd);if(!(typeof(j)=="object"&&typeof(j.length)=="number")){j=[j]}for(var g=0;g<j.length;g++){n=(j[g]==this.itemPull[i]._list[o]._subSelectId)||n}this.itemPull[i]._listObj[o][n?"show":"hide"](this.itemPull[i]._listBase[o])}this.itemPull[i]._list[o]._autoCheck(h&&n)}}}};this.doWithItem=function(i,g,p,o,n,m){if(typeof(i)=="object"){var s=i[0];var r=i[1];var t=null;var l=null;for(var j in this.itemPull){if((this.itemPull[j]._value==r||r===null)&&this.itemPull[j]._group==s){return this.objPull[j][g](this.itemPull[j],p,o,n,m)}if(this.itemPull[j]._list!=null&&!l){for(var h=0;h<this.itemPull[j]._list.length;h++){l=this.itemPull[j]._list[h].doWithItem(i,g,p,o,n)}}}if(l!=null){return l}else{if(g=="getType"){return this.doWithItem(i[0],"getType")}}}else{if(!this.itemPull[this.idPrefix+i]){var l=null;for(var j in this.itemPull){if(this.itemPull[j]._list&&!l){for(var h=0;h<this.itemPull[j]._list.length;h++){if(l==null){l=this.itemPull[j]._list[h].doWithItem(i,g,p,o,n,m)}}}}return l}else{var u=this.objPull[this.idPrefix+i];if(u&&u[g]){return u[g](this.itemPull[this.idPrefix+i],p,o,n,m)}}}};this._removeItem=function(g,a){if(a!=null){g=this.doWithItem([g,a],"destruct")}else{this.doWithItem(g,"destruct")}this._clearItemData(g)};this._clearItemData=function(i){if(this.itemPull[this.idPrefix+i]){i=this.idPrefix+i;try{this.objPull[i]=null;this.itemPull[i]=null;delete this.objPull[i];delete this.itemPull[i]}catch(h){}}else{for(var a in this.itemPull){if(this.itemPull[a]._list){for(var g=0;g<this.itemPull[a]._list.length;g++){this.itemPull[a]._list[g]._clearItemData(i)}}}}};this.isItem=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isExist")};this.getItemType=function(g,a){g=[g,(a||null)];return this.doWithItem(g,"getType")};this.forEachItem=function(h){for(var g in this.objPull){if(this.objPull[g].t=="radio"){h(this.itemPull[g]._group,this.itemPull[g]._value)}else{h(String(g).replace(this.idPrefix,""))}if(this.itemPull[g]._list){for(var i=0;i<this.itemPull[g]._list.length;i++){this.itemPull[g]._list[i].forEachItem(h)}}}};this.setItemLabel=function(h,a,g){if(g!=null){h=[h,a]}else{g=a}this.doWithItem(h,"setText",g)};this.getItemLabel=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"getText")};this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"check");this._autoCheck()};this.uncheckItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"unCheck");this._autoCheck()};this.isItemChecked=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(l,j){for(var g in this.itemPull){if(this.itemPull[g]._group==l&&(j==null||this.itemPull[g]._value==j)){return this.itemPull[g]._idd}if(this.itemPull[g]._list!=null){for(var i=0;i<this.itemPull[g]._list.length;i++){var h=this.itemPull[g]._list[i]._getRGroup(l,j);if(h!=null){return h}}}}return null};this.setItemValue=function(g,a){this.resetValidateCss(g,a);if(this.getItemType(g)=="radio"){if(this._getRGroup(g,a)!=null){this.checkItem(g,a)}else{this.uncheckItem(g,this.getCheckedValue(g))}return null}return this.doWithItem(g,"setValue",a)};this.getItemValue=function(g,a){if(this.getItemType(g)=="radio"){return this.getCheckedValue(g)}return this.doWithItem(g,"getValue",a)};this.updateValues=function(){this._updateValues()};this.showItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"show")};this.hideItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"hide")};this.isItemHidden=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(g,a){this.doWithItem(g,"setWidth",a)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(g,a){this.doWithItem(g,"setHeight",a)};this.setItemFocus=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"setFocus")};this._updateValues=function(){for(var g in this.itemPull){if(this.objPull[g]&&typeof(this.objPull[g].updateValue)=="function"){this.objPull[g].updateValue(this.itemPull[g])}if(this.itemPull[g]._list){for(var h=0;h<this.itemPull[g]._list.length;h++){this.itemPull[g]._list[h]._updateValues()}}}};this._getItemByName=function(j){for(var g in this.itemPull){if(this.itemPull[g]._idd==j){return this.itemPull[g]}if(this.itemPull[g]._list!=null){for(var i=0;i<this.itemPull[g]._list.length;i++){var h=this.itemPull[g]._list[i]._getItemByName(j);if(h!=null){return h}}}}return null};this._resetValidateCss=function(a){a.className=(a.className).replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,i,h){var g=this._getItemByName(a);if(!g){return}if(g._vcss!=null){this._resetValidateCss(g)}g._vcss=(typeof(h)=="string"?h:"validate_"+(i===true?"ok":"error"));g.className+=" "+g._vcss};this.resetValidateCss=function(h){for(var g in this.itemPull){if(this.itemPull[g]._vcss!=null){this._resetValidateCss(this.itemPull[g])}if(this.itemPull[g]._list!=null){for(var i=0;i<this.itemPull[g]._list.length;i++){this.itemPull[g]._list[i].resetValidateCss()}}}};this._validateLoop=function(h){for(var g in this.objPull){h(String(g).replace(this.idPrefix,""));if(this.itemPull[g]._list){for(var i=0;i<this.itemPull[g]._list.length;i++){this.itemPull[g]._list[i]._validateLoop(h)}}}};this.validate=function(g){if(this.callEvent("onBeforeValidate",[])==false){return}var a=true;this._validateLoop(function(i,j){var h=c.doWithItem(i,"_validate");if(typeof(h)!="boolean"){h=true}a=h&&a},true);this.callEvent("onAfterValidate",[a]);return a};this.validateItem=function(a,g){if(typeof(g)!="undefined"){a=[a,g]}return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=(a==true)};this.setReadonly=function(g,a){this.doWithItem(g,"setReadonly",a)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(g){for(var i=0;i<this._indexId.length;i++){var a=true;if(g==true){var h=this.getItemType(this._indexId[i]);if(!dhtmlXForm.prototype.items[h].setFocus){a=false}}if(a&&this._idIndex[this._indexId[i]].enabled){return this._indexId[i]}}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(true);if(a!=null){this.setItemFocus(a)}};this.enableItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"userEnable");this._autoCheck()};this.disableItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"userDisable");this._autoCheck()};this.isItemEnabled=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isUserEnabled")};this.clear=function(){var h={};this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");for(var i in this.itemPull){var j=this.itemPull[i]._idd;if(this.itemPull[i]._type=="ch"){this.uncheckItem(j)}if(this.itemPull[i]._type in {ta:1,editor:1,calendar:1,pw:1,hd:1}){this.setItemValue(j,"")}if(this.itemPull[i]._type=="combo"){this.itemPull[i]._apiChange=true;var o=this.getCombo(j);o.selectOption(0);o=null;this.itemPull[i]._apiChange=false}if(this.itemPull[i]._type=="se"){var m=this.getOptions(j);if(m.length>0){m[0].selected=true}}if(this.itemPull[i]._type=="ra"){var l=this.itemPull[i]._group;if(!h[l]){this.checkItem(l,this.doWithItem(j,"_getFirstValue"));h[l]=true}}if(this.itemPull[i]._list){for(var n=0;n<this.itemPull[i]._list.length;n++){this.itemPull[i]._list[n].clear()}}if(this["setFormData_"+this.itemPull[i]._type]){this["setFormData_"+this.itemPull[i]._type](j,"")}}h=null;if(this._parentForm){this._autoCheck()}this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var g in this.objPull){this._removeItem(String(g).replace(this.idPrefix,""))}if(this._ccTm){window.clearTimeout(this._ccTm)}this._formLS=null;for(var h=0;h<this.base.length;h++){while(this.base[h].childNodes.length>0){this.base[h].removeChild(this.base[h].childNodes[0])}if(this.base[h].parentNode){this.base[h].parentNode.removeChild(this.base[h])}this.base[h]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(var g in this){this[g]=null}c=null};for(var b in this.items){this.items[b].t=b;if(typeof(this.items[b]._index)=="undefined"){this.items[b]._index=true}if(!this.items[b].show){this.items[b].show=function(a){a.style.display="";if(a._listObj){for(var g=0;g<a._listObj.length;g++){a._listObj[g].show(a._listBase[g])}}}}if(!this.items[b].hide){this.items[b].hide=function(a){a.style.display="none";if(a._listObj){for(var g=0;g<a._listObj.length;g++){a._listObj[g].hide(a._listBase[g])}}}}if(!this.items[b].isHidden){this.items[b].isHidden=function(a){return(a.style.display=="none")}}if(!this.items[b].userEnable){this.items[b].userEnable=function(a){a._udis=false}}if(!this.items[b].userDisable){this.items[b].userDisable=function(a){a._udis=true}}if(!this.items[b].isUserEnabled){this.items[b].isUserEnabled=function(a){return(a._udis!==true)}}if(!this.items[b].getType){this.items[b].getType=function(){return this.t}}if(!this.items[b].isExist){this.items[b].isExist=function(){return true}}if(!this.items[b]._validate){this.items[b]._validate=function(h){if(!h._validate||!h._enabled){return true}if(h._type=="ch"||h._type=="ra"){var l=(this.isChecked(h)?this.getValue(h):0);if(h._type=="ra"&&typeof(l)=="undefined"){l=0}}else{var l=this.getValue(h)}var g=true;for(var j=0;j<h._validate.length;j++){var a="is"+h._validate[j];if((l==null||l.length==0)&&a!="isNotEmpty"&&h._type!="container"){}else{var i=dhtmlxValidation[a];if(h._type=="container"&&typeof(i)=="function"){i=function(){return true}}if(typeof(i)!="function"&&typeof(h._validate[j])=="function"){i=h._validate[j]}if(typeof(i)!="function"&&typeof(window[h._validate[j]])=="function"){i=window[h._validate[j]]}g=((typeof(i)=="function"?i(l,h._idd):new RegExp(h._validate[j]).test(l))&&g);i=null}}if(!(h.callEvent("onValidate"+(g?"Success":"Error"),[h._idd,l,g])===false)){h.getForm().setValidateCss(h._idd,g)}return g}}}this._locked=false;this._doLock=function(g){var a=(g===true?true:false);if(this._locked==a){return}else{this._locked=a}this._autoCheck(!this._locked)};this.lock=function(){this._doLock(true)};this.unlock=function(){this._doLock(false)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(i,g,a,h){return this.doWithItem(i,"setNumberFormat",g,a,h)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:true,data:true});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(a,g){this.callEvent("onButtonClick",[a,g])});this._updateBlocks=function(){this.forEachItem(function(a){if(c.getItemType(a)=="block"||c.getItemType(a)=="combo"){c.doWithItem(a,"_setCss",c.skin,c.cont.style.fontSize)}})};this._isObj=function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")};this._copyObj=function(i){if(this._isObj(i)){var h={};for(var g in i){if(typeof(i[g])=="object"&&i[g]!=null){h[g]=this._copyObj(i[g])}else{h[g]=i[g]}}}else{var h=[];for(var g=0;g<i.length;g++){if(typeof(i[g])=="object"&&i[g]!=null){h[g]=this._copyObj(i[g])}else{h[g]=i[g]}}}return h};if(d!=null&&typeof(d)=="object"){this._initObj(this._copyObj(d))}if(this._parentForm){this._updateBlocks()}this._ccActive=false;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={getInput:function(a){return a.getElementsByTagName("INPUT")[0]},render:function(a,b){a._type="ch";a._enabled=true;a._checked=false;a._value=(typeof(b.value)=="undefined"?null:String(b.value));a._ro=(b.readonly==true);if(b._autoInputWidth!==false){b.inputWidth=14}this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",true,true,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var c=document.createElement("DIV");c.className="dhxform_img chbx0";a.appendChild(c);if(!isNaN(b.inputLeft)){a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+"px"}if(!isNaN(b.inputTop)){a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px"}a.childNodes[a._ll?1:0].appendChild(c);a.childNodes[a._ll?1:0].firstChild.value=String(b.value);a._updateImgNode=function(e,f){var d=e.childNodes[e._ll?1:0].lastChild;d.className=(f?"dhxform_actv_c":"dhxform_img")+" "+(e._checked?"chbx1":"chbx0");e=d=null};a._doOnFocus=function(d){d.getForm().callEvent("onFocus",[d._idd])};a._doOnBlur=function(d){d.getForm().callEvent("onBlur",[d._idd])};a._doOnKeyUpDown=function(e,d){this.callEvent(e,[this.childNodes[this._ll?0:1].childNodes[0],d,this._idd])};if(b.checked==true){this.check(a)}if(b.hidden==true){this.hide(a)}if(b.disabled==true){this.userDisable(a)}this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(b,c){var a=document.createElement("DIV");a.className="dhxform_label "+c.labelAlign;if(c.wrap==true){a.style.whiteSpace="normal"}if(b._ll){b.insertBefore(a,b.firstChild)}else{b.appendChild(a)}if(typeof(c.tooltip)!="undefined"){a.title=c.tooltip}a.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(b._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(c.labelWidth)){a.firstChild.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.firstChild.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}},doAddInput:function(o,d,b,j,l,e,f){var a=document.createElement("DIV");a.className="dhxform_control";if(o._ll){o.appendChild(a)}else{o.insertBefore(a,o.firstChild)}var n=document.createElement(b);n.className=f;n.name=o._idd;n._idd=o._idd;n.id=d.uid;if(typeof(j)=="string"){n.type=j}if(b=="INPUT"||b=="TEXTAREA"){n.onkeyup=function(i){i=i||event;o.callEvent("onKeyUp",[this,i,this._idd])};n.onkeydown=function(i){i=i||event;o.callEvent("onKeyDown",[this,i,this._idd])}}if(b=="SELECT"&&d.type=="select"&&o.getForm().skin=="material"){if(window.dhx4.isOpera||window.dhx4.isChrome){n.className+=" dhxform_arrow_fix_webkit"}else{if(window.dhx4.isEdge){n.className+=" dhxform_arrow_fix_edge"}else{if(window.dhx4.isFF){n.className+=" dhxform_fix_ff"}}}}a.appendChild(n);if(l){if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}}var m="";var g=false;if(e){if(!isNaN(d.inputWidth)){m+="width:"+parseInt(d.inputWidth)+"px;";g=true}if(!isNaN(d.inputHeight)){m+="height:"+parseInt(d.inputHeight)+"px;"}}if(typeof(d.style)=="string"){m+=d.style}n.style.cssText=m;if(d.maxLength){n.setAttribute("maxLength",d.maxLength)}if(d.connector){n.setAttribute("connector",d.connector)}var c=(dhtmlXForm.prototype.items[this.t]!=null?dhtmlXForm.prototype.items[this.t]._dimFix==true:false);if(g&&({input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]==1||c)){if(dhtmlXForm.prototype.items[this.t]._dim==null){dhtmlXForm.prototype.items[this.t]._dim=o.getForm()._checkDim(a,n)}n.style.width=parseInt(n.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if(typeof(d.note)=="object"){var h=document.createElement("DIV");h.className="dhxform_note";h.style.width=(isNaN(d.note.width)?n.offsetWidth:parseInt(d.note.width))+"px";h._w=d.note.width;h.innerHTML=d.note.text;a.appendChild(h);h=null}if(d.readonly){this.setReadonly(o,true)}if(d.disabled==true){this.userDisable(o)}if(d.hidden==true&&this.t!="combo"){this.hide(o)}},doUnloadNestedLists:function(a){if(!a._list){return}for(var b=0;b<a._list.length;b++){a._list[b].unload();a._list[b]=null;a._listObj[b]=null;a._listBase[b].parentNode.removeChild(a._listBase[b]);a._listBase[b]=null}a._list=null;a._listObj=null;a._listBase=null},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAttachEvents:function(b){var a=this;b.childNodes[b._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}var c=(d.target||d.srcElement);if(!this.parentNode._enabled||this.parentNode._ro||(typeof(c.className)!="undefined"&&c.className=="dhxform_note")){d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}a.doClick(this.parentNode)};b.childNodes[b._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}if(!this.parentNode.parentNode._enabled){d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}var c=d.target||d.srcElement;if(typeof(c.className)!="undefined"&&c.className=="dhxform_info"){this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,d]);d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}a.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(!a._enabled||a._ro){return}if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])!==true){return}}this.setChecked(a,!a._checked);a._autoCheck();a.callEvent("onChange",[a._idd,a._value,a._checked])},doCheckValue:function(a){if(a._checked&&a._enabled){a.childNodes[a._ll?1:0].firstChild.name=String(a._idd);a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)}else{a.childNodes[a._ll?1:0].firstChild.name="";a.childNodes[a._ll?1:0].firstChild.value=""}},setChecked:function(a,b){a._checked=(b===true?true:false);a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,true)},unCheck:function(a){this.setChecked(a,false)},isChecked:function(a){return a._checked},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;if(a._updateImgNode!=null){a._updateImgNode(a,false)}a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,b){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,b){this.setChecked(a,(b===true||parseInt(b)==1||b=="true"||a._value===b))},getValue:function(a,b){if(b=="realvalue"){return a._value}return((typeof(a._value)=="undefined"||a._value==null)?(a._checked?1:0):a._value)},setReadonly:function(a,b){a._ro=(b===true)},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(c,d,b){c._type="ra";c._enabled=true;c._checked=false;c._group=d.name;c._value=d.value;c._uid=b;c._ro=(d.readonly==true);c._rName=c._rId+c._group;this.r[c._idd]=c;d.inputWidth=14;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","TEXT",true,true,"dhxform_textarea");c.childNodes[c._ll?1:0].className+=" dhxform_img_node";var e=document.createElement("DIV");e.className="dhxform_img rdbt0";c.appendChild(e);if(!isNaN(d.inputLeft)){c.childNodes[c._ll?1:0].style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.childNodes[c._ll?1:0].style.top=parseInt(d.inputTop)+"px"}c.childNodes[c._ll?1:0].appendChild(e);c.childNodes[c._ll?1:0].firstChild.name="";c.childNodes[c._ll?1:0].firstChild.value="";c._updateImgNode=function(g,h){var f=g.childNodes[g._ll?1:0].lastChild;f.className=(h?"dhxform_actv_r":"dhxform_img")+" "+(g._checked?"rdbt1":"rdbt0");g=f=null};c._doOnFocus=function(f){f.getForm().callEvent("onFocus",[f._group,f._value])};c._doOnBlur=function(f){f.getForm().callEvent("onBlur",[f._group,f._value])};c._doOnKeyUpDown=function(g,f){this.callEvent(g,[this.childNodes[this._ll?0:1].childNodes[0],f,this._group,this._value])};if(this.input[c._rName]==null){var a=document.createElement("INPUT");a.type="HIDDEN";a.name=d.name;a.firstValue=c._value;c.appendChild(a);this.input[c._rName]=a}if(!this.firstValue[c._rName]){this.firstValue[c._rName]=d.value}if(d.checked==true){this.check(c)}if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}this.doAttachEvents(c);return this},destruct:function(d,e){if(d.lastChild==this.input[d._rName]){var c=false;for(var b in this.r){if(!c&&this.r[b]._group==d._group&&this.r[b]._idd!=d._idd){this.r[b].appendChild(this.input[d._rName]);c=true}}if(!c){this.input[d._rName].parentNode.removeChild(this.input[d._rName]);this.input[d._rName]=null;this.firstValue[d._rName]=null}}this.r[d._idd]=null;delete this.r[d._idd];d._doOnFocus=d._doOnBlur=d._updateImgNode=null;this.doUnloadNestedLists(d);this.doDestruct(d);var f=d._idd;d=null;return f},doClick:function(b){b.childNodes[b._ll?0:1].childNodes[0].focus();if(!(b._enabled&&!b._checked)){return}if(b._ro){return}var a=[b._group,b._value,true];if(b.checkEvent("onBeforeChange")){if(b.callEvent("onBeforeChange",a)!==true){return}}this.setChecked(b,true);b.getForm()._autoCheck();b.callEvent("onChange",a)},doCheckValue:function(c){var d=null;for(var b in this.r){if(this.r[b]._checked&&this.r[b]._group==c._group&&this.r[b]._rId==c._rId){d=this.r[b]._value}}if(d!=null&&this.r[b]._enabled){this.input[c._rName].name=String(c._group);this.input[c._rName].value=d}else{this.input[c._rName].name="";this.input[c._rName].value=""}this.input[c._rName]._value=d},setChecked:function(e,f){f=(f===true);for(var b in this.r){if(this.r[b]._group==e._group&&this.r[b]._rId==e._rId){var d=false;if(this.r[b]._idd==e._idd){if(this.r[b]._checked!=f){this.r[b]._checked=f;d=true}}else{if(this.r[b]._checked){this.r[b]._checked=false;d=true}}if(d){var c=this.r[b].childNodes[this.r[b]._ll?1:0].childNodes[1];c.className=c.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[b]._checked?" rdbt1":" rdbt0");c=null}}}this.doCheckValue(e)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,b){}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.select={render:function(a,b){a._type="se";a._enabled=true;a._value=null;a._newValue=null;this.doAddLabel(a,b);this.doAddInput(a,b,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,b);if(b.connector!=null){this.doLoadOptsConnector(a,b.connector)}if(typeof(b.value)!="undefined"&&b.value!=null){this.setValue(a,b.value)}return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAddLabel:function(b,c){var a=document.createElement("DIV");a.className="dhxform_label "+c.labelAlign;a.innerHTML="<label for='"+c.uid+"'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(b._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(c.wrap==true){a.style.whiteSpace="normal"}if(typeof(c.tooltip)!="undefined"){a.title=c.tooltip}b.appendChild(a);if(typeof(c.label)=="undefined"||c.label==null||c.label.length==0){a.style.display="none"}if(!isNaN(c.labelWidth)){a.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}if(c.info){a.onclick=function(f){f=f||event;var d=f.target||f.srcElement;if(typeof(d.className)!="undefined"&&d.className=="dhxform_info"){this.parentNode.callEvent("onInfo",[this.parentNode._idd,f]);f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}}}},doAttachEvents:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onclick=function(){b.doOnChange(this)};a.onkeydown=function(d){d=d||event;b.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,d,this.parentNode.parentNode._idd])};a.onchange=function(){b.doOnChange(this)};a.onkeyup=function(d){d=d||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,d,this.parentNode.parentNode._idd])};a=null;this.doAttachChangeLS(c)},doAttachChangeLS:function(b){var a=b.childNodes[b._ll?1:0].childNodes[0];a.onfocus=function(){var c=this.parentNode.parentNode;c.getForm()._ccActivate(c._idd,this,c.getForm().getItemValue(c._idd,true));c.getForm().callEvent("onFocus",[c._idd]);c=null};a.onblur=function(){var c=this.parentNode.parentNode;c.getForm()._ccDeactivate(c._idd);c.getForm().callEvent("onBlur",[c._idd]);c=null};a=null},doValidate:function(a){if(a.getForm().live_validate){this._validate(a)}},doLoadOpts:function(g,e,i){var h=g.childNodes[g._ll?1:0].childNodes[0];var a=e.options;var d=false;for(var b=0;b<a.length;b++){var f=a[b].text||a[b].label;if(!f||typeof(f)=="undefined"){f=""}var c=new Option(f,a[b].value);if(typeof(a[b].img_src)=="string"){c.setAttribute("img_src",a[b].img_src)}h.options.add(c);if(typeof(a[b].selected)!="undefined"&&window.dhx4.s2b(a[b].selected)==true){c.selected=true;g._value=a[b].value;d=true}if(typeof(a[b].checked)!="undefined"&&window.dhx4.s2b(a[b].checked)==true){c.setAttribute("checked","1")}if(typeof(a[b].img)!="undefined"){c.setAttribute("img",a[b].img)}if(typeof(a[b].img_dis)!="undefined"){c.setAttribute("img_dis",a[b].img_dis)}if(typeof(a[b].css)!="undefined"){c.setAttribute("css",a[b].css)}}if(!d&&h.selectedIndex>=0){g._value=h.options[h.selectedIndex].value}if(i===true){g.callEvent("onOptionsLoaded",[g._idd])}this._checkNoteWidth(g)},doLoadOptsConnector:function(c,a){var b=this;c._connector_working=true;window.dhx4.ajax.get(a,function(h){var e=h.xmlDoc.responseText;if(e.indexOf("{")===0){var j=JSON.parse(e);b.doLoadOpts(c,j,true)}else{h=h.xmlDoc.responseXML;if(h==null){return}var d=h.getElementsByTagName("data");if(d==null||d[0]==null){return}d=d[0];var g=[];for(var i=0;i<d.childNodes.length;i++){if(typeof(d.childNodes[i].tagName)!="undefined"&&String(d.childNodes[i].tagName).toLowerCase()=="item"){var f=d.childNodes[i];g.push({label:f.getAttribute("label"),value:f.getAttribute("value"),selected:(f.getAttribute("selected")!=null)});f=null}}b.doLoadOpts(c,{options:g},true)}c._connector_working=false;if(c._connector_value!=null){b.setValue(c,c._connector_value);c._connector_value=null}b=c=null})},doOnChange:function(c){var a=c.parentNode.parentNode;a._newValue=(c.selectedIndex>=0?c.options[c.selectedIndex].value:null);if(a._newValue!=a._value){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._newValue])!==true){for(var b=0;b<c.options.length;b++){if(c.options[b].value==a._value){c.options[b].selected=true}}return}}a._value=a._newValue;a.callEvent("onChange",[a._idd,a._value]);if(a._type=="se"&&a.getForm().live_validate){this._validate(a)}}a._autoCheck()},setText:function(a,b){if(!b){b=""}a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":"");a.childNodes[a._ll?0:1].style.display=(b.length==0||b==null?"none":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",true)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(b,d){if(b._connector_working){b._connector_value=d;return}var a=this.getOptions(b);for(var c=0;c<a.length;c++){if(a[c].value==d){a[c].selected=true;b._value=a[c].value}}if(b._list!=null&&b._list.length>0){b.getForm()._autoCheck()}b.getForm()._ccReload(b._idd,b._value)},getValue:function(c){var a=-1;var b=this.getOptions(c);for(var d=0;d<b.length;d++){if(b[d].selected){a=b[d].value}}return a},setWidth:function(b,a){b.childNodes[b._ll?1:0].childNodes[0].style.width=a+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(b){var a;if(b.childNodes[b._ll?1:0].childNodes[1]!=null){a=b.childNodes[b._ll?1:0].childNodes[1];if(a.className!=null&&a.className.search(/dhxform_note/gi)>=0&&a._w=="auto"){a.style.width=b.childNodes[b._ll?1:0].childNodes[0].offsetWidth+"px"}}a=null}};(function(){for(var b in {doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(d,f,g){var b=d.childNodes[d._ll?1:0].childNodes[0];b.multiple=true;if(!isNaN(f.size)){b.size=Number(f.size)}d._value=[];d._newValue=[];var c=f.options;for(var e=0;e<c.length;e++){var a=new Option(c[e].text||c[e].label,c[e].value);b.options.add(a);if(c[e].selected==true||c[e].selected=="true"){a.selected=true;d._value.push(c[e].value)}}if(g===true){d.callEvent("onOptionsLoaded",[d._idd])}this._checkNoteWidth(d)},doAttachEvents:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onfocus=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d.getForm().callEvent("onFocus",[d._idd]);d=null};a.onblur=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d.getForm().callEvent("onBlur",[d._idd]);d=null};a.onclick=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d._autoCheck();d=null}},doOnChange:function(d){var b=d.parentNode.parentNode;b._newValue=[];for(var c=0;c<d.options.length;c++){if(d.options[c].selected){b._newValue.push(d.options[c].value)}}if((b._value).sort().toString()!=(b._newValue).sort().toString()){if(b.checkEvent("onBeforeChange")){if(b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])!==true){var a={};for(var c=0;c<b._value.length;c++){a[b._value[c]]=true}for(var c=0;c<d.options.length;c++){d.options[c].selected=(a[d.options[c].value]==true)}a=null;return}}b._value=[];for(var c=0;c<b._newValue.length;c++){b._value.push(b._newValue[c])}b.callEvent("onChange",[b._idd,b._value])}b._autoCheck()},setValue:function(c,e){var a={};if(typeof(e)=="string"){e=e.split(",")}if(typeof(e)!="object"){e=[e]}for(var d=0;d<e.length;d++){a[e[d]]=true}var b=this.getOptions(c);for(var d=0;d<b.length;d++){b[d].selected=(a[b[d].value]==true)}c._autoCheck()},getValue:function(c){var a=[];var b=this.getOptions(c);for(var d=0;d<b.length;d++){if(b[d].selected){a.push(b[d].value)}}return a}};(function(){for(var b in dhtmlXForm.prototype.items.select){if(!dhtmlXForm.prototype.items.multiselect[b]){dhtmlXForm.prototype.items.multiselect[b]=dhtmlXForm.prototype.items.select[b]}}})();dhtmlXForm.prototype.items.input={render:function(g,h){var f=(!isNaN(h.rows));g._type="ta";g._enabled=true;this.doAddLabel(g,h);this.doAddInput(g,h,(f?"TEXTAREA":"INPUT"),(f?null:"TEXT"),true,true,"dhxform_textarea");this.doAttachEvents(g);if(f){g.childNodes[g._ll?1:0].childNodes[0].rows=Number(h.rows)+(window.dhx4.isIE6?1:0)}if(typeof(h.numberFormat)!="undefined"){var e,d=null,i=null;if(typeof(h.numberFormat)!="string"){e=h.numberFormat[0];d=h.numberFormat[1]||null;i=h.numberFormat[2]||null}else{e=h.numberFormat;if(typeof(h.groupSep)=="string"){d=h.groupSep}if(typeof(h.decSep)=="string"){i=h.decSep}}this.setNumberFormat(g,e,d,i,false)}this.setValue(g,h.value);return this},doAttachEvents:function(c){var b=c.childNodes[c._ll?1:0].childNodes[0];if(typeof(b.tagName)!="undefined"&&{input:1,textarea:1,select:1}[b.tagName.toLowerCase()]==1){var a=this;b.onfocus=function(){var d=this.parentNode.parentNode;if(d._df!=null){this.value=d._value||""}d.getForm()._ccActivate(d._idd,this,this.value);d.getForm().callEvent("onFocus",[d._idd]);d=null};b.onblur=function(){var d=this.parentNode.parentNode;d.getForm()._ccDeactivate(d._idd);a.updateValue(d,true);if(d.getForm().live_validate){a._validate(d)}d.getForm().callEvent("onBlur",[d._idd]);d=null}}b=null},updateValue:function(e,a){var f=e.childNodes[e._ll?1:0].childNodes[0].value;var d=e.getForm();var b=(d._ccActive==true&&d._formLS!=null&&d._formLS[e._idd]!=null);d=null;if(!b&&e._df!=null&&f==window.dhx4.template._getFmtValue(e._value,e._df)){return}if(!a&&e._df!=null&&e._value==f&&f==window.dhx4.template._getFmtValue(f,e._df)){return}var c=this;if(e._value!=f){if(e.checkEvent("onBeforeChange")){if(e.callEvent("onBeforeChange",[e._idd,e._value,f])!==true){if(e._df!=null){c.setValue(e,e._value)}else{e.childNodes[e._ll?1:0].childNodes[0].value=e._value}return}}if(e._df!=null&&a){c.setValue(e,f)}else{e._value=f}e.callEvent("onChange",[e._idd,f]);return}if(e._df!=null&&a){this.setValue(e,e._value)}},setValue:function(c,d){c._value=(typeof(d)!="undefined"&&d!=null?d:"");var b=(String(c._value)||"");var a=c.childNodes[c._ll?1:0].childNodes[0];if(c._df!=null){b=window.dhx4.template._getFmtValue(b,c._df)}if(a.value!=b){a.value=b;c.getForm()._ccReload(c._idd,b)}a=null},getValue:function(a){var b=a.getForm();if(b._formLS&&b._formLS[a._idd]!=null){this.updateValue(a)}b=null;return(typeof(a._value)!="undefined"&&a._value!=null?a._value:"")},setReadonly:function(a,b){a._ro=(b===true);if(a._ro){a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true")}else{a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")}},isReadonly:function(a){if(!a._ro){a._ro=false}return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(d,e,c,f,b){if(typeof(b)!="boolean"){b=true}if(e==""){d._df=null;if(b){this.setValue(d,d._value)}return true}if(typeof(e)!="string"){return}var a=window.dhx4.template._parseFmt(e,c,f);if(a==false){return false}else{d._df=a}if(b){this.setValue(d,d._value)}return true}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.password={render:function(a,b){a._type="pw";a._enabled=true;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","PASSWORD",true,true,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,b.value);return this}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.file={render:function(c,d){c._type="fl";c._enabled=true;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","FILE",true,false,"dhxform_textarea");var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onfocus=function(){var e=this.parentNode.parentNode;e.getForm().callEvent("onFocus",[e._idd]);e=null};a.onblur=function(){var e=this.parentNode.parentNode;if(e.getForm().live_validate){b._validate(e)}e.getForm().callEvent("onBlur",[e._idd]);e=null};a=null;c.childNodes[c._ll?1:0].childNodes[0].onchange=function(){c.callEvent("onChange",[c._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.label={_index:false,render:function(b,c){b._type="lb";b._enabled=true;b._checked=true;var a=document.createElement("DIV");a.className="dhxform_txt_label2"+(c._isTopmost?" topmost":"");a.innerHTML=c.label;b.appendChild(a);if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(!isNaN(c.labelWidth)){a.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false},setText:function(a,b){a.firstChild.innerHTML=b},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.button={render:function(b,c){b._type="bt";b._enabled=true;b._name=c.name;b.className=String(b.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");b._doOnKeyUpDown=function(e,d){this.callEvent(e,[this.childNodes[0].childNodes[0],d,this._idd])};b.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+c.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>';if(!isNaN(c.width)){var a=Math.max(c.width,10);if(dhtmlXForm.prototype.items[this.t]._dim==null){b.firstChild.style.width=a+"px";dhtmlXForm.prototype.items[this.t]._dim=b.getForm()._checkDim(b,b.firstChild)}b.firstChild.style.width=a-dhtmlXForm.prototype.items[this.t]._dim+"px";b.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}if(!isNaN(c.inputLeft)){b.childNodes[0].style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){b.childNodes[0].style.top=parseInt(c.inputTop)+"px"}if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(typeof(c.tooltip)!="undefined"){b.firstChild.title=c.tooltip}b.onselectstart=function(d){d=d||event;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false};b.firstChild.onselectstart=function(d){d=d||event;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false};b.firstChild.onkeypress=function(d){d=d||event;if((d.keyCode==32||d.charCode==32||d.keyCode==13||d.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]);return false}};b.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};b.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};b.firstChild.onkeyup=function(d){this.parentNode._doOnKeyUpDown("onKeyUp",d||event)};b.firstChild.onkeydown=function(d){this.parentNode._doOnKeyUpDown("onKeyDown",d||event)};b.firstChild.onmouseover=function(){var d=this.parentNode;if(!d._enabled){return}this._isOver=true;this.className="dhxform_btn dhxform_btn_over";d=null};b.firstChild.onmouseout=function(){var d=this.parentNode;if(!d._enabled){return}this.className="dhxform_btn";this._allowClick=false;this._pressed=false;this._isOver=false;d=null};b.firstChild.ontouchstart=b.firstChild.onmousedown=function(f){f=f||event;if(f.type=="touchstart"&&f.preventDefault){f.preventDefault()}if(f.button>=2){return}if(this._pressed){return}var d=this.parentNode;if(!d._enabled){return}this.className="dhxform_btn dhxform_btn_pressed";this._allowClick=true;this._pressed=true;d=null};b.firstChild.ontouchend=b.firstChild.onmouseup=function(f){f=f||event;if(f.button>=2){return}if(!this._pressed){return}var d=this.parentNode;if(!d._enabled){return}d._busy=false;this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":"");if(this._pressed&&this._allowClick){d.callEvent("_onButtonClick",[d._name,d._cmd])}this._allowClick=false;this._pressed=false;d=null};b._doOnFocus=function(d){d.getForm().callEvent("onFocus",[d._idd])};b._doOnBlur=function(d){d.getForm().callEvent("onBlur",[d._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.ontouchend=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;a.firstChild.onmouseup=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role","link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.hidden={_index:false,render:function(b,c){b.style.display="none";b._name=c.name;b._type="hd";b._enabled=true;var a=document.createElement("INPUT");a.type="HIDDEN";a.name=c.name;a.value=(c.value||"");b.appendChild(a);return this},destruct:function(a){this.doUnloadNestedLists(a);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a);a=null},enable:function(a){a._enabled=true;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=false;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return true},setValue:function(a,b){a.childNodes[0].value=b},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.list={_index:false,render:function(a,b){a._type="list";a._enabled=true;a._isNestedForm=true;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a,null,b)]},destruct:function(a){}};dhtmlXForm.prototype.items.fieldset={_index:false,render:function(b,d){b._type="fs";if(typeof(parseInt(d.inputWidth))=="number"){}b._width=d.width;b._enabled=true;b._checked=true;b.className="fs_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var c=document.createElement("FIELDSET");c.className="dhxform_fs";var e=String(d.labelAlign).replace("align_","");c.innerHTML="<legend class='fs_legend' align='"+e+"' style='text-align:"+e+"'>"+d.label+"</legend>";b.appendChild(c);if(!isNaN(d.inputLeft)){c.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){c.style.width=parseInt(d.inputWidth)+"px";var a=parseInt(c.style.width);if(c.offsetWidth>a){c.style.width=a+(a-c.offsetWidth)+"px"}}}b._addSubListNode=function(){var f=document.createElement("DIV");f._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(f);return f};if(d.hidden==true){this.hide(b)}if(d.disabled==true){this.userDisable(b)}return this},destruct:function(a){this.doUnloadNestedLists(a);a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}},setWidth:function(b,a){b.childNodes[0].style.width=a+"px";b._width=a},getWidth:function(a){return a._width}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.block={_index:false,render:function(c,d){c._type="bl";c._width=d.width;c._enabled=true;c._checked=true;c.className="block_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var a=document.createElement("DIV");a.className="dhxform_obj_"+c.getForm().skin+" dhxform_block";a.style.fontSize=c.getForm().cont.style.fontSize;if(d.style){a.style.cssText=d.style}if(typeof(d.id)!="undefined"){a.id=d.id}c.appendChild(a);if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){a.style.width=parseInt(d.inputWidth)+"px"}}if(!isNaN(d.blockOffset)){c._ofsNested=d.blockOffset}c._addSubListNode=function(){var b=document.createElement("DIV");b._inBlcok=true;if(typeof(this._ofsNested)!="undefined"){b._ofsNested=this._ofsNested}this.childNodes[0].appendChild(b);return b};if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}return this},_setCss:function(a,c,b){a.firstChild.className="dhxform_obj_"+c+" dhxform_block";a.firstChild.style.fontSize=b}};(function(){for(var b in {enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[b]=dhtmlXForm.prototype.items.fieldset[b]}})();dhtmlXForm.prototype.items.newcolumn={_index:false};dhtmlXForm.prototype.items.template={render:function(b,c){var a=(!isNaN(c.rows));b._type="tp";b._enabled=true;if(c.format!=null){if(typeof(c.format)=="function"){b.format=c.format}else{if(typeof(c.format)=="string"&&typeof(window[c.format])=="function"){b.format=window[c.format]}}}if(b.format==null){b.format=function(d,e){return e}}this.doAddLabel(b,c);this.doAddInput(b,c,"DIV",null,true,true,"dhxform_item_template");this.setValue(b,c.value||"");return this},destruct:function(a){a.format=null;this.d2(a);a=null},setValue:function(a,b){a._value=b;a.childNodes[a._ll?1:0].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false}};(function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype._ulToObject=function(f,i){var g=[];for(var b=0;b<f.childNodes.length;b++){if(String(f.childNodes[b].tagName||"").toLowerCase()=="li"){var c={};var l=f.childNodes[b];for(var j=0;j<i.length;j++){if(l.getAttribute(i[j])!=null){c[String(i[j]).replace("ftype","type")]=l.getAttribute(i[j])}}if(!c.label){try{c.label=l.firstChild.nodeValue}catch(h){}}var d=l.getElementsByTagName("UL");if(d[0]!=null){c[(c.type=="select"?"options":"list")]=dhtmlXForm.prototype._ulToObject(d[0],i)}for(var j=0;j<l.childNodes.length;j++){if(String(l.childNodes[j].tagName||"").toLowerCase()=="userdata"){if(!c.userdata){c.userdata={}}c.userdata[l.childNodes[j].getAttribute("name")]=l.childNodes[j].firstChild.nodeValue}}g[g.length]=c}if(String(f.childNodes[b].tagName||"").toLowerCase()=="div"){var c={};c.type="label";try{c.label=f.childNodes[b].firstChild.nodeValue}catch(h){}g[g.length]=c}}return g};dhtmlXForm.prototype.setUserData=function(e,c,d,a){if(typeof(a)!="undefined"){var b=this.doWithItem([e,c],"_getId");if(b!=null){e=b;c=d;d=a}}if(!this._userdata){this._userdata={}}this._userdata[e]=(this._userdata[e]||{});this._userdata[e][c]=d};dhtmlXForm.prototype.getUserData=function(d,c,a){if(typeof(a)!="undefined"){var b=this.doWithItem([d,c],"_getId");if(b!=null){d=b;c=a}}if(this._userdata!=null&&typeof(this._userdata[d])!="undefined"&&typeof(this._userdata[d][c])!="undefined"){return this._userdata[d][c]}return""};dhtmlXForm.prototype.setRTL=function(a){this._rtl=(a===true?true:false);if(this._rtl){if(String(this.cont).search(/dhxform_rtl/gi)<0){this.cont.className+=" dhxform_rtl"}}else{if(String(this.cont).search(/dhxform_rtl/gi)>=0){this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")}}};_dhxForm_doClick=function(d,b){if(typeof(b)=="object"){var a=b[1];b=b[0]}if(document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent(b,true,false);d.dispatchEvent(c)}else{if(document.createEventObject){var c=document.createEventObject();c.button=1;d.fireEvent("on"+b,c)}}if(a){window.setTimeout(function(){_dhxForm_doClick(d,a)},100)}};dhtmlXForm.prototype.setFormData=function(c){for(var b in c){var d=this.getItemType(b);switch(d){case"checkbox":this[c[b]==true||parseInt(c[b])==1||c[b]=="true"||c[b]==this.getItemValue(b,"realvalue")?"checkItem":"uncheckItem"](b);break;case"radio":this.checkItem(b,c[b]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(b,c[b]);break;default:if(this["setFormData_"+d]){this["setFormData_"+d](b,c[b])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,b,c[b])}break}}};dhtmlXForm.prototype.getFormData=function(o,g){var c={};var l=this;for(var n in this.itemPull){var j=this.itemPull[n]._idd;var p=this.itemPull[n]._type;if(p=="ch"){c[j]=(this.isItemChecked(j)?this.getItemValue(j):0)}if(p=="ra"&&!c[this.itemPull[n]._group]){c[this.itemPull[n]._group]=this.getCheckedValue(this.itemPull[n]._group)}if(p in {se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}){c[j]=this.getItemValue(j,o)}if(this["getFormData_"+p]){c[j]=this["getFormData_"+p](j)}if(p=="up"){var f=this.getItemValue(j);for(var e in f){c[e]=f[e]}}if(this.itemPull[n]._list){for(var d=0;d<this.itemPull[n]._list.length;d++){var h=this.itemPull[n]._list[d].getFormData(o,g);for(var m in h){c[m]=h[m]}}}}if(!g&&this.hId&&this._userdata[this.hId]){for(var n in this._userdata[this.hId]){if(!c[n]){c[n]=this._userdata[this.hId][n]}}}return c};dhtmlXForm.prototype.adjustParentSize=function(){var f=0;var d=-1;for(var g=0;g<this.base.length;g++){f+=this.base[g].firstChild.offsetWidth;if(this.base[g].offsetHeight>d){d=this.base[g].offsetHeight}}var c=false;try{c=(this.cont.parentNode.parentNode.parentNode.parentNode._isCell==true);if(c){var a=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(h){}if(c&&typeof(a)!="undefined"){if(f>0){a.setWidth(f+10)}if(d>0){a.setHeight(d+a.firstChild.firstChild.offsetHeight+5)}c=a=null;return}var b=false;try{b=(this.cont.parentNode.parentNode.parentNode._isWindow==true);if(b){var i=this.cont.parentNode.parentNode;if(typeof(i.callEvent)=="function"){this.cont.style.display="none";i.callEvent("_setCellSize",[f+15,d+15]);this.cont.style.display=""}}}catch(h){}};dhtmlXForm.prototype.reset=function(){if(this.callEvent("onBeforeReset",[this.formId,this.getFormData()])){if(this._last_load_data){this.setFormData(this._last_load_data)}this.callEvent("onAfterReset",[this.formId])}};dhtmlXForm.prototype.send=function(b,g,h,d){if(typeof g=="function"){h=g;g="post"}else{g=(g=="get"?"get":"post")}if(d!==true&&!this.validate()){return}var f=this.getFormData(true);var e=[];for(var c in f){e.push(c+"="+encodeURIComponent(f[c]))}var a=function(i){if(h){h.call(this,i,i.xmlDoc.responseText)}};if(g=="get"){window.dhx4.ajax.get(b+(b.indexOf("?")==-1?"?":"&")+e.join("&"),a)}else{window.dhx4.ajax.post(b,e.join("&"),a)}};dhtmlXForm.prototype.save=function(a,b){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(b,a){this.formId=a};dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(d,b){var c=this.obj.getFormData(true);c[this.action_param]=this.obj.getUserData(d,this.action_param);return c};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(c,d,e,b){if(d=="inserted"||d=="updated"||d=="error"||d=="invalid"){this.obj.resetDataProcessor("updated")}if(d=="inserted"||d=="updated"){this.obj._last_load_data=this.obj.getFormData(true)}this.obj.callEvent("onAfterSave",[this.obj.formId,b]);return true});a.autoUpdate=false;a.setTransactionMode("POST",true);this.dp=a;this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");this.save=function(){if(!this.callEvent("onBeforeSave",[this.formId,this.getFormData()])){return}if(!this.validate()){return}a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){if(!this.dp){return}this.dp.updatedRows=[];this.dp._in_progress=[];this.dp.setUpdated(this.formId,true,a)};dhtmlXForm.prototype._ccActivate=function(c,a,b){if(!this._formLS){this._formLS={}}if(!this._formLS[c]){this._formLS[c]={input:a,value:b}}if(!this._ccActive){this._ccActive=true;this._ccDo()}a=null};dhtmlXForm.prototype._ccDeactivate=function(a){if(this._ccTm){window.clearTimeout(this._ccTm)}this._ccActive=false;if(this._formLS!=null&&this._formLS[a]!=null){this._formLS[a].input=null;this._formLS[a]=null;delete this._formLS[a]}};dhtmlXForm.prototype._ccDo=function(){if(this._ccTm){window.clearTimeout(this._ccTm)}for(var b in this._formLS){var e=this._formLS[b].input;if(String(e.tagName).toLowerCase()=="select"){var c="";if(e.selectedIndex>=0&&e.selectedIndex<e.options.length){c=e.options[e.selectedIndex].value}}else{var c=e.value}if(c!=this._formLS[b].value){this._formLS[b].value=c;this.callEvent("onInputChange",[e._idd,c,this])}e=null}if(this._ccActive){var d=this;this._ccTm=window.setTimeout(function(){d._ccDo();d=null},100)}};dhtmlXForm.prototype._ccReload=function(b,a){if(this._formLS&&this._formLS[b]){this._formLS[b].value=a}};dhtmlXForm.prototype._checkDim=function(g,f){var d=document.createElement("DIV");d.className="dhxform_obj_"+this.skin;d.style.cssText+=(dhx4.isIE6==true?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;");document.body.appendChild(d);var e=g.parentNode;var b=g.nextSibling;d.appendChild(g);var c=parseInt(f.style.width);var a=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?f.offsetWidth:f.clientWidth);var h=a-c;if(b!=null){e.insertBefore(g,b)}else{e.appendChild(g)}d.parentNode.removeChild(d);e=b=d=g=f=null;return h};(function(){var b=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"];dhtmlXForm.prototype.loadStructHTML=function(a){var a=typeof a==="string"?document.getElementById(a):a;this.loadStruct(this._ulToObject(a,b))};dhtmlXForm.prototype._autoload=function(){var a=document.getElementsByTagName("UL");var c=[];for(var f=0;f<a.length;f++){if(a[f].className=="dhtmlxForm"){var e=document.createElement("DIV");c[c.length]={nodeUL:a[f],nodeForm:e,data:dhtmlXForm.prototype._ulToObject(a[f],b),name:(a[f].getAttribute("name")||null)}}}for(var f=0;f<c.length;f++){c[f].nodeUL.parentNode.insertBefore(c[f].nodeForm,c[f].nodeUL);var g=new dhtmlXForm(c[f].nodeForm,c[f].data);if(c[f].name!==null){window[c[f].name]=g}var d=(c[f].nodeUL.getAttribute("oninit")||null);c[f].nodeUL.parentNode.removeChild(c[f].nodeUL);c[f].nodeUL=null;c[f].nodeForm=null;c[f].data=null;c[f]=null;if(d){if(typeof(d)=="function"){d()}else{if(typeof(window[d])=="function"){window[d]()}}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.detachEvent("onload",dhtmlXForm.prototype._autoload)}};if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.attachEvent("onload",dhtmlXForm.prototype._autoload)}})();if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachForm=function(a){this.callEvent("_onBeforeContentAttach",["form"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";if(window.dhtmlx&&dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(b)}else{b.style.overflow="auto"}this._attachObject(b);this.dataType="form";this.dataObj=new dhtmlXForm(b,a,this.conf.skin);b=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXForm.prototype.items.combo={render:function(b,c){b._type="combo";b._enabled=true;b._value=null;b._newValue=null;var d=b.getForm().skin;if(typeof(c.inputWidth)!="undefined"&&d=="material"&&String(c.inputWidth).match(/^\d*$/)!=null){c.inputWidth=parseInt(c.inputWidth)+2}this.doAddLabel(b,c);this.doAddInput(b,c,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(b);this.doLoadOpts(b,c);b.onselectstart=function(f){return true};b.childNodes[b._ll?1:0].childNodes[0].setAttribute("mode",c.comboType||"");if(c.comboImagePath){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("imagePath",c.comboImagePath)}if(c.comboDefaultImage){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("defaultImage",c.comboDefaultImage)}if(c.comboDefaultImageDis){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("defaultImageDis",c.comboDefaultImageDis)}b._combo=new dhtmlXComboFromSelect(b.childNodes[b._ll?1:0].childNodes[0]);b._combo.setSkin(d);b._combo._currentComboValue=b._combo.getSelectedValue();b._combo.getInput().id=c.uid;if(d=="material"){b._combo.list.className+=" dhxform_obj_"+d}var a=this;b._combo.attachEvent("onChange",function(){a.doOnChange(this)});if(c.connector){this.doLoadOptsConnector(b,c.connector)}if(c.filtering){b._combo.enableFilteringMode(true)}else{if(c.serverFiltering){b._combo.enableFilteringMode(true,c.serverFiltering,c.filterCache,c.filterSubLoad)}}if(c.readonly==true){this.setReadonly(b,true)}if(c.hidden==true){this.hide(b)}if(c.style){b._combo.DOMelem_input.style.cssText+=c.style}b._combo.attachEvent("onFocus",function(){var e=this.cont.parentNode.parentNode;var g=e.getForm();if((g.skin=="dhx_terrace"||g.skin=="material")&&this.cont.className.search(/combo_in_focus/)<0){this.cont.className+=" combo_in_focus"}g.callEvent("onFocus",[e._idd]);g=e=null});b._combo.attachEvent("onBlur",function(){var e=this.cont.parentNode.parentNode;var g=e.getForm();if((g.skin=="dhx_terrace"||g.skin=="material")&&this.cont.className.search(/combo_in_focus/)>=0){this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")}g.callEvent("onBlur",[e._idd]);g=e=null});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.d2(a);a=null},doAttachEvents:function(b){var a=this;b.childNodes[b._ll?1:0].childNodes[0].onchange=function(){a.doOnChange(this);a.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){if(a.getForm().hot_validate){this._validate(a)}},doOnChange:function(b){var a=b.base.parentNode.parentNode.parentNode;if(a._apiChange){return}b._newComboValue=b.getSelectedValue();if(b._newComboValue!=b._currentComboValue){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,b._currentComboValue,b._newComboValue])!==true){window.setTimeout(function(){b.setComboValue(b._currentComboValue)},1);return false}}b._currentComboValue=b._newComboValue;a.callEvent("onChange",[a._idd,b._currentComboValue])}a._autoCheck()},doLoadOptsConnector:function(d,a){var c=this;var b=d;d._connector_working=true;d._apiChange=true;d._combo.load(a,function(){b.callEvent("onOptionsLoaded",[b._idd]);b._connector_working=false;if(b._connector_value!=null){c.setValue(b,b._connector_value);b._connector_value=null}b._apiChange=false;c=b=null})},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a._combo.enable()},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,b){if(a._connector_working){a._connector_value=b;return}a._apiChange=true;a._combo.setComboValue(b);a._combo._currentComboValue=a._combo.getActualValue();a._apiChange=false},getValue:function(a){return a._combo.getActualValue()},setWidth:function(b,a){b.childNodes[b._ll?1:0].childNodes[0].style.width=a+"px"},setReadonly:function(a,b){if(!a._combo){return}a._combo_ro=b;a._combo.readonly(a._combo_ro)},isReadonly:function(a,b){return a._combo_ro||false},setFocus:function(a){if(a._enabled){a._combo.setFocus()}},_setCss:function(a,c,b){a._combo.setFontSize(b,b)}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")};dhtmlXForm.prototype.items.calendar={render:function(c,e){var b=this;c._type="calendar";c._enabled=true;var g=navigator.userAgent;var a=(g.indexOf("MSIE 6.0")>=0||g.indexOf("MSIE 7.0")>=0||g.indexOf("MSIE 8.0")>=0);this.doAddLabel(c,e);this.doAddInput(c,e,"INPUT","TEXT",true,true,"dhxform_textarea calendar");this.doAttachChangeLS(c);if(a){c.childNodes[c._ll?1:0].childNodes[0].onfocus2=c.childNodes[c._ll?1:0].childNodes[0].onfocus;c.childNodes[c._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==true){this._skipOnFocus=false;return}this.onfocus2.apply(this,arguments)}}c.childNodes[c._ll?1:0].childNodes[0]._idd=c._idd;c.childNodes[c._ll?1:0].childNodes[0].onblur=function(){var h=this.parentNode.parentNode;if(h._c.base._formMouseDown){h._c.base._formMouseDown=false;this._skipOnFocus=true;this.focus();this.value=this.value;h=null;return true}var j=h.getForm();j._ccDeactivate(h._idd);b.checkEnteredValue(this.parentNode.parentNode);if(j.live_validate){b._validate(h)}j.callEvent("onBlur",[h._idd]);if(!h._c.isVisible()){h._tempValue=null}j=h=null};c._f=(e.dateFormat||null);c._f0=(e.serverDateFormat||c._f);var d=c.getForm();c._c=new dhtmlXCalendarObject(c.childNodes[c._ll?1:0].childNodes[0],e.skin||d.skin||"dhx_skyblue");c._c._nullInInput=true;c._c.enableListener(c.childNodes[c._ll?1:0].childNodes[0]);if(c._f!=null){c._c.setDateFormat(c._f)}if(!window.dhx4.s2b(e.enableTime)){c._c.hideTime()}if(window.dhx4.s2b(e.enableTodayButton)){c._c.showToday()}if(window.dhx4.s2b(e.showWeekNumbers)){c._c.showWeekNumbers()}if(!isNaN(e.weekStart)){c._c.setWeekStartDay(e.weekStart)}if(typeof(e.calendarPosition)!="undefined"){c._c.setPosition(e.calendarPosition)}if(e.minutesInterval!=null){c._c.setMinutesInterval(e.minutesInterval)}c._c._itemIdd=c._idd;c._c.attachEvent("onBeforeChange",function(f){if(c._value!=f){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,f])!==true){return false}}c._tempValue=c._value=f;b.setValue(c,f,false);c.callEvent("onChange",[this._itemIdd,c._value])}return true});c._c.attachEvent("onClick",function(){c._tempValue=null});c._c.attachEvent("onHide",function(){c._tempValue=null});if(a){c._c.base.onmousedown=function(){this._formMouseDown=true;return false}}this.setValue(c,e.value);d=null;return this},getCalendar:function(a){return a._c},setSkin:function(a,b){a._c.setSkin(b)},setValue:function(b,c,a){if(!c||c==null||typeof(c)=="undefined"||c==""){b._value=null;b.childNodes[b._ll?1:0].childNodes[0].value=""}else{b._value=(c instanceof Date?c:b._c._strToDate(c,b._f0||b._c._dateFormat));b.childNodes[b._ll?1:0].childNodes[0].value=b._c._dateToStr(b._value,b._f||b._c._dateFormat)}if(a!==false){b._c.setDate(b._value)}},getValue:function(b,a){var c=b._tempValue||b._c.getDate();if(a===true&&c==null){return""}return(a===true?b._c._dateToStr(c,b._f0||b._c._dateFormat):c)},setDateFormat:function(b,a,c){b._f=a;b._f0=(c||b._f);b._c.setDateFormat(b._f);this.setValue(b,this.getValue(b))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]);a._c.unload();a._c=null;try{delete a._c}catch(b){}a._f=null;try{delete a._f}catch(b){}a._f0=null;try{delete a._f0}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;this.d2(a);a=null},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(b,a,c){this.doWithItem(b,"setDateFormat",a,c)};dhtmlXForm.prototype.items.btn2state={setChecked:function(a,b){a._checked=(b===true?true:false);a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0");this.doCheckValue(a)}};(function(){for(var b in dhtmlXForm.prototype.items.checkbox){if(!dhtmlXForm.prototype.items.btn2state[b]){dhtmlXForm.prototype.items.btn2state[b]=dhtmlXForm.prototype.items.checkbox[b]}}})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;dhtmlXForm.prototype.items.btn2state.render=function(a,b){b._autoInputWidth=false;this.render2(a,b);a._type="btn2state";a._cssName=(typeof(b.cssName)=="undefined"?"btn2state":b.cssName);a._updateImgNode=function(){};a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(d,c,e){this.callEvent(d,[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};this.setChecked(a,a._checked);return this};dhtmlXForm.prototype.setFormData_btn2state=function(a,b){this[b==true||parseInt(b)==1||b=="true"||b==this.getItemValue(a)?"checkItem":"uncheckItem"](a)};dhtmlXForm.prototype.getFormData_btn2state=function(a){return(this.isItemChecked(a)?this.getItemValue(a):0)};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(c,d){var b=this;c._type="colorpicker";c._enabled=true;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","TEXT",true,true,"dhxform_textarea");c._value=(d.value||"");c.childNodes[c._ll?1:0].childNodes[0].value=c._value;var a={input:c.childNodes[c._ll?1:0].childNodes[0],custom_colors:(window.dhx4.s2b(d.enableCustomColors)==true),skin:c.getForm().skin};this.colorpicker[c._idd]=new dhtmlXColorPicker(a);this.colorpicker[c._idd]._nodes[0].valueColor=null;this.colorpicker[c._idd].base.className+=" dhtmlxcp_in_form";if(typeof(d.customColors)!="undefined"){this.colorpicker[c._idd].setCustomColors(d.customColors)}if(typeof(d.cpPosition)=="string"){this.colorpicker[c._idd].setPosition(d.cpPosition)}this.colorpicker[c._idd].attachEvent("onSelect",function(e){if(c._value!=e){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,e])!==true){c.childNodes[c._ll?1:0].childNodes[0].value=c._value;return}}c._value=e;b.setValue(c,e);c.callEvent("onChange",[c._idd,c._value])}});this.colorpicker[c._idd].attachEvent("onHide",function(e){var f=c.childNodes[c._ll?1:0].childNodes[0];if(f.value!=c._value){f.value=c._value}f=null});c.childNodes[c._ll?1:0].childNodes[0]._idd=c._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){if(this.colorpicker[a._idd].unload){this.colorpicker[a._idd].unload()}this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.d2(a);a=null},setSkin:function(a,b){this.colorpicker[a._idd].setSkin(b)}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")};dhtmlXForm.prototype.items.container={render:function(a,b){a._type="container";a._enabled=true;this.doAddLabel(a,b);this.doAddInput(a,b,"DIV",null,true,true,"dhxform_container");return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")};(function(){for(var b in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.container[b]){dhtmlXForm.prototype.items.container[b]=dhtmlXForm.prototype.items.input[b]}}})();dhtmlXForm.prototype.items.editor={editor:{},render:function(c,d){var a=(!isNaN(d.rows));c._type="editor";c._enabled=true;c._editor_id=c.getForm().idPrefix+c._idd;this.doAddLabel(c,d);this.doAddInput(c,d,"DIV",null,true,true,"dhxform_item_template");c._value=(d.value||"");var b=this;this.editor[c._editor_id]=new dhtmlXEditor({parent:c.childNodes[c._ll?1:0].childNodes[0],content:c._value,iconsPath:d.iconsPath,toolbar:d.toolbar,skin:c.getForm().skin});this.editor[c._editor_id].attachEvent("onAccess",function(f,g){c.callEvent("_onBeforeEditorAccess",[]);_dhxForm_doClick(document.body,"click");if(f=="blur"){b.doOnBlur(c,this);c.callEvent("onBlur",[c._idd]);if({dhx_terrace:1,material:1}[c.getForm().skin]==1){var e=c.childNodes[c._ll?1:0].className;if(e.indexOf("dhxeditor_focus")>=0){c.childNodes[c._ll?1:0].className=(e).replace(/\s{0,}dhxeditor_focus/gi,"")}}}else{c.callEvent("onEditorAccess",[c._idd,f,g,this,c.getForm()]);c.callEvent("onFocus",[c._idd]);if({dhx_terrace:1,material:1}[c.getForm().skin]==1){var e=c.childNodes[c._ll?1:0].className;if(e.indexOf("dhxeditor_focus")==-1){c.childNodes[c._ll?1:0].className+=" dhxeditor_focus"}}}});this.editor[c._editor_id].attachEvent("onToolbarClick",function(e){c.callEvent("onEditorToolbarClick",[c._idd,e,this,c.getForm()])});if(d.readonly){this.setReadonly(c,true)}c.childNodes[c._ll?0:1].childNodes[0].removeAttribute("for");c.childNodes[c._ll?0:1].childNodes[0].onclick=function(){b.editor[c._editor_id]._focus()};return this},doOnBlur:function(c,b){var a=b.getContent();if(c._value!=a){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,a])!==true){b.setContent(c._value);return}}c._value=a;c.callEvent("onChange",[c._idd,a])}},setValue:function(a,b){if(a._value==b){return}a._value=b;this.editor[a._editor_id].setContent(a._value)},getValue:function(a){a._value=this.editor[a._editor_id].getContent();return a._value},enable:function(a){if(this.isEnabled(a)!=true){this.editor[a._editor_id].setReadonly(false);this.doEn(a)}},disable:function(a){if(this.isEnabled(a)==true){this.editor[a._editor_id].setReadonly(true);this.doDis(a)}},setReadonly:function(a,b){this.editor[a._editor_id].setReadonly(b)},getEditor:function(a){return(this.editor[a._editor_id]||null)},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null;this.editor[a._editor_id].unload();this.editor[a._editor_id]=null;this.d2(a);a=null},setFocus:function(a){this.editor[a._editor_id]._focus()}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[b]=dhtmlXForm.prototype.items.template[b]}})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")};dhtmlXForm.prototype.items.image={_dimFix:true,render:function(e,f){e._type="image";e._enabled=true;e._fr_name="dhxform_image_"+window.dhx4.newId();e._url=(typeof(f.url)=="undefined"||f.url==null?"":f.url);if(f.inputWidth=="auto"){f.inputWidth=120}if(f.inputHeight=="auto"){f.inputHeight=f.inputWidth}this.doAddLabel(e,f);this.doAddInput(e,f,"DIV",null,true,true,"dhxform_image");var b=e.childNodes[e._ll?1:0].childNodes[0];b.style.height=parseInt(b.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var a=(typeof(f.imageWidth)!="undefined"?parseInt(f.imageWidth):f.inputWidth);var c=(typeof(f.imageHeight)!="undefined"?parseInt(f.imageHeight):f.inputHeight);if(c=="auto"){c=a}e._dim={mw:f.inputWidth-this._dim,mh:f.inputHeight-this._dim,w:a,h:c};b.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+e._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+e._url+"' method='POST' enctype='multipart/form-data' target='"+e._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+e._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>";"</div>";this.adjustImage(e);b.childNodes[2].firstChild.lastChild.onchange=function(){e._is_uploading=true;this.parentNode.submit();this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress";this.value=""};var d=this;if(window.navigator.userAgent.indexOf("MSIE")>=0){b.childNodes[1].onreadystatechange=function(){if(this.readyState=="complete"){d.doOnUpload(e)}}}else{b.childNodes[1].onload=function(){d.doOnUpload(e)}}this._moreClear=function(){d=null};this.setValue(e,f.value||"");b=null;return this},destruct:function(b){var a=b.childNodes[b._ll?1:0].childNodes[0];a.childNodes[2].firstChild.lastChild.onchange=null;a.childNodes[1].onreadystatechange=null;a.childNodes[1].onload=null;this._moreClear();this.d2(b);b=null},doAttachEvents:function(){},setValue:function(c,e){c._value=(e==null?"":e);var b=c._url+(c._url.indexOf("?")>=0?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(c._idd)+"&itemValue="+encodeURIComponent(c._value)+window.dhx4.ajax._dhxr("&");var d=c.childNodes[c._ll?1:0].childNodes[0].firstChild;if(d.nextSibling.tagName.toLowerCase()=="img"){d.nextSibling.src=b}else{var a=document.createElement("IMG");a.className="dhxform_image_img";a.style.visibility="hidden";a.onload=function(){this.style.visibility="visible";this.parentNode.removeChild(this.nextSibling);this.onload=this.onerror=null};a.onerror=function(){this.onload.apply(this,arguments);this.style.visibility="hidden"};d.parentNode.insertBefore(a,d);a.src=b;a=null;this.adjustImage(c)}d=null},getValue:function(a){return a._value},doOnUpload:function(c){if(c._is_uploading==true){var a=c.childNodes[c._ll?1:0].childNodes[0].lastChild.previousSibling;var b=dhx4.s2j(a.contentWindow.document.body.innerHTML);if(typeof(b)=="object"&&b!=null&&b.state==true&&b.itemId==c._idd){this.setValue(c,b.itemValue,true);c.getForm().callEvent("onImageUploadSuccess",[b.itemId,b.itemValue,b.extra])}else{c.getForm().callEvent("onImageUploadFail",[c._idd,(b?b.extra:null)])}b=a=null;window.setTimeout(function(){c.childNodes[c._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap";c._is_uploading=false},50)}},adjustImage:function(d){var b=d.childNodes[d._ll?1:0].childNodes[0].firstChild;var a=Math.min(d._dim.mw,d._dim.w);var c=Math.min(d._dim.mh,d._dim.h);b.style.width=a+"px";b.style.height=c+"px";b.style.marginLeft=Math.max(0,Math.round(d._dim.mw/2-a/2))+"px";b.style.marginTop=Math.max(0,Math.round(d._dim.mh/2-c/2))+"px";b=d=null}};(function(){for(var b in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.image[b]){dhtmlXForm.prototype.items.image[b]=dhtmlXForm.prototype.items.input[b]}}})();dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.setFormData_image=function(a,b){this.setItemValue(a,b)};dhtmlXForm.prototype.getFormData_image=function(a){return this.getItemValue(a)};dhtmlXForm.prototype.items.upload={render:function(b,c){b._type="up";b._enabled=true;b._checked=true;b.className=c.position+(typeof(c.className)=="string"?" "+c.className:"");var a=document.createElement("DIV");b.appendChild(a);if(!isNaN(c.inputLeft)){b.style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){b.style.top=parseInt(c.inputTop)+"px"}if(c.inputWidth!="auto"){if(!isNaN(c.inputWidth)){a.style.width=parseInt(c.inputWidth)+"px"}}b._uploader=new dhtmlXFileUploader(a,c.swfPath||"",c.swfUrl||"",c.mode||null,c.swfLogs,c.slXap||"",c.slUrl||"",c.slLogs||"",c.multiple);b._uploader.setURL(c.url||"");b._uploader.callEvent=b.callEvent;if(typeof(c.autoStart)!="undefined"){b._uploader.setAutoStart(c.autoStart)}if(typeof(c.autoRemove)!="undefined"){b._uploader.setAutoRemove(c.autoRemove)}if(typeof(c.titleScreen)!="undefined"){b._uploader.enableTitleScreen(c.titleScreen)}if(typeof(c.titleText)!="undefined"){b._uploader.setTitleText(c.titleText)}if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(!(c.inputHeight=="auto"||parseInt(c.inputHeight)==NaN)){b._uploader.p_files.style.height=parseInt(c.inputHeight)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._uploader.callEvent=function(){return true};a._uploader.unload();a._uploader.callEvent=null;a._uploader=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a.onselectstart=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,b){},getText:function(a){},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._uploader.enable()},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._uploader.disable()},setWidth:function(b,a){b.childNodes[0].style.width=a+"px";b._width=a},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(f){var d=f._uploader.getData();var e={};var c=0;for(var b in d){e[f._idd+"_r_"+c]=d[b].realName;e[f._idd+"_s_"+c]=d[b].serverName;c++}e[f._idd+"_count"]=c;return e},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")};dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")};function dhtmlXFileUploader(b,h,g,i,m,f,o,d,q){var j=this;if(typeof(i)=="string"&&typeof(this[i])=="function"){this.engine=i}else{this.engine="html4";var c=null;if(typeof(window.FormData)!="undefined"&&typeof(window.XMLHttpRequest)!="undefined"){c=new XMLHttpRequest();if(typeof(c.upload)=="undefined"){c=null}}if(c!=null){this.engine="html5"}else{if(typeof(window.swfobject)!="undefined"||c===false){var c=swfobject.getFlashPlayerVersion();if(c.major>=10){this.engine="flash"}}else{this._sl_v=this.getSLVersion();if(this._sl_v){this.engine="sl"}}}c=null}if(typeof(b)=="string"){b=document.getElementById(b)}this._upload_mp=(typeof(q)!="undefined"?q==true:true);this._upload_dnd=true;this._swf_file_url=h||"";this._swf_upolad_url=g||"";this._swf_logs=m;this._sl_xap=f;this._sl_upload_url=o;this._sl_logs=d;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";b.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=false;this._autoRemove=false;this._titleScreen=true;this._enabled=true;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){if(!j._enabled){return}if(!j._uploading){j._uploadStart()}},tooltip:"Upload"},cancel:{onclick:function(){if(!j._enabled){return}j._uploadStop();j._switchButton(false)},tooltip:"Stop"},clear:{onclick:function(){if(!j._enabled){return}j.clear()},tooltip:"Clear list"}};this.buttons={};for(var e in this.b_opts){var p=document.createElement("DIV");p.innerHTML="&nbsp;";p.className="dhx_file_uploader_button button_"+e;p.onclick=this.b_opts[e].onclick;if(this.b_opts[e].tooltip){p.title=this.b_opts[e].tooltip}this.p_controls.appendChild(p);this.buttons[e]=p;p=null}this.buttons.cancel.style.display="none"};this._readableSize=function(p){var e=false;var a=["b","Kb","Mb","Gb","Tb","Pb","Eb"];for(var r=0;r<a.length;r++){if(p>1024){p=p/1024}else{if(e===false){e=r}}}if(e===false){e=a.length-1}return Math.round(p*100)/100+" "+a[e]};this._beforeAddFileToList=function(a,e){return(this.callEvent("onBeforeFileAdd",[a,e])===true)};this._addFileToList=function(u,e,r,s,a){this._checkTitleScreen();var p=document.createElement("DIV");p._idd=u;p.className="dhx_file dhx_file_"+s;p.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+a+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(p);p.childNodes[0].style.width=p.offsetWidth-127+"px";this._items[u]=p;this._updateFileNameSize(u);p.childNodes[2].onclick=function(){if(!j._enabled){return}var t=this.parentNode._idd;j._removeFileFromQueue(t)};this.callEvent("onFileAdd",[e])};this._removeFileFromList=function(a){if(!this._items[a]){return}this._items[a].childNodes[2].onclick=null;this._items[a].parentNode.removeChild(this._items[a]);this._items[a]=null;delete this._items[a];if(this._data[a]){this._data[a]=null;delete this._data[a]}this._checkTitleScreen()};this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"&nbsp;");this._items[a].childNodes[0].title=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"")};this._updateFileInList=function(p,e,a){if(!this._items[p]){return}this._items[p].className="dhx_file dhx_file_"+e;this._updateProgress(p,e,a);this._updateFileNameSize(p)};this._updateProgress=function(p,e,a){if(e=="uploading"&&a<100&&this._progress_type=="loader"){this._items[p].childNodes[1].className="dhx_file_param dhx_file_uploading";this._items[p].childNodes[1].innerHTML="&nbsp;"}else{this._items[p].childNodes[1].className="dhx_file_param dhx_file_progress";this._items[p].childNodes[1].innerHTML=a+"%"}this._updateFileNameSize(p)};this._removeFilesByState=function(p){for(var e in this._files){if(p===true||this._files[e].state==p){this._removeFileFromQueue(e)}}};this._switchButton=function(e){if(e==true){this.buttons.upload.style.display="none";this.buttons.cancel.style.display=""}else{var a=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;if(a>0){this.callEvent("onUploadComplete",[a])}}};this._uploadStart=function(){this._switchButton(true);if(!this._uploading){for(var e in this._files){if(this._files[e].state=="fail"){this._files[e].state="added";this._updateFileInList(e,"added",0)}}}this._uploading=true;var p=false;for(var e in this._files){if(!p&&[this._files[e].state]=="added"){p=true;this._files[e].state="uploading";this._updateFileInList(e,"uploading",0);this._doUploadFile(e)}}if(!p){this._uploading=false;this._switchButton(false)}};this._onUploadSuccess=function(u,s,p,a){if(typeof(p)!="undefined"&&this.engine=="flash"){var e=dhx4.s2j(p.data);if(e!=null&&e.state==true&&e.name!=null){s=e.name;if(e.extra!=null){a=e.extra}}else{this._onUploadFail(u,(e!=null&&e.extra!=null?e.extra:null));return}}this._uploaded_count++;this._data[u]={realName:this._files[u].name,serverName:s};this._files[u].state="uploaded";this._updateFileInList(u,"uploaded",100);this.callEvent("onUploadFile",[this._files[u].name,s,a]);if(this._autoRemove){this._removeFileFromQueue(u)}if(this._uploading){this._uploadStart()}};this._onUploadFail=function(e,a){this._files[e].state="fail";this._updateFileInList(e,"fail",0);this.callEvent("onUploadFail",[this._files[e].name,a]);if(this._uploading){this._uploadStart()}};this._onUploadAbort=function(a){this._uploading=false;this._files[a].state="added";this._updateFileInList(a,"added",0);this.callEvent("onUploadCancel",[this._files[a].name])};this._checkTitleScreen=function(){var p=0;for(var e in this._files){p++}if(p==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen){this.p.className+=" dhx_file_uploader_title";this.buttons.info.innerHTML=this._titleText;this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"}if((p>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,"");this.buttons.info.innerHTML=""}};this.callEvent=function(){};this.upload=function(){if(!this._uploading){this._uploadStart()}};this.setAutoStart=function(a){this._autoStart=(a==true)};this.setAutoRemove=function(a){this._autoRemove=(a==true)};this.enableTitleScreen=function(a){this._titleScreen=(a==true);this._checkTitleScreen()};this.setTitleText=function(a){this._titleText=a;if(this.p.className.search("dhx_file_uploader_title")>=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(a){this._url=a};this.setSWFURL=function(a){this._swf_upolad_url=a};this.enable=function(){this._enabled=true;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=false;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var p=0;for(var e in this._files){if(this._files[e].state!="uploaded"){return -1}p=1}return p};this.getData=function(){return this._data};this.clear=function(){if(this.callEvent("onBeforeClear",[])!==true){return}if(this._uploading){j._uploadStop()}j._switchButton(false);j._removeFilesByState(true);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(true);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(var e in this.buttons){this.buttons[e].onclick=null;this.buttons[e].parentNode.removeChild(this.buttons[e]);this.buttons[e]=null;delete this.buttons[e]}this.buttons=null;for(var e in this.b_opts){this.b_opts[e].onclick=null;this.b_opts[e]=null;delete this.b_opts[e]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var e in this){this[e]=null}j=e=null};var l=new this[this.engine]();for(var n in l){this[n]=l[n];l[n]=null}n=l=b=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var b=this;this.buttons.browse.onclick=function(){if(b._enabled){b.f.click()}};this._progress_type="percentage";var a=window.navigator.userAgent;if(a.match(/Windows/gi)!=null&&a.match(/AppleWebKit/gi)!=null&&a.match(/Safari/gi)!=null){if(a.match(/Version\/5\.1\.5/gi)){this._upload_mp=false}if(a.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.1/gi)){this._upload_mp=false;this._upload_dnd=false}if(a.match(/Version\/5\.1\.2/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.7/gi)){this._upload_mp=false}}this._addFileInput();if(this._upload_dnd){this.p.ondragenter=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault()};this.p.ondragover=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault()};this.p.ondrop=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault();if(b._enabled){b._parseFilesInInput(c.dataTransfer.files)}};this._titleText="Drag-n-Drop files here or<br>click to select files for upload."}else{this._titleText="Click to select files for upload."}},_addFileInput:function(){if(this.f!=null){this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null}var a=this;this.f=document.createElement("INPUT");this.f.type="file";if(this._upload_mp){this.f.multiple="1"}this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);if(window.dhx4.isOpera){a._addFileInput()}else{this.value=""}}},_doUploadFile:function(c){var b=this;if(!this._loader){this._loader=new XMLHttpRequest();this._loader.upload.onprogress=function(d){if(b._files[this._idd].state=="uploading"){b._updateFileInList(this._idd,"uploading",Math.round(d.loaded*100/d.total))}};this._loader.onload=function(f){var d=dhx4.s2j(this.responseText);if(typeof(d)=="object"&&d!=null&&typeof(d.state)!="undefined"&&d.state==true){b._onUploadSuccess(this.upload._idd,d.name,null,d.extra);d=null}else{b._onUploadFail(this.upload._idd,(d!=null&&d.extra!=null?d.extra:null))}};this._loader.onerror=function(d){b._onUploadFail(this.upload._idd)};this._loader.onabort=function(d){b._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=c;var a=new FormData();a.append("file",this._files[c].file);if(this.callEvent("onBeforeFileUpload",["html5",this.loader,a])){this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5"+window.dhx4.ajax._dhxr("&"),true);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(a)}},_uploadStop:function(){if(!this._uploading||!this._loader){return}this._loader.abort()},_parseFilesInInput:function(b){for(var a=0;a<b.length;a++){this._addFileToQueue(b[a])}},_addFileToQueue:function(a){if(!this._beforeAddFileToList(a.name,a.size)){return}var b=(a._idd||window.dhx4.newId());this._files[b]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(b,a.name,a.size,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){if(!this._files[d]){return}var b=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[b,c])!==true){return}var a=false;if(this._uploading&&d==this._loader.upload._idd&&this._files[d].state=="uploading"){this._uploadStop();a=true}this._files[d].file=null;this._files[d].name=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[b,c]);if(a){this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null;this._loader.onload=null;this._loader.onerror=null;this._loader.onabort=null;this._loader.upload._idd=null;this._loader=null}this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this;var c=window.dhx4.newId();if(!this.k){this.k=document.createElement("DIV");this.k.className="dhx_file_form_cont";this.buttons.browse.appendChild(this.k);this.fr_name="dhx_file_"+window.dhx4.newId();this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>';this.fr=this.k.firstChild;if(window.navigator.userAgent.indexOf("MSIE")>=0){this.fr.onreadystatechange=function(){if(this.readyState=="complete"){a._onLoad()}}}else{this.fr.onload=function(){a._onLoad()}}}var b=document.createElement("DIV");b.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+c+"'><input type='file' name='file' class='dhx_file_input'></form>";this.k.appendChild(b);b.firstChild.lastChild._idd=c;b.firstChild.lastChild.onchange=function(){if(!a._beforeAddFileToList(this.value,null)){return}a._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";a._addForm()};b=null},_onLoad:function(){if(this._uploading){var a=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if(typeof(a)=="object"&&a!=null){if(typeof(a.state)!="undefined"){if(a.state=="cancelled"){this._onUploadAbort(this.fr._idd);a=null;return}else{if(a.state==true){if(typeof(a.size)!="undefined"&&!isNaN(a.size)){this._files[this.fr._idd].size=a.size}this._onUploadSuccess(this.fr._idd,a.name,null,a.extra);a=null;return}}}}this._onUploadFail(this.fr._idd,(a!=null&&a.extra!=null?a.extra:null))}},_addFileToQueue:function(b){var a=b.value.match(/[^\\\/]*$/g);if(a[0]!=null){a=a[0]}else{a=b.value}this._files[b._idd]={name:a,form:b.parentNode,node:b.parentNode.parentNode,input:b,state:"added"};this._addFileToList(b._idd,b.value,false,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(c){var a=this._files[c].name;var b=(this._data!=null&&this._data[c]!=null?this._data[c].serverName:null);if(this.callEvent("onBeforeFileRemove",[a,b])!==true){return}this._files[c].input.onchange=null;this._files[c].form.removeChild(this._files[c].input);this._files[c].node.removeChild(this._files[c].form);this._files[c].node.parentNode.removeChild(this._files[c].node);this._files[c].input=null;this._files[c].name=null;this._files[c].form=null;this._files[c].node=null;this._files[c].size=null;this._files[c].state=null;this._files[c]=null;delete this._files[c];this._removeFileFromList(c);this.callEvent("onFileRemove",[a,b])},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this._files[a].form.submit()},_uploadStop:function(){if(!this._uploading){return}this.fr.contentWindow.location.href=(this._url)+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel"+window.dhx4.ajax._dhxr("&")},_unloadEngine:function(){if(this.k){this.fr_name=null;this.fr.onreadystatechange=null;this.fr.onload=null;this.fr.parentNode.removeChild(this.fr);this.fr=null;this.k.firstChild.firstChild.lastChild.onchange=null;this.k.parentNode.removeChild(this.k);this.k=null}this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(window.dhtmlXSWFObjectsPull==null){window.dhtmlXSWFObjectsPull={items:{},callEvent:function(e,c,d){return window.dhtmlXSWFObjectsPull.items[e].uploader[c].apply(window.dhtmlXSWFObjectsPull.items[e].uploader,d)}}}var b=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+window.dhx4.ajax._dhxr(this._swf_file_url);this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release;this._progress_type="percentage";window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,b){return(this.callEvent("onBeforeFileAdd",[a,b])===true)},_addFileToQueue:function(d,b,c){if(window.dhx4.isIE){var a=document.createElement("INPUT");a.type="TEXT";a.style.position="absolute";a.style.left="0px";a.style.top=window.dhx4.absTop(this.buttons.browse)+"px";a.style.width="10px";document.body.appendChild(a);a.focus();document.body.removeChild(a);a=null}this._files[d]={name:b,size:c,state:"added"};this._addFileToList(d,b,c,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){if(!this._files[d]){return}var b=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[b,c])!==true){return}var a=false;if(this._uploading&&this._files[d].state=="uploading"){this._uploadStop();a=true}swfobject.getObjectById(this._swf_obj_id).removeFileById(d);this._files[d].name=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[b,c]);if(a){this._uploadStart()}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(c){for(var b in this._files){if(this._files[b].state=="uploading"){swfobject.getObjectById(this._swf_obj_id).uploadStop(b)}}},_unloadEngine:function(){if(window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]){window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].id=null;window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].uploader=null;window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]=null;delete window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]}this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof(this._sl_v)=="undefined"){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(c,a,b){window.dhtmlXFileUploaderSLObjects.items[c].uploader[a].apply(window.dhtmlXFileUploaderSLObjects.items[c].uploader,b)}}}this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();if(this._sl_v!=false){this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1];this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'}else{this._titleText="Silverlight plugin not found<br>or version less than 4.0";this.buttons.browse.style.cursor="wait";this.buttons.browse.title=""}this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(c,a,b){this._files[c]={name:a,size:b,state:"added"};this._addFileToList(c,a,b,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(b){if(!this._files[b]){return}var a=false;if(this._uploading&&this._files[b].state=="uploading"){this._uploadStop();a=true}document.getElementById([this._sl_obj_id]).Content.a.removeFileById(b);this._files[b].name=null;this._files[b].size=null;this._files[b].state=null;this._files[b]=null;delete this._files[b];this._removeFileFromList(b);if(a){this._uploadStart()}},_doUploadFile:function(b){var a=this._sl_upload_url.split("?");a=(a[1]!=null?"&"+a[1]:"");document.getElementById(this._sl_obj_id).Content.a.upload(b,this._sl_upload_url,a+"&mode=sl"+window.dhx4.ajax._dhxr("&"))},_uploadStop:function(c){this._uploading=false;for(var b in this._files){if(this._files[b].state=="uploading"){document.getElementById(this._sl_obj_id).Content.a.uploadStop(b)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null;delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a};dhtmlXFileUploader.prototype.getSLVersion=function(){var a=false;if(window.dhx4.isIE){try{var b=new ActiveXObject("AgControl.AgControl");if(b!=null){var f=4,d=0;while(b.isVersionSupported([f,d].join("."))){a=[f,d];if(++d>9){f++;d=0}}}b=null}catch(c){}}else{if(navigator.plugins["Silverlight Plug-In"]!=null){a=navigator.plugins["Silverlight Plug-In"].description.split(".")}}return a};dhtmlXForm.prototype.saveBackup=function(){if(!this._backup){this._backup={};this._backupId=new Date().getTime()}this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this.setFormData(this._backup[a])}};dhtmlXForm.prototype.clearBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this._backup[a]=null;delete this._backup[a]}};dhtmlXForm.prototype.addItem=function(c,a,g,d){var b=null;if(c instanceof Array){b=c[1];c=c[0]}var e=null;if(c!=null){var e=this._getParentForm(c,b);if(e!=null){if(e.item._list==null){if(!a.listParent){a.listParent=e.item._idd}e.form._addItem("list",e.item._idd,[a],null,e.item._idd,g,d)}else{e.item._list[0].addItem(null,a,g,d)}e.form=e.item=null;e=null;this._autoCheck();return}}this._prepareItem(a,g,d);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(b,a){this._removeItem(b,a)};dhtmlXForm.prototype.removeColumn=function(h,g,d,c){var j=null;if(h instanceof Array){j=h[1];h=h[0]}if(h!=null){var e=this._getParentForm(h,j);if(e!=null){if(e.item._list!=null&&e.item._list[0]!=null){e.item._list[0].removeColumn(null,g,d,c)}e.form=e.item=null;e=null}return}g=Math.min(Math.max(g,0),this.cont.childNodes.length-1);if(this.cont.childNodes.length==1){if(d==true){this._removeItemsInColumn(this.cont.childNodes[g])}}else{if(d==true){this._removeItemsInColumn(this.cont.childNodes[g])}else{if(!c){var a=g-1;if(a<0){a=g+1}}else{var a=g+1;if(a>this.cont.childNodes.length-1){a=g-1}}while(this.cont.childNodes[g].childNodes.length>0){this.cont.childNodes[a].appendChild(this.cont.childNodes[g].childNodes[0])}}var i=[];for(var b=0;b<this.base.length;b++){if(this.cont.childNodes[g]!=this.base[b]){i.push(this.base[b])}}this.base=i;this.cont.removeChild(this.cont.childNodes[g]);this.b_index--;i=null}};dhtmlXForm.prototype.getColumnNode=function(c,b){var d=null;var a=null;if(c instanceof Array){a=c[1];c=c[0]}if(c!=null){var e=this._getParentForm(c,a);if(e!=null){if(e.item._list!=null&&e.item._list[0]!=null&&d==null){d=e.item._list[0].getColumnNode(null,b)}e.form=e.item=null;e=null}return d}if(b<0||b>this.cont.childNodes.length-1){return null}return this.cont.childNodes[b]};dhtmlXForm.prototype._removeItemsInColumn=function(d){var a=[];for(var c=0;c<d.childNodes.length;c++){var b=d.childNodes[c];if(b._idd!=null&&b._type!=null){a.push([b._idd,(b._type=="ra"?b._value:null)])}b=null}for(var c=0;c<a.length;c++){this.removeItem(a[c][0],a[c][1])}};dhtmlXForm.prototype._getParentForm=function(g,e){if(this.itemPull[this.idPrefix+g]!=null){return{form:this,item:this.itemPull[this.idPrefix+g]}}for(var b in this.itemPull){if(this.itemPull[b]._type=="ra"&&this.itemPull[b]._group==g&&this.itemPull[b]._value==e){return{form:this,item:this.itemPull[b]}}}var d=null;for(var b in this.itemPull){if(!d&&this.itemPull[b]._list!=null){for(var c=0;c<this.itemPull[b]._list.length;c++){if(!d){d=this.itemPull[b]._list[c]._getParentForm(g,e)}}}}return d};(function(){for(var b in dhtmlXForm.prototype.items){if(!dhtmlXForm.prototype.items[b]._getItemNode){dhtmlXForm.prototype.items[b]._getItemNode=function(a){return a}}}})();dhtmlXForm.prototype._getItemNode=function(b,a){if(a!=null){b=[b,a]}return this.doWithItem(b,"_getItemNode")};dhtmlXForm.prototype.setRequired=function(h,f,e){if(typeof(e)=="undefined"){e=f}else{h=[h,f]}var c=this._getItemNode(h);if(!c){return}e=window.dhx4.s2b(e);c._required=(e==true);if(c._required){if(!c._validate){c._validate=[]}var b=false;for(var d=0;d<c._validate.length;d++){b=(c._validate[d]=="NotEmpty"||b)}if(!b){c._validate.push("NotEmpty")}var g=c.childNodes[c._ll?0:1].childNodes[0];if(!(g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0)){var a=document.createElement("SPAN");a.className="dhxform_item_required";a.innerHTML="*";g.appendChild(a);a=g=null}}else{if(c._validate!=null){var b=c._validate;c._validate=[];for(var d=0;d<b.length;d++){if(b[d]!="NotEmpty"){c._validate.push(b[d])}}if(c._validate.length==0){c._validate=null}}var g=c.childNodes[c._ll?0:1].childNodes[0];if(g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0){g.removeChild(g.lastChild);g=null}}this._resetValidateCss(c);c=null};dhtmlXForm.prototype.setNote=function(e,c,a){if(typeof(a)=="undefined"){a=c}else{e=[e,c]}var b=this._getItemNode(e);if(!b){return}var d=this._getNoteNode(b);if(!d){if(!a.width){a.width=b.childNodes[b._ll?1:0].childNodes[0].offsetWidth}d=document.createElement("DIV");d.className="dhxform_note";if({ch:1,ra:1}[b._type]){b.childNodes[b._ll?1:0].insertBefore(d,b.childNodes[b._ll?1:0].lastChild)}else{b.childNodes[b._ll?1:0].appendChild(d)}}d.innerHTML=a.text;if(a.width!=null){d.style.width=a.width+"px";d._w=a.width}d=null};dhtmlXForm.prototype.clearNote=function(d,b){if(typeof(b)!="undefined"){d=[d,b]}var a=this._getItemNode(d);if(!a){return}var c=this._getNoteNode(a);if(c!=null){c.parentNode.removeChild(c);c=null}};dhtmlXForm.prototype._getNoteNode=function(a){var c=null;for(var b=0;b<a.childNodes[a._ll?1:0].childNodes.length;b++){if(String(a.childNodes[a._ll?1:0].childNodes[b].className).search(/dhxform_note/)>=0){c=a.childNodes[a._ll?1:0].childNodes[b]}}a=null;return c};dhtmlXForm.prototype.setValidation=function(f,d,e){if(typeof(note)=="undefined"){e=d}else{f=[f,d]}var b=this._getItemNode(f);if(!b){return}if(b._validate!=null){for(var c=0;c<b._validate.length;c++){b._validate[c]=null}}b._validate=[];if(typeof(e)=="function"||typeof(window[e])=="function"){b._validate=[e]}else{b._validate=String(e).split(this.separator)}if(b._required){var a=false;for(var c=0;c<b._validate.length;c++){a=(b._validate[c]=="NotEmpty"||a)}if(!a){b._validate.push("NotEmpty")}}b=null};dhtmlXForm.prototype.clearValidation=function(d,c){if(typeof(c)!="undefined"){d=[d,c]}var a=this._getItemNode(d);if(!a){return}if(a._validate!=null){for(var b=0;b<a._validate.length;b++){a._validate[b]=null}}a._validate=a._required?["NotEmpty"]:null;a=null};dhtmlXForm.prototype.reloadOptions=function(a,f){var b=this.getItemType(a);if(!{select:1,multiselect:1,combo:1}[b]){return}if(b=="select"||b=="multiselect"){var d=this.getOptions(a);while(d.length>0){d.remove(0)}d.length=0;d=null;if(typeof(f)=="string"){this.doWithItem(a,"doLoadOptsConnector",f)}else{if(f instanceof Array){this.doWithItem(a,"doLoadOpts",{options:f})}}}if(b=="combo"){var g=this.getCombo(a);g.clearAll();g.setComboValue("");if(typeof(f)=="string"){this.doWithItem(a,"doLoadOptsConnector",f)}else{if(f instanceof Array){var c=null;for(var e=0;e<f.length;e++){if(window.dhx4.s2b(f[e].selected)){c=f[e].value}}g.addOption(f);if(c!=null){this.setItemValue(a,c)}g=null}}}};dhtmlXForm.prototype.setTooltip=function(f,e,d){if(typeof(d)=="undefined"){d=e}else{f=[f,e]}var b=this._getItemNode(f);if(!b){return}var a=null;if(b.childNodes.length==1){a=b.childNodes[0]}else{for(var c=0;c<b.childNodes.length;c++){if(b.childNodes[c].className!=null&&b.childNodes[c].className.search("dhxform_label")>=0){a=b.childNodes[c]}}}if(a!=null){if(d==null||d.length==0){a.removeAttribute("title")}else{a.title=d}}a=null};